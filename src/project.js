require=function o(n,c,r){function h(e,t){if(!c[e]){if(!n[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(l)return l(e,!0);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}var s=c[e]={exports:{}};n[e][0].call(s.exports,function(t){return h(n[e][1][t]||t)},s,s.exports,o,n,c,r)}return c[e].exports}for(var l="function"==typeof require&&require,t=0;t<r.length;t++)h(r[t]);return h}({ADUtils:[function(t,e,i){"use strict";cc._RF.push(e,"025193b36pNUI7I3k/dQpTf","ADUtils");var a=new Object;a.init=function(t){this.game=t},a.videoLoadFailedListener=function(e){var i=this;this.loadFaildlistener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnVideoLoadFailed",callback:function(t){i.game.hideLoading(),console.log("videoLoadFailedListener game"),e(),i.removeAllListener()}}),cc.eventManager.addListener(this.loadFaildlistener,1)},a.videoLoadSucceedListener=function(e){var i=this;this.loadSuccesslistener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnVideoLoadSucceed",callback:function(t){i.game.hideLoading(),console.log("videoLoadSucceedListener game"),e(),i.removeLoadListener()}}),cc.eventManager.addListener(this.loadSuccesslistener,1)},a.videoCloseFailedListener=function(e){var i=this;this.closeFaildlistener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnVideoCloseFailed",callback:function(t){i.game.hideLoading(),console.log("videoCloseFailedListener game"),e(),i.removeCloseListener()}}),cc.eventManager.addListener(this.closeFaildlistener,1)},a.videoCloseSucceedListener=function(e){var i=this;this.closeSuccesslistener=cc.EventListener.create({event:cc.EventListener.CUSTOM,eventName:"OnVideoCloseSucceed",callback:function(t){i.game.hideLoading(),console.log("videoCloseSucceedListener game"),e(),i.removeCloseListener()}}),cc.eventManager.addListener(this.closeSuccesslistener,1)},a.removeAllListener=function(){this.removeLoadListener(),this.removeCloseListener()},a.removeLoadListener=function(){this.loadFaildlistener&&(cc.eventManager.removeListener(this.loadFaildlistener),this.loadFaildlistener=null),this.loadSuccesslistener&&(cc.eventManager.removeListener(this.loadSuccesslistener),this.loadSuccesslistener=null)},a.removeCloseListener=function(){this.closeFaildlistener&&(cc.eventManager.removeListener(this.closeFaildlistener),this.closeFaildlistener=null),this.closeSuccesslistener&&(cc.eventManager.removeListener(this.closeSuccesslistener),this.closeSuccesslistener=null)},a.loadAndShowVideoAD=function(t,e,i){var a=this;loadVideoAds(t,e),this.videoLoadSucceedListener(function(){a.game.hideLoading(),a.removeAllListener(),a.showVideoAD(t,e,i),console.log("loadVideoADSucceed")}),this.videoLoadFailedListener(function(){Tip.show(a.i18n.t("otherError"),.5),console.log("loadVideoADFaild"),a.game.hideLoading(),a.removeAllListener()}),this.game.showLoading()},a.showVideoAD=function(t,e,i){console.log("showVideoAD");var a=this;showVideoAds(t,e),a.videoCloseSucceedListener(function(){a.game.hideLoading(),a.removeAllListener(),i.adFinish(),console.log("showVideoADSucceed")}),a.videoCloseFailedListener(function(){a.game.hideLoading(),a.removeAllListener(),Tip.show(a.i18n.t("otherError"),.5),console.log("showVideoADFaild")}),a.game.showLoading()},e.exports=a,cc._RF.pop()},{}],AudioPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"53e09la3W1GMaEV0ZyEpD/6","AudioPlayer");var s=t("UserDataStorage"),a=new Object;a.setMusic=function(t){s.updateVolume("music",Number(t)),this.music=t,null!=this.bgId&&cc.audioEngine.setVolume(this.bgId,this.music)},a.setSound=function(t){s.updateVolume("sound",Number(t)),this.sound=t},a.getMusic=function(){return this.init(),this.music},a.getSound=function(){return this.init(),this.sound},a.init=function(){if(null==this.music||null==this.sound){var t=s.UserData.volume.music,e=1;null!=t?e=parseFloat(t):this.setMusic(1);var i=s.UserData.volume.sound,a=1;null!=i?a=parseFloat(i):this.setSound(a),this.music=e,this.sound=a}},a.playSound=function(t){return this.init(),this.sound<=0?-1:cc.audioEngine.play(t,!1,this.sound)},a.playMusic=function(t,e){return this.init(),this.music<=0?-1:cc.audioEngine.play(t,e,this.music)},a.playerBgMusic=function(t){this.bgRes!=t&&(null!=this.bgId&&(cc.audioEngine.stop(this.bgId),this.bgId=null),this.bgRes=t,this.bgId=this.playMusic(t,!0))},a.stopBgMusic=function(){null!=this.bgId&&cc.audioEngine.stop(this.bgId)},e.exports=a,cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],Baseball:[function(t,e,i){"use strict";cc._RF.push(e,"2d451uRooBLD7Lxui8hf3xA","Baseball"),cc.Class({extends:cc.Component,properties:{baseball:cc.Node,showBall:cc.Node},onLoad:function(){},start:function(){},init:function(t){this.game=t,this.ballShowSpr=this.showBall.getComponent(cc.Sprite);var e=this.game.ball.spr.spriteFrame.clone();this.ballShowSpr.spriteFrame=e,this.ballInitPos=this.ballShowSpr.node.position,this.baseball.color=cc.color(255,255,255)},reset:function(){this.baseball.rotation=0,this.showBall.position=this.ballInitPos},play:function(){this.node.getComponent(cc.Animation).play()},hitFinish:function(){this.game.BattleGameUI.hitFinish()},hide:function(){this.node.active=!1}}),cc._RF.pop()},{}],BattleGameLogic:[function(t,e,i){"use strict";cc._RF.push(e,"ce534+jF+9MIYq3U23g8tXq","BattleGameLogic");var a=t("Types").HitLevel,s=t("UserDataStorage"),o=t("Utils"),n=t("AudioPlayer");cc.Class({extends:cc.Component,properties:{CoinNode:cc.Node,TxtDoubleCoin:cc.Node,TargetNode:cc.Node,PauseNode:cc.Node,TxtCoin:cc.Label,TxtTarget:cc.Label,TxtSpeed:cc.Label,TxtMaxSpeed:cc.Label,hitCamera:cc.Node,HitBar:cc.Node,PowerBar:cc.Node,TxtHitLevel:cc.Label,Baseball:cc.Node,ReadyGo:cc.Label,BuffIconPrefab:cc.Prefab,TaskIconPrefab:cc.Prefab,BuffIconList:cc.Node,TaskIconList:cc.Node,MachineBox:cc.Sprite,MachineBoxNode:cc.Node,BossTargetPrefab:cc.Prefab,BossNode:cc.Node,WallBoss:cc.Node,Distance:cc.Node,TipNode:cc.Node,TipTxt:cc.Label,LevelUp:cc.Animation,LevelTxtRight:cc.Label,LevelTxtLeft:cc.Label,hitAudio:{url:cc.AudioClip,default:null}},onLoad:function(){var e=this;this.node.on("hitListen",function(t){return e.switchHitListen()}),this.txtSpeedInitPos=this.TxtSpeed.node.position},start:function(){this.getComponent(cc.Animation).play("battleUIAnim")},init:function(t){this.game=t,this.hitBar=this.HitBar.getComponent("HitBar"),this.powerBar=this.PowerBar.getComponent("PowerBar"),this.powerBar.init(this.game),this.ball=this.game.ball.getComponent("ball"),this.baseball=this.Baseball.getComponent("Baseball"),this.baseball.init(this.game),this.wallBoss=this.WallBoss.getComponent("wallBoss"),this.wallBoss.init(this.game),this.distance=this.Distance.getComponent("DistanceProgress"),this.distance.init(this.game),this.Distance.scale=cc.winSize.width/1280,this.getCoin=0,this.setCoinTxt(this.getCoin),this.TxtDoubleCoin.active=!1,this.hidePowerBar(),this.baseball.node.active=!1,this.setPowerClose(!1),this.ringClose=!1,this.hitTouch=!1,this.powerTouch=!1,this.springTouch=!1,this.ringTouch=!1,this.listenTouch(!0),this.doubleCoinBuff=!1,this.isGetMachineBox=!1,this.CoinNode.active=!1,this.TargetNode.active=!1,this.PauseNode.active=!1,this.MachineBox.node.active=!1,this.initMachinePos=this.MachineBox.node.position,this.MachineBoxNode.active=!1,this.TipNode.active=!1,this.TipTxt.string=this.game.i18n.t("deathSpeedTip"),this.BossNode.active=!1,this.LevelUp.node.active=!1},resetData:function(){this.game.taskUI.resetData(),this.guideTaskRefresh(),this.resetGameStage(),this.readyGo(),this.resetBallData(),this.resetBaseCoin(),this.showBuff(),this.resetDistance()},guideTaskRefresh:function(){1==this.game.readyUI.newTask&&0==this.game.userData.guide.task&&(this.game.readyUI.newTask=!1,s.updateGuide("task",!0),this.game.taskUI.getNewTask())},resetDistance:function(){this.distance.show(this.minDistance,this.maxDistance)},resetGameStage:function(){this.stageNum=this.game.userData.stage,this.minDistance=this.game.stageObj[this.stageNum].minDistance,this.maxDistance=this.game.stageObj[this.stageNum].maxDistance,this.enterBossStage=!1,this.showTargetLine()},setIsGetMachineBox:function(t){this.isGetMachineBox=t},getIsGetMachineBox:function(){return this.isGetMachineBox},showTipNode:function(){var t=this;t.TipNode.active=!0;var e=cc.blink(2,3);t.TipNode.runAction(cc.sequence(e,cc.delayTime(.5),cc.callFunc(function(){t.TipNode.active=!1})))},showCoinNode:function(){0<this.game.userData.buff[3]&&(this.costBuffAct(3),this.doubleCoinBuff=!0),this.CoinNode.active=!0},showTargetNode:function(){this.TargetNode.active=!0},showPauseNode:function(){this.PauseNode.active=!0},resetBaseCoin:function(){this.userData=this.game.userData,this.coinLv=this.userData.upgrade[3],this.baseCoin=Number(this.game.upgradeObj[3][this.coinLv].effect)},addCoin:function(t){this.getCoin+=t,this.setCoinTxt(this.getCoin)},setCoinTxt:function(t){this.TxtCoin.string=t},setRunDistance:function(t){var e=this.game.ball.getStageRunDistance();e>this.maxDistance&&(e=this.maxDistance),this.TxtTarget.string=e+"M"},setMaxSpeed:function(t){this.TxtMaxSpeed.string="/"+t},setSpeed:function(t){t<0&&(t=0);var e=!1;t>this.speed&&(e=!0),this.speed=t;var i=null;(this.TxtSpeed.string=t)<=this.maxSpeed?(this.TxtSpeed.node.color=cc.color(255,255,255),i=cc.tintTo(.18,255,255,255)):(this.TxtSpeed.node.color=cc.color(255,0,0),i=cc.tintTo(.18,255,0,0)),e&&(this.TxtSpeed.node.stopAllActions(),this.TxtSpeed.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.18,1.5),cc.tintTo(.18,255,0,0)),cc.spawn(cc.scaleTo(.18,1),i))))},speedDown:function(){this.TxtSpeed.node.stopAllActions(),this.TxtSpeed.node.scale=1,this.TxtSpeed.node.runAction(cc.sequence(cc.moveBy(.03,-2,0),cc.moveBy(.03,4,0),cc.moveBy(.03,-2,0)).repeat(3))},resetBallData:function(){this.ball.resetInitImpulse(),this.ball.resetMaxSpeed(),this.ball.resetLimitSpeedY(),this.ball.resetSpeedAmendEffect(),this.maxSpeed=this.ball.maxSpeed,this.setSpeed(0),this.setMaxSpeed(this.maxSpeed)},showBuff:function(){this.showBuffIcon(),this.game.readyUI.TaskActive&&this.showTaskIcon()},showBuffIcon:function(){var t=this.game.userData.buff;this.BuffIconList.removeAllChildren(),this.buffListObj={};var e=0;for(var i in t)if("length"!=i){var a=t[i],s=Number(i);if(0<a){var o=cc.instantiate(this.BuffIconPrefab);o.setPosition(cc.v2((o.width+20)*e,0)),this.BuffIconList.addChild(o),o.getComponent("LotteryBuffIcon").init(this.game,s),this.buffListObj[s]=o,e++}}},setBuffCount:function(t,e){null!=this.buffListObj[t]&&0==e&&(this.buffListObj[t].active=!1),this.sortBuffIcon()},sortBuffIcon:function(){var t=0;for(var e in this.buffListObj)if("length"!=e){var i=this.buffListObj[e];if(this.buffListObj[e].active){var a=cc.moveTo(.2,(i.width+20)*t,0);i.runAction(cc.sequence(cc.delayTime(.2),a)),t++}}},costBuffAct:function(d){var u=this;if(s.updateBuff(d,this.game.userData.buff[d]-1),this.game.pause(null,!0),null!=this.buffListObj[d]){var t=this.buffListObj[d].position,g=cc.instantiate(this.BuffIconPrefab);g.setPosition(t),this.BuffIconList.addChild(g);var e=g.getComponent("LotteryBuffIcon");e.init(this.game,d),e.hideCount();var i=cc.callFunc(function(){switch(d){case 1:u.baseball.baseball.color=cc.color(255,0,0);var t=cc.callFunc(function(){u.baseball.baseball.color=cc.color(255,255,255)}),e=cc.callFunc(function(){u.baseball.baseball.color=cc.color(255,0,0)}),i=cc.callFunc(function(){u.playHitAni(),u.game.resume()}),a=cc.repeat(cc.sequence(t,cc.delayTime(.1),e,cc.delayTime(.1)),3);u.baseball.baseball.runAction(cc.sequence(a,i));break;case 2:var s=cc.callFunc(function(){u.powerBar.bar.active=!0,u.powerBar.addGrid(),u.game.resume()}),o=cc.callFunc(function(){u.powerBar.bar.active=!1}),n=cc.sequence(o,cc.moveBy(.1,cc.p(-20,0)),cc.moveBy(.1,cc.p(30,0)),cc.moveBy(.1,cc.p(-15,0)),cc.moveBy(.05,cc.p(5,0)),s);u.powerBar.node.runAction(n);break;case 3:var c=cc.blink(1,3);u.TxtDoubleCoin.active=!0,u.TxtDoubleCoin.runAction(cc.sequence(c,cc.callFunc(function(){u.game.resume()})));break;case 4:var r=this.game.ball,h=r.impulse;r.setLinearVelocity(cc.v2(h.x,r.limitSpeedY));var l=cc.p(r.node.x,r.node.y-r.node.height/2);r.reviveAni(l),u.game.resume()}g.removeFromParent(),g.destroy()},this);u.setBuffCount(d,0),g.runAction(cc.sequence(cc.moveTo(.5,cc.p(0-this.BuffIconList.x,0-this.BuffIconList.y)),cc.spawn(cc.scaleTo(.5,2),cc.fadeOut(.5)),i))}},showTaskIcon:function(){var t=this.game.userData.task;this.TaskIconList.removeAllChildren(),this.taskListObj={};var e=0;for(var i in t)if("length"!=i&&"remove"!=i){var a=t[i].id,s=cc.instantiate(this.TaskIconPrefab);s.setPosition(cc.v2(0,-s.height/2-(s.height+20)*e)),this.TaskIconList.addChild(s),s.getComponent("TaskIcon").init(this.game,a),this.taskListObj[a]=s,e++}},showPowerBar:function(){this.powerBar.node.active=!0},hidePowerBar:function(){this.powerBar.node.active=!1},onPowerStart:function(){console.log("power touch start"),this.powerClose||this.game.ball.smallShoot()},addPower:function(t){this.powerBar.addPower(t)},checkPower:function(){this.powerBar.checkPower()},resetTaskProgress:function(t){this.taskListObj[t]&&this.taskListObj[t].getComponent("TaskIcon").resetProgress()},getMachineBox:function(t){var i=this,e=t.node.position;this.MachineBox.node.active=!0,this.MachineBox.node.scale=1,this.MachineBox.spriteFrame=t.node.getChildByName("spr").getComponent(cc.Sprite).spriteFrame.clone();var a=this.game.Camera.node.position;this.MachineBox.node.x=e.x-a.x+this.node.parent.x,this.MachineBox.node.y=e.y-a.y+this.node.parent.y;var s=cc.p(.43*cc.winSize.width,.25*-cc.winSize.height);console.log(this.MachineBoxNode.position);var o=cc.moveTo(1,s),n=cc.scaleTo(1,.3),c=cc.rotateTo(1,1080),r=cc.callFunc(function(){i.MachineBoxNode.active=!0,i.MachineBoxNode.getComponent(cc.Animation).play("machineBoxLight");var t=i.MachineBox.node.scale,e=cc.sequence(cc.scaleTo(.5,1.1*t),cc.scaleTo(.5,t),cc.delayTime(.3)).repeatForever();i.MachineBox.node.runAction(e)});this.MachineBox.node.runAction(cc.sequence(cc.spawn(o,n,c),r))},readyGo:function(){var t=this;t.game.Camera.initPos(),t.baseball.node.active=!0,t.baseball.reset(),t.ReadyGo.node.active=!0;var e=cc.callFunc(function(){t.ReadyGo.node.scale=1,t.ReadyGo.node.opacity=255,t.ReadyGo.node.runAction(cc.fadeIn(0)),t.ReadyGo.string=this.game.i18n.t("ready")},this),i=cc.spawn(cc.scaleTo(1,.5),cc.fadeOut(1)),a=cc.callFunc(function(){t.ReadyGo.node.scale=1,t.ReadyGo.node.opacity=255,t.ReadyGo.string=this.game.i18n.t("go")},this),s=cc.spawn(cc.scaleTo(1,.5),cc.fadeOut(1));this.haveSpeedBuff=!1;var o=cc.callFunc(function(){t.ReadyGo.node.scale=1,t.ReadyGo.node.opacity=255,t.ReadyGo.node.active=!1,0<t.game.userData.buff[1]?(t.haveSpeedBuff=!0,t.costBuffAct(1)):t.playHitAni()},this);t.ReadyGo.node.runAction(cc.sequence(e,i,a,s,o))},playHitAni:function(){var t=this;this.baseball.node.active=!0,this.ballAnimState=this.baseball.getComponent(cc.Animation).play("hit"),t.ballAnimState.speed=1,this.setRunDistance(this.game.ball.initPos.x),this.scheduleOnce(function(){this.hitBar.init(this.game),t.game.Camera.watch(this.hitCamera),t.ballAnimState.speed=.05},2.15)},hitbarMoveFinish:function(){this.ballAnimState.speed=1},hitFinish:function(){var t=this;this.hitBar.hide(),n.playSound(this.hitAudio);var e=0;this.hitBar.hitLevel!=a.Bad&&(t.game.cameraShake(),e=.5);var i=!1;this.hitBar.hitLevel==a.Amazing&&(i=!0),this.scheduleOnce(function(){t.scheduleOnce(function(){t.game.Camera.iswatch=!1},1),t.game.ball.hitStart(this.hitBar.ballSpeed,i),t.hitBar.hide(),this.game.goToGameing(),this.game.Camera.goTarget(),this.showTargetNode(),this.showPauseNode(),this.baseball.node.active=!1},e)},showHitLevel:function(t){cc.sys.isNative&&trackEvent_2("AmazingTime",String(t+1)),this.hitBar.isGuide||s.updateHitList(t==a.Amazing);var e=this.hitBar.getHitLevelDesc(t);this.TxtHitLevel.node.active=!0,this.TxtHitLevel.string=e,this.scheduleOnce(function(){this.TxtHitLevel.node.active=!1},1)},switchHitListen:function(t){this.hitTouch=!!t},setHitClose:function(t){this.hitClose=t},switchPowerListen:function(t){this.powerTouch=!!t},setPowerClose:function(t){this.powerClose=t},switchSpringListen:function(t,e){this.springObj=e,this.springTouch=!!t},switchRingListen:function(t,e){this.ringObj=e,this.ringTouch=!!t},setRingClose:function(t){this.ringClose=t},showTargetLine:function(){var t=this.maxDistance-this.minDistance,e=this.game.ball.getDistance(t);if(!this.targetLine){var i=cc.instantiate(this.BossTargetPrefab);this.targetLine=i,this.game.root.node.getChildByName("aniLayer").addChild(this.targetLine)}var a=this.game.background.node,s=a.getComponent("world").groundPrefab.data,o=s.getComponent(cc.PhysicsBoxCollider).size.height,n=a.y+s.y+o,c=cc.p(e,n);this.targetLine.setPosition(c)},challengeBoss:function(){var i=this;i.enterBossStage=!0,i.game.pause(null,!0);var t=i.game.stageObj[this.stageNum],a=o.getResultByWeight(t.boss).bossID,e=this.game.discoColor();i.scheduleOnce(function(){i.BossNode.active=!0;var t=i.game.userData.bossHP;0==t&&(s.updateBossHP(3),t=3);var e=i.wallBoss.showBoss(t);i.scheduleOnce(function(){i.game.resume(),i.game.foeMng.startSpawn(a),i.scheduleOnce(function(){0==i.game.userData.guide.wallBoss&&(i.game.guideUI.showGuide("wallBoss"),s.updateGuide("wallBoss",!0))},1)},e)},e)},bossChallengeSuccess:function(){var t=this,e=this.playLevelUpAni();this.scheduleOnce(function(){t.game.goToOver()},e),s.updateStage(this.stageNum+1)},playLevelUpAni:function(){this.listenTouch(!1),this.game.foeMng.stopSpawn();var t=this,e=this.LevelUp.getAnimationState("levelUp").clip.duration,i=cc.callFunc(function(){t.LevelUp.play("levelUp"),t.LevelTxtRight.string=this.game.i18n.t("stage"),t.LevelTxtLeft.string=this.game.i18n.t("clear")},this),a=cc.callFunc(function(){t.LevelUp.play("levelUp"),t.LevelTxtRight.string=this.game.i18n.t("level"),t.LevelTxtLeft.string=this.game.i18n.t("up")},this),s=cc.callFunc(function(){t.LevelUp.node.active=!0}),o=cc.callFunc(function(){t.LevelUp.node.active=!1});return this.node.runAction(cc.sequence(s,i,cc.delayTime(e+.5),a,cc.delayTime(e),o)),2*e+1},listenTouch:function(t){t?this.node.on("touchstart",this.touchStart,this):this.node.off("touchstart",this.touchStart,this)},touchStart:function(){if(this.hitTouch){if(this.hitClose)return;return"hit"==this.game.guideUI.tag&&1==this.game.guideUI.node.active&&this.game.guideUI.closeTapTip(),this.hitBar.hit(),this.switchHitListen(!1),this.showHitLevel(this.hitBar.getHitLevel()),void(this.ballAnimState.speed=1)}if(this.springTouch)this.springObj.setSuperJump(!0);else if(this.ringTouch){if(this.ringClose)return;this.ringObj.speedUp()}else if(this.powerTouch){if(this.powerClose)return;return"smallShoot"==this.game.guideUI.tag&&1==this.game.guideUI.node.active&&this.game.guideUI.closeTapTip(),"power"==this.game.guideUI.tag&&1==this.game.guideUI.node.active&&this.game.guideUI.close(),void(0<this.powerBar.powerCount?this.game.ball.smallShoot():this.powerBar.shake())}},update:function(t){this.game.ball.getStageRunDistance()>this.maxDistance&&!this.enterBossStage&&this.challengeBoss()}}),cc._RF.pop()},{AudioPlayer:"AudioPlayer",Types:"Types",UserDataStorage:"UserDataStorage",Utils:"Utils"}],DistanceProgress:[function(t,e,i){"use strict";cc._RF.push(e,"286f0/jluFH0p2V8DsarJMY","DistanceProgress"),cc.Class({extends:cc.Component,properties:{progressSpr:cc.Sprite,bestScoreArrow:cc.Node,playNode:cc.Node,minDistanceTxt:cc.Label,maxDistanceTxt:cc.Label},onLoad:function(){},start:function(){},init:function(t){this.game=t},show:function(t,e){this.pathLength=e-t,this.minDistance=t,this.maxDistance=e,this.showDistance(this.minDistance,this.maxDistance),this.setProgress(0),this.setBestScore(this.game.userData.bestScore)},showDistance:function(t,e){this.minDistanceTxt.string=t,this.maxDistanceTxt.string=e},setBestScore:function(t){var e=(t-this.minDistance)/this.pathLength;e<0&&(e=0),1<e&&(e=1),this.bestScoreArrow.x=this.progressSpr.node.width*e},setProgress:function(t){var e=t/this.pathLength;e<0&&(e=0),1<e&&(e=1),this.playNode.x=this.progressSpr.node.width*e}}),cc._RF.pop()},{}],FoeMng:[function(t,e,i){"use strict";cc._RF.push(e,"1313cqmUsZDI7mSXo3y51JD","FoeMng");var a=t("Spawn"),u=t("Types").GameState,g=t("Types").FoeType,B=t("Utils");cc.Class({extends:cc.Component,properties:{spawns:{default:[],type:a,tooltip:"顺序与配置表中的id顺序一致 id：1 - n   index：0 - (n-1)"}},onLoad:function(){this.loadConfig()},start:function(){},init:function(t){this.game=t,this.ball=t.ball,this.foeGroup=t.foeGroup,this.background=t.background,this.groundNode=this.background.getComponent("world").groundPrefab.data,this.groundPos=this.background.convertToWorldSpace(this.groundNode.position),this.foeList=[],this.graphicsList=null,this.generatedList=null,this.limitMaxPlayTimes=0,this.level=0,this.specificList_cd={},this.groupList_cd={}},loadConfig:function(){this.loadGraphicsConfig(),this.loadGeneratedConfig()},loadGraphicsConfig:function(){var i=this;cc.loader.load(cc.url.raw("resources/GameJson/Graphics.json"),function(t,e){t?cc.log(t):i.graphicsList=i.trimGraphicsData(e)})},loadGeneratedConfig:function(){var i=this;cc.loader.load(cc.url.raw("resources/GameJson/Generated.json"),function(t,e){t?cc.log(t):(i.generatedObj=i.trimGeneratedData(e),i.initCDList(i.generatedObj))})},trimGraphicsData:function(t){for(var e=B.deepClone(t),i=e.length,a=[],s=0;s<i;s++){var o=e[s],n={};n.id=Number(o.id)-1,n.res=String(o.res),n.injureState=1!=Number(o.state),n.gold=Number(o.gold)/1e3,n.power=Number(o.energy);var c=String(o.posx).split(",");n.minPosx=Number(c[0]),n.maxPosx=Number(c[1]);var r=String(o.posy).split("|");n.posyObj={};for(var h=0;h<r.length;h++){var l=r[h],d=String(l).split(",");n.posyObj[h]={},n.posyObj[h].weight=Number(d[0]),n.posyObj[h].minPosy=Number(d[1]),n.posyObj[h].maxPosy=Number(d[2])}var u=String(o.posy1).split("|");n.posyObj1={};for(var g=0;g<u.length;g++){var p=u[g],m=String(p).split(",");n.posyObj1[g]={},n.posyObj1[g].weight=Number(m[0]),n.posyObj1[g].minPosy=Number(m[1]),n.posyObj1[g].maxPosy=Number(m[2])}n.isControl=0!=Number(o.iscontrol),n.priority=Number(o.priority);var f=String(o.speed).split(",");n.minSpeed=Number(f[0])/1e3,n.maxSpeed=Number(f[1])/1e3,n.effect1=Number(o.effect1),n.effect2=Number(o.effect2),n.effect3=Number(o.effect3),n.effect4=Number(o.effect4),a[s]=n}return a},trimGeneratedData:function(t){for(var e=B.deepClone(t),i=e.length,a={},s=0;s<i;s++){var o=e[s],n={};n.id=Number(o.id),n.BossID=Number(o.BOSSID),n.limitType=Number(o.limittype);var c=String(o.playtimes).split("-");n.minPlayTimes=Number(c[0]),n.maxPlayTimes=Number(c[1]),n.maxPlayTimes>this.limitMaxPlayTimes&&(this.limitMaxPlayTimes=n.maxPlayTimes);var r=String(o.layerRange).split("-");n.minRange=Number(r[0]),n.maxRange=Number(r[1]);var h=String(o.enemy1).split("|");n.boxInterval=Number(h[0]);var l=String(h[1]).split("-");n.boxMinCount=Number(l[0]),n.boxMaxCount=Number(l[1]);var d=String(o.enemy2).split("|");n.triangleInterval=Number(d[0]);var u=String(d[1]).split("-");n.triangleMinCount=Number(u[0]),n.triangleMaxCount=Number(u[1]);var g=String(o.enemy3).split("|");n.fiveStarInterval=Number(g[0]);var p=String(g[1]).split("-");n.fiveStarMinCount=Number(p[0]),n.fiveStarMaxCount=Number(p[1]);var m=String(o.nothing).split("|");n.specificInterval=Number(m[0]),n.specificRefreshRate=Number(m[1]);var f=String(o.total_chance).split("|");n.specificRefreshObj={};for(var v=0;v<f.length;v++){var S=f[v],b=String(S).split(",");n.specificRefreshObj[v]={},n.specificRefreshObj[v].id=Number(b[0]),n.specificRefreshObj[v].limit=Number(b[1]),n.specificRefreshObj[v].weight=Number(b[2])}var y=String(o.group).split("|");n.groupInterval=Number(y[0]),n.groupRefreshRate=Number(y[1]);var C=String(o.grouptotal_chance).split("|");n.groupRefreshObj={};for(var T=0;T<C.length;T++){var w=C[T],L=String(w).split(",");n.groupRefreshObj[T]={},n.groupRefreshObj[T].id=Number(L[0]),n.groupRefreshObj[T].limit=Number(L[1]),n.groupRefreshObj[T].weight=Number(L[2])}a[n.limitType]||(a[n.limitType]=[]),a[n.limitType].push(n)}return a},getGraphicsDataByType:function(t){for(var e=0;e<this.graphicsList.length;e++){var i=this.graphicsList[e];if(i.id==t)return i}return null},initCDList:function(t){this.initSpecificCDList(t),this.initGroupCDList(t)},initSpecificCDList:function(t){var e=t[1][0].specificRefreshObj;for(var i in e){var a=e[i];this.specificList_cd[a.id]=0}},initGroupCDList:function(t){var e=t[1][0].groupRefreshObj;for(var i in e){var a=e[i];this.groupList_cd[a.id]=0}},setSpecificCD:function(t,e){var i=this.specificList_cd;for(var a in i)if(t==a){for(var s in e){var o=e[s];if(o.id==t){i[a]=o.limit;break}}break}},setGroupCD:function(t,e){var i=this.groupList_cd;for(var a in i)if(t==a){for(var s in e){var o=e[s];if(o.id==t){i[a]=o.limit;break}}break}},produceFoe:function(){var t=this.spawns[0];this.createSpawn(t,5)},fixBoxFoe:function(){var t=this.spawns[0].spawn(this.game.poolMng);t&&(this.foeGroup.addChild(t),t.emit("init"),t.setPosition(cc.p(1.4*this.game.ball.impulse.x*this.game.BattleGameUI.hitBar.initalSpeed10-160,1200)),t.getComponent("Move").stopMove=!0,this.foeList.push(t))},produceGroup:function(t){var e=this.game.groupObj[t];if(e){var i=e.groupList,a=B.getRandomRate(Number(e.minSpeed),Number(e.maxSpeed));for(var s in i)if(i.hasOwnProperty(s)){var o=i[s],n=o.id,c={customPos:o.offset,speedRate:a},r=this.spawns[n-1];n-1==g.box&&(r.isFiveStar=!0),this.createSpawn(r,1,c)}}},startSpawn:function(t){var o=this,n=this;n.stopSpawn();var c=n.getCurrentgeneratedData();this.game.BattleGameUI.enterBossStage&&(c=n.getBossGeneratedData(t).generatedList);for(var e=function(t){var e=t;2==t&&(e=0);var i=o.spawns[e],a=0,s=0;i.foeType==g.box?0==t?a=c.boxInterval:2==t&&(a=c.fiveStarInterval):i.foeType==g.triangle&&(a=c.triangleInterval),o.schedule(function(){n.game.gameState==u.Gameing?(i.isFiveStar=!1,i.foeType==g.box?0==t?s=B.randomNumBoth(c.boxMinCount,c.boxMaxCount):2==t&&(s=B.randomNumBoth(c.fiveStarMinCount,c.fiveStarMaxCount),i.isFiveStar=!0):i.foeType==g.triangle&&(s=B.randomNumBoth(c.triangleMinCount,c.triangleMaxCount)),n.createSpawn(i,s)):this.stopSpawn()},a)},i=0;i<3;i++)e(i);var a=c.specificInterval,s=c.specificRefreshRate,r=c.specificRefreshObj;this.schedule(function(){if(n.game.gameState==u.Gameing)if(n.refreshSpecificCD(),B.randomNumBoth(0,999)<s)console.log("随机不刷新");else{var t=n.getSpecificCDFoe();if(0!=t.length){var e=n.getGraphics(r,t),i=n.spawns[e-1];i?(console.log("（存在）生成图形，id： "+e),i.foeType==g.machineBox&&1==this.game.BattleGameUI.getIsGetMachineBox()?console.log("本局游戏已经获取过宝箱了"):n.createSpawn(i,1)):console.log("（不存在）生成图形，id： "+e),n.setSpecificCD(e,r)}else console.log("所有图形都在cd中")}else n.stopSpawn()},a);var h=c.groupInterval,l=c.groupRefreshRate,d=c.groupRefreshObj;this.schedule(function(){if(n.game.gameState==u.Gameing)if(n.refreshGroupCD(),B.randomNumBoth(0,999)<l)console.log("随机不刷新");else{var t=n.getGroupCDFoe();if(0!=t.length){var e=n.getGraphics(d,t);this.produceGroup(e),n.setGroupCD(e,d)}else console.log("所有图形都在cd中")}else n.stopSpawn()},h)},stopSpawn:function(){this.unscheduleAllCallbacks()},getSpecificCDFoe:function(){var t=[],e=this.specificList_cd;for(var i in e){0==e[i]&&t.push(Number(i))}return t},getGroupCDFoe:function(){var t=[],e=this.groupList_cd;for(var i in e){0==e[i]&&t.push(Number(i))}return t},refreshSpecificCD:function(){var t=this.specificList_cd;for(var e in t)0<t[e]&&t[e]--},refreshGroupCD:function(){var t=this.groupList_cd;for(var e in t)0<t[e]&&t[e]--},getGraphics:function(t,e){for(var i=0,a={},s=0,o=0;o<e.length;o++){var n=e[o];for(var c in t){var r=t[c];if(n==r.id&&0<r.weight){s+=r.weight,a[n]=s;break}}}var h=B.randomNumBoth(0,s);for(var l in a){var d=a[l];if(i=Number(l),h<=d)break}return i},getGeneratedList:function(){var t=this.game.userData.playTime,e=null,i=B.isDayNewGame(this.game.userData.lastPlayTimeStamp),a=null;return t<=this.limitMaxPlayTimes?(a=1,e=this.generatedObj[1]):i?(a=2,e=this.generatedObj[2]):6<=this.game.userData.bestScoreHoldCount?(a=3,e=this.generatedObj[3]):(a=4,e=this.generatedObj[4]),{type:a,generatedList:e}},getBossGeneratedData:function(t){var e;e=this.generatedObj[0];for(var i=0;i<e.length;i++){var a=e[i];if(a.BossID==t)return{type:5,generatedList:a}}return{type:5,generatedList:null}},checkLevel:function(){for(var t=this.game.ball.getRunDistance(),e=this.game.userData.playTime,i=this.getGeneratedList(),a=i.type,s=i.generatedList,o=0;o<s.length;o++){var n=s[o];if(1==a){if(t>=n.minRange&&t<=n.maxRange&&n.minPlayTimes<=e&&n.maxPlayTimes>=e)if(n.id>this.level){this.startSpawn();break}}else if(t>=n.minRange&&t<=n.maxRange)if(n.id>this.level){this.startSpawn();break}}},getCurrentgeneratedData:function(){for(var t=this.game.ball.getRunDistance(),e=this.game.userData.playTime,i=this.getGeneratedList(),a=i.type,s=i.generatedList,o=null,n=0;n<s.length;n++){var c=s[n];if(1==a){if(t>=c.minRange&&t<=c.maxRange&&c.minPlayTimes<=e&&c.maxPlayTimes>=e){o=c,this.level=o.id;break}}else if(t>=c.minRange&&t<=c.maxRange){o=c,this.level=o.id;break}}return o},createSpawn:function(t,e,i){for(var a=this,s=0;s<e;s++){var o=t.spawn(a.game.poolMng);if(o){a.foeGroup.addChild(o);var n=!1;if(t.foeType==g.box&&1==t.isFiveStar?(n=!0,o.emit("init","fiveStar")):o.emit("init"),i){var c=i.customPos,r=i.speedRate;o.setPosition(a.getOffsetByBall(o,cc.p(c.x,c.y)));var h=o.getComponent("Move");h&&h.resetRate(r)}else o.setPosition(a.getNewFoePosition(t.foeType,o,n));a.foeList.push(o)}}},spawnFoe:function(){this.game.gameState!=u.Gameing&&this.unschedule(this.spawnFoe);var t=element.spawn(this.game.poolMng);t&&(this.foeGroup.addChild(t),t.setPosition(this.getNewFoePosition(element.foeType,t)),this.foeList.push(t))},despawnFoe:function(t){var e=t.foeType;this.game.poolMng.returnFoe(e,t.node);for(var i=0;i<this.foeList.length;i++){var a=this.foeList[i];a===t.node&&this.foeList.remove(a)}},getOffsetByBall:function(t,e){var i=this.groundNode.getComponent(cc.PhysicsBoxCollider).size.height;return cc.p(this.ball.node.x+cc.winSize.width+e.x,this.background.y+this.groundNode.y+i+t.height/2+e.y)},getNewFoePosition:function(t,e,i){var a=this.groundNode.getComponent(cc.PhysicsBoxCollider).size.height,s=this.getGraphicsDataByType(t),o=B.randomNumBoth(s.minPosx,s.maxPosx),n=null;n=i?s.posyObj1:s.posyObj;var c=B.getResultByWeight(n),r=B.randomNumBoth(c.minPosy,c.maxPosy);return cc.p(this.ball.node.x+cc.winSize.width+o,this.background.y+this.groundNode.y+a+e.height/2+r)},update:function(t){for(var e=0;e<this.foeList.length;e++){var i=this.foeList[e];i.x<this.ball.node.x-cc.winSize.width/2&&i.emit("reset")}this.generatedObj&&this.game.gameState==u.Gameing&&!this.game.BattleGameUI.enterBossStage&&this.checkLevel()}}),cc._RF.pop()},{Spawn:"Spawn",Types:"Types",Utils:"Utils"}],Foe_base:[function(t,e,i){"use strict";cc._RF.push(e,"7650a4Xcb1DzKKpmeE8Hh5Q","Foe_base");var a=t("Types").FoeType,r=t("Utils"),s=(t("UserDataStorage"),t("AudioPlayer")),o=cc.Class({extends:cc.Component,properties:{foeType:{default:a.box,type:a},injureState:!1,deathAudio:{url:cc.AudioClip,default:null}},onLoad:function(){var e=this,t=cc.find("/Game");this.game=t.getComponent("Game"),this.foeMng=t.getComponent("FoeMng"),this.node.on("death",function(t){return e.death()}),this.node.on("deathUnlessControl",function(t){return e.deathUnlessControl()}),this.node.on("reset",function(t){return e.reset()}),this.node.on("init",function(t){return e.init(t)}),this.node.on("fly_death",function(t){return e.flyAndDeath(null,t.detail)});var i=this.node.getComponent(cc.RigidBody);this.body=i,this.getComponent("Move")&&(this.move=this.getComponent("Move")),this.alterProperty()},alterProperty:function(){var t=this.game.foeMng.getGraphicsDataByType(this.foeType);this.injureState=t.injureState,this.gold=t.gold,this.power=t.power,this.minPosx=t.minPosx,this.maxPosx=t.maxPosx,this.posyList=t.posyList,this.isControl=t.isControl,this.priority=t.priority,this.node.isControl=this.isControl,this.node.priority=this.priority,this.minSpeed=t.minSpeed,this.maxSpeed=t.maxSpeed,this.effect1=t.effect1,this.effect2=t.effect2,this.effect3=t.effect3,this.effect4=t.effect4,this.setMoveProperty(this.minSpeed,this.maxSpeed)},setMoveProperty:function(t,e){this.node.getComponent("Move")&&this.node.getComponent("Move").initProperty(t,e)},init:function(t){this.foeType==a.box&&(t.detail&&"fiveStar"==t.detail?(this.boxSpr.node.active=!1,this.fiveStarSpr.node.active=!0):(this.boxSpr.node.active=!0,this.fiveStarSpr.node.active=!1)),this.move&&(this.move.setSwitch(!0),this.move.setRotate(!0)),this.setMoveProperty(this.minSpeed,this.maxSpeed),this.isdeath=!1,this.fly=!1},addCoin:function(t){this.game.BattleGameUI.CoinNode.active||this.game.BattleGameUI.showCoinNode();var e=1;t&&(e=t);var i=Math.ceil(this.gold*this.game.BattleGameUI.baseCoin*r.getRandomRate(.9,1.1)*e);this.game.BattleGameUI.doubleCoinBuff&&(i*=2),this.game.BattleGameUI.addCoin(i)},death:function(t){var e=this;if(!e.isdeath){if(e.isdeath=!0,e.unscheduleAllCallbacks(),e.move&&e.move.setRotate(!1),this.game.taskUI.updateTaskData(1,this.foeType+1),e.foeType==a.spring&&(e.ballSpr.node.active=!1,e.body.linearVelocity=cc.v2(0,0)),e.foeType==a.slide&&(e.ballSpr.node.active=!1,e.body.linearVelocity=cc.v2(0,0)),e.foeType==a.leap&&(e.body.linearVelocity=cc.v2(0,0)),e.foeType==a.ring&&(e.ballSpr.node.active=!1,e.node.controlBall&&(e.game.ball.ringSpeedUp=!1),e.ringShootCd=!0,e.body.linearVelocity=cc.v2(0,0)),e.foeType==a.machineBox)return e.foeMng.despawnFoe(e),e.game.BattleGameUI.getMachineBox(e),void e.game.BattleGameUI.setIsGetMachineBox(!0);var i=1;switch(t){case 1:i=.1;break;case 2:i=.15;break;case 3:i=.5}e.scheduleOnce(function(){e.node.rotation=0},0),e.deathDuration=e.getComponent(cc.Animation).getAnimationState("foe_death").clip.duration,e.getComponent(cc.Animation).play("foe_death"),this.deathAudio&&s.playSound(this.deathAudio),e.scheduleOnce(function(){e.move&&e.move.setSwitch(!1),e.foeMng.despawnFoe(e)},e.deathDuration),e.addCoin(i)}},reset:function(){var t=this;t.isdeath||(t.isdeath=!0,t.unscheduleAllCallbacks(),t.scheduleOnce(function(){t.foeMng.despawnFoe(t)},0))},deathUnlessControl:function(){this.node.controlBall||this.death()},flyAndDeath:function(t,e){var i=this;if(!i.isdeath){i.fly=!0;var a=i.game.ball.node.position,s=(i.node.position,t||200),o=cc.v2(0,0);o=a.x<i.node.x?cc.v2(s,s*r.getRandomRate(.7,1.3)):cc.v2(-s,s*r.getRandomRate(.7,1.3));var n=cc.moveBy(.3,o),c=cc.callFunc(function(){i.death(e),i.game.BattleGameUI.addPower(this.power)},i);i.node.runAction(cc.sequence(n,c))}},checkCollider:function(t,e,i){if("sp_foe"==e.node.group&&"sp_foe"==i.node.group&&(t.disabled=!0),"foe"==e.node.group&&"sp_foe"==i.node.group&&1==i.node.controlBall&&("ring"==i.node.tag?this.flyAndDeath(200,2):"spring"==i.node.tag?this.death(3):this.death(),t.disabled=!0),"sp_foe"==i.node.group&&1==i.node.controlBall)return i.node.priority>=this.node.priority?void("ring"==i.node.tag&&"ring"!=e.node.tag?this.flyAndDeath(200,2):(this.death(),this.game.BattleGameUI.addPower(this.power))):void(t.disabled=!0)}});e.exports=o,cc._RF.pop()},{AudioPlayer:"AudioPlayer",Types:"Types",UserDataStorage:"UserDataStorage",Utils:"Utils"}],Foe_box:[function(t,e,i){"use strict";cc._RF.push(e,"79ec4bmJOlBPozl7inOE+C4","Foe_box");var a=t("Foe_base"),f=t("Types").BallState;t("Move");cc.Class({extends:a,properties:{boxSpr:cc.Sprite,fiveStarSpr:cc.Sprite,speedLowest:600},start:function(){},onBeginContact:function(t,e,i){if(this.isdeath||this.fly)t.disabled=!0;else{var a=!1;if("ball"==i.node.group&&this.game.ball.state==f.control&&(a=!0),this.checkCollider(t,e,i),"ball"==i.node.group){this.otherCollider=i;e.node;var s=i.node.getComponent("ball");if(0==s.alive)return void(t.disabled=!0);if(1==s.getBigBallShootState()||2==s.getBigBallShootState())a=t.disabled=!0;else if(s.state==f.normal){a=!0;var o=s.getStageRunDistance(),n=s.getLinearVelocity(),c=.8*Math.abs(n.y);c<this.speedLowest&&(c=this.speedLowest);var r=n.x;if(s.getBallShootState()){var h=this.game.background,l=h.getComponent("world").groundPrefab.data,d=l.getComponent(cc.PhysicsBoxCollider).size.height,u=h.node.y+l.y+d+this.node.height/2+100;this.node.y<u?t.disabled=!0:(s.stopShootAni(),s.setLinearVelocity(cc.v2(r,c)),s.injure(this.injureState))}else{var g=Number(this.game.upgradeObj[101][this.game.userData.upgrade[101]].effect),p=this.effect1*(1+parseInt(o/this.effect2)*this.effect3)-g;p<0&&(p=0),r=n.x-p,s.setLinearVelocity(cc.v2(r,c)),s.injure(this.injureState)}}}if(1==a){t.disabled=!0,this.game.BattleGameUI.addPower(this.power);var m=null;this.game.ball.state==f.control&&("ball"==i.node.group&&1==this.game.ball.getBigBallShootState()||2==this.game.ball.getBigBallShootState()?m=1:"ring"==this.game.ball.controlObj.node.tag?m=2:"spring"==this.game.ball.controlObj.node.tag&&(m=3)),this.death(m)}}},update:function(t){}}),cc._RF.pop()},{Foe_base:"Foe_base",Move:"Move",Types:"Types"}],Foe_gateway:[function(t,e,i){"use strict";cc._RF.push(e,"6c071KCXH5GFb/RPV46Ecz/","Foe_gateway");var a=t("Foe_base"),r=t("Types").BallState;cc.Class({extends:a,properties:{gateOffset:cc.v2(100,300)},start:function(){this.node.tag="gateway"},init:function(t){},onBeginContact:function(t,e,i){if("ball"==i.node.group){t.disabled=!0,this.otherCollider=i;var a=e.node,s=i.node,o=s.getComponent("ball"),n=cc.instantiate(a);n.group="default",n.setPosition(cc.p(this.node.x+this.gateOffset.x,this.node.y+this.gateOffset.y));var c=i.body.linearVelocity;o.setPosAndHide(cc.p(n.position.x,n.position.y-s.height/2)),o.ballState(r.control,this),this.node.parent.addChild(n),n.active=!1,this.scheduleOnce(function(){n.active=!0,s.active=!0,o.ballState(r.normal),i.body.linearVelocity=c},1)}},death:function(){},update:function(t){}}),cc._RF.pop()},{Foe_base:"Foe_base",Types:"Types"}],Foe_leap:[function(t,e,i){"use strict";cc._RF.push(e,"6fc5953Do9J44ab8rEcZpj4","Foe_leap");var a=t("Foe_base"),c=t("Types").BallState,r=t("AudioPlayer");cc.Class({extends:a,properties:{spr:cc.Node,contactAudio:{url:cc.AudioClip,default:null}},start:function(){var t=this.spr.getComponent("sp.Skeleton");this.spine=t;var e=this.node.getComponent(cc.RigidBody);this.body=e,this.node.tag="leap",this.ballCollider=null,this.ballSpeed=null,this.boxCollider=this.node.getComponent(cc.PhysicsBoxCollider)},onBeginContact:function(t,e,i){t.disabled=!0;var a=this;if(this.isdeath||this.fly)t.disabled=!0;else if(this.checkCollider(t,e,i),"ball"==i.node.group){var s=(this.ballCollider=i).node,o=s.getComponent("ball");if(this.ball=o,this.contactPosX=s.x,0==o.alive)return void(t.disabled=!0);if(1==o.getBigBallShootState()||2==o.getBigBallShootState())t.disabled=!0,this.death();else if(o.state==c.normal){t.disabled=!0,r.playSound(this.contactAudio),this.ballSpeed=o.getLinearVelocity(),e.body.linearVelocity=cc.v2(0,0);var n=Number(this.game.upgradeObj[103][this.game.userData.upgrade[103]].effect);this.game.ball.limitSpeedYActive=!1,this.ballCollider.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(this.ballSpeed.x+this.effect1+n,1.5*o.limitSpeedY),this.leapAni(),this.game.BattleGameUI.addPower(this.power),this.scheduleOnce(function(){o.playSmallShootAni()},0),this.scheduleOnce(function(){a.ballLeave()},.5),o.getBallShootState()&&o.stopShootAni()}}},leapAni:function(){this.spine.setAnimation(0,"animation",!1)},ballLeave:function(){this.death()},update:function(t){}}),cc._RF.pop()},{AudioPlayer:"AudioPlayer",Foe_base:"Foe_base",Types:"Types"}],Foe_machineBox:[function(t,e,i){"use strict";cc._RF.push(e,"9d354G1KG5Hh6D9XnXlKZIc","Foe_machineBox");var a=t("Foe_base"),h=t("Types").BallState;t("Move");cc.Class({extends:a,properties:{speedLowest:600},start:function(){},onBeginContact:function(t,e,i){if(this.isdeath||this.fly)t.disabled=!0;else{var a=!1;if("ball"==i.node.group&&this.game.ball.state==h.control&&(a=!0),this.checkCollider(t,e,i),"ball"==i.node.group){this.otherCollider=i;e.node;var s=i.node.getComponent("ball");if(0==s.alive)return void(t.disabled=!0);if(1==s.getBigBallShootState()||2==s.getBigBallShootState())a=t.disabled=!0;else if(s.state==h.normal){a=!0;var o=s.getStageRunDistance(),n=s.getLinearVelocity(),c=Math.abs(n.y)<this.speedLowest?this.speedLowest:Math.abs(n.y),r=n.x;s.getBallShootState()?s.stopShootAni():r=n.x-this.effect1*(1+parseInt(o/this.effect2)*this.effect3),s.setLinearVelocity(cc.v2(r,c)),s.injure(this.injureState)}}1==a&&(t.disabled=!0,this.game.BattleGameUI.addPower(this.power),this.death())}},update:function(t){}}),cc._RF.pop()},{Foe_base:"Foe_base",Move:"Move",Types:"Types"}],Foe_ring:[function(t,e,i){"use strict";cc._RF.push(e,"a91f2H8z1xCt71xpyd6ysmk","Foe_ring");var a=t("Foe_base"),h=t("Types").BallState,l=t("UserDataStorage"),s=t("AudioPlayer");cc.Class({extends:a,properties:{spr:cc.Sprite,ballSpr:cc.Sprite,tuowei1:cc.Node,tuowei2:cc.Node,targetOffsetX:0,targetPrefab:cc.Prefab,tapAudio:{url:cc.AudioClip,default:null}},start:function(){var t=this.node.getComponent(cc.RigidBody);this.body=t,this.ballSpr.node.active=!1,this.node.controlBall=!1,this.node.tag="ring",this.ballCollider=null,this.ballSpeed=null,this.hideShootAni()},speedUp:function(){var t=this;if(0!=this.ringShootCd){s.playSound(this.tapAudio),this.upCount++;this.body.linearVelocity;var e=Number(this.game.upgradeObj[106][this.game.userData.upgrade[106]].effect);this.body.linearVelocity=cc.v2(this.ballSpeed.x+(this.effect1+e)*this.upCount,0),this.ballCollider.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(this.ballSpeed.x+(this.effect1+e)*this.upCount,0),this.playShootAni(),this.game.ball.ringSpeedUp=!0,this.ringShootCd=!1,this.unschedule(this.shootAniCallFun),this.gameRIngShoot=this.scheduleOnce(function(){this.game.ball.ringSpeedUp=!1},.15),this.shootAniCallFun=this.scheduleOnce(function(){t.hideShootAni(),t.ringShootCd=!0},.3),this.node.runAction(cc.rotateBy(.3,120))}},onBeginContact:function(t,e,i){var a=this;e.node;if(this.isdeath||this.fly)t.disabled=!0;else{if(this.checkCollider(t,e,i),"ball"==i.node.group&&!this.node.controlBall){var s=(this.ballCollider=i).node,o=s.getComponent("ball");if(this.ball=o,this.contactPosX=s.x,0==o.alive||o.state==h.control)return void(t.disabled=!0);if(1==o.getBigBallShootState()||2==o.getBigBallShootState())t.disabled=!0,this.death();else if(o.state==h.normal){t.disabled=!0,this.node.controlBall=!0,this.ballSpeed=o.getLinearVelocity(),o.ballState(h.control,this),o.controlNode=this.node;var n=o.spr.spriteFrame.clone(),c=o.spr.node.rotation;this.ballSpr.node.active=!0,this.ballSpr.spriteFrame=n,this.ballSpr.node.width=this.game.ball.node.width,this.ballSpr.node.height=this.game.ball.node.height,this.ballSpr.node.rotation=c,o.spr.enabled=!1,this.upCount=0,this.showRingTarget(),e.body.linearVelocity=cc.v2(this.ballSpeed.x,0),this.ballCollider.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(this.ballSpeed.x,0),this.game.BattleGameUI.setPowerClose(!0),this.game.BattleGameUI.switchRingListen(!0,this),this.game.ball.ringstage=!0,0==this.game.userData.guide.ring&&(a.game.guideUI.showGuide("ring"),l.updateGuide("ring",!0)),this.scheduleOnce(function(){a.ballLeave()},3),o.getBallShootState()&&o.stopShootAni()}}if("bound"==i.node.group){var r=e.body.linearVelocity;e.body.linearVelocity=cc.v2(r.x,0)}}},showRingTarget:function(){var t=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),e=this.game.Camera.node.position,i=cc.p(t.x-e.x,t.y-e.y),a=cc.instantiate(this.targetPrefab);a.setPosition(i),this.targetNode=a,this.game.BattleGameUI.node.addChild(a),a.scale=.3;var s=cc.moveTo(.3,cc.p(this.targetOffsetX,i.y));a.getComponent(cc.Animation).play("ringTargetLoop"),a.runAction(s)},ballLeave:function(t){if(this.node.controlBall){var e=this;this.game.ball.ringSpeedUp=!1;var i=this.body.linearVelocity;this.node.controlBall=!1,this.game.ball.spr.enabled=!0;var a=i.x,s=this.game.ball.limitSpeedY/2,o=Number(this.game.upgradeObj[106][this.game.userData.upgrade[106]].effect);if(t){a=i.x+5*(this.effect1+o),s=this.game.ball.limitSpeedY;var n=this.targetNode.getComponent(cc.Animation).getAnimationState("revive").clip.duration;this.targetNode.scale=1,this.targetNode.getComponent(cc.Animation).play("revive"),this.targetNode.parent=this.game.root.node.getChildByName("aniLayer"),this.targetNode.x=this.game.ball.node.x,this.scheduleOnce(function(){e.targetNode.removeFromParent(),e.targetNode.destroy()},n)}else this.targetNode&&(this.targetNode.removeFromParent(),this.targetNode.destroy());this.ballCollider.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(a,s),this.ballCollider.node.getComponent("ball").ballState(h.normal),this.game.BattleGameUI.addPower(this.power),this.game.ball.ringstage=!1,this.hideShootAni(),this.death(),this.game.BattleGameUI.switchRingListen(!1,this),this.game.BattleGameUI.setRingClose(!0),this.unschedule(this.powerCallFun),this.powerCallFun=this.scheduleOnce(function(){this.game.BattleGameUI.setRingClose(!1),this.game.BattleGameUI.setPowerClose(!1)},.5)}},playShootAni:function(){this.tuowei1.active=!0,this.tuowei2.active=!0},hideShootAni:function(){this.tuowei1.active=!1,this.tuowei2.active=!1},update:function(t){(this.tuowei1.rotation=-this.node.rotation,this.tuowei2.rotation=-this.node.rotation,this.node.controlBall)&&(this.ballCollider.node.position=cc.p(this.node.position.x,this.node.position.y),this.node.convertToWorldSpaceAR(cc.Vec2.ZERO).x-this.game.Camera.node.x>=this.targetOffsetX&&this.ballLeave(!0))}}),cc._RF.pop()},{AudioPlayer:"AudioPlayer",Foe_base:"Foe_base",Types:"Types",UserDataStorage:"UserDataStorage"}],Foe_slide:[function(t,e,i){"use strict";cc._RF.push(e,"6539ciNJgBGMJG0zVOrn11m","Foe_slide");var a=t("Foe_base"),r=t("Types").BallState,h=t("AudioPlayer");cc.Class({extends:a,properties:{ballSpr:cc.Sprite,tuoweiNode:cc.Node,contactAudio:{url:cc.AudioClip,default:null}},start:function(){var t=this.node.getComponent(cc.RigidBody);this.body=t,this.ballSpr.node.active=!1,this.node.controlBall=!1,this.node.tag="slide",this.ballCollider=null,this.ballSpeed=null,this.boxCollider=this.node.getComponent(cc.PhysicsBoxCollider),this.circleCollider=this.node.getComponent(cc.PhysicsCircleCollider),this.circleCollider.enabled=!1,this.tuoweiNode.active=!1},onBeginContact:function(t,e,i){if(t.disabled=!0,this.isdeath||this.fly)t.disabled=!0;else{this.checkCollider(t,e,i);e.node;if("ball"==i.node.group&&!this.node.controlBall){var a=(this.ballCollider=i).node,s=a.getComponent("ball");if(this.ball=s,this.contactPosX=a.x,0==s.alive||s.state==r.control)return void(t.disabled=!0);if(1==s.getBigBallShootState()||2==s.getBigBallShootState())t.disabled=!0,this.death();else if(s.state==r.normal){t.disabled=!0,h.playSound(this.contactAudio),this.node.controlBall=!0,this.ballSpeed=s.getLinearVelocity(),s.ballState(r.control,this);var o=s.spr.spriteFrame.clone(),n=s.spr.node.rotation;this.ballSpr.node.active=!0,this.ballSpr.spriteFrame=o,this.ballSpr.node.width=this.game.ball.node.width,this.ballSpr.node.height=this.game.ball.node.height,this.ballSpr.node.rotation=n,this.circleCollider.enabled=!0,this.tuoweiNode.active=!0,s.spr.enabled=!1;var c=Number(this.game.upgradeObj[104][this.game.userData.upgrade[104]].effect);this.ballSpeed=cc.v2(this.ballSpeed.x+this.effect1+c,this.ballSpeed.y),e.body.linearVelocity=cc.v2(this.ballSpeed.x,0),this.ballCollider.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(this.ballSpeed.x,0),this.game.BattleGameUI.setPowerClose(!0),this.scheduleOnce(this.ballLeave,1),s.getBallShootState()&&s.stopShootAni()}}}},ballLeave:function(){if(this.node.controlBall){var t=this.ballSpeed;this.node.controlBall=!1,this.ball.spr.enabled=!0,this.ballCollider.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(t.x,0),this.ballCollider.node.getComponent("ball").ballState(r.normal),this.circleCollider.enabled=!1,this.game.BattleGameUI.addPower(this.power),this.tuoweiNode.active=!1,this.death(),this.game.BattleGameUI.setPowerClose(!1)}},update:function(t){this.node.controlBall&&(this.ballSpr.node.rotation+=3,this.ballCollider.node.position=cc.p(this.node.position.x,this.node.position.y+this.node.height/2+this.ballCollider.node.height/2),0!=this.body.linearVelocity.x&&0!=this.body.linearVelocity.y&&this.ball.setLinearVelocity(this.body.linearVelocity))}}),cc._RF.pop()},{AudioPlayer:"AudioPlayer",Foe_base:"Foe_base",Types:"Types"}],Foe_spring:[function(t,e,i){"use strict";cc._RF.push(e,"5701cyuTpVEeIKNf8Vyulpm","Foe_spring");var a=t("Foe_base"),l=t("Types").BallState,d=t("UserDataStorage"),u=t("AudioPlayer");cc.Class({extends:a,properties:{fixSpeedY:300,crashLimit:{default:3,tooltip:"球粘粘后最大碰撞次数"},ballSpr:cc.Sprite,spr:cc.Sprite,contactAudio:{url:cc.AudioClip,default:null}},start:function(){var i=this,t=this.node.getComponent(cc.RigidBody);this.body=t,this.ballSpr.node.active=!1,this.node.controlBall=!1,this.node.tag="spring",this.initHeight=this.node.height,this.crashCount=0,this.ballCollider=null,this.ballSpeed=null,this.touchEvent=!1,this.superJump=!1,this.boxCollider=this.node.getComponent(cc.PhysicsBoxCollider),this.circleCollider=this.node.getComponent(cc.PhysicsCircleCollider),this.circleCollider.enabled=!1,this.initSprFrame=this.spr.spriteFrame;cc.loader.load(cc.url.raw("resources/FoeSkin/role_enemy_9.png"),function(t,e){t?cc.error("load img error:"+t):(cc.log("load img success"),i.superJumpSprFrame=new cc.SpriteFrame(e))})},setSuperJump:function(t){this.superJump=t},onBeginContact:function(t,a,e){var s=this;if(s.isdeath||s.fly)t.disabled=!0;else{this.checkCollider(t,a,e);var o=a.node;if("ball"==e.node.group){var i=(s.ballCollider=e).node.getComponent("ball");if(0==(s.ball=i).alive||i.state==l.control)return void(t.disabled=!0);if(1==i.getBigBallShootState()||2==i.getBigBallShootState())t.disabled=!0,s.death();else if(i.state==l.normal){t.disabled=!0,s.node.controlBall=!0,s.ballSpeed=i.getLinearVelocity(),i.ballState(l.control,this);var n=i.spr.spriteFrame.clone(),c=i.spr.node.rotation;s.ballSpr.node.active=!0,s.ballSpr.spriteFrame=n,s.ballSpr.node.width=s.game.ball.node.width,s.ballSpr.node.height=s.game.ball.node.height,s.ballSpr.node.rotation=c,s.circleCollider.enabled=!0,i.spr.enabled=!1,s.crashCount=0,a.body.linearVelocity=cc.v2(s.ballSpeed.x,0),s.game.BattleGameUI.setPowerClose(!0),0==this.game.userData.guide.spring&&(s.game.guideUI.showGuide("spring"),d.updateGuide("spring",!0)),i.getBallShootState()&&i.stopShootAni()}}if(s.node.controlBall&&"bound"==e.node.group){var r=a.node.getComponent(cc.RigidBody).linearVelocity;0!=r.x&&0!=r.y&&(s.selfSpeed=r),u.playSound(this.contactAudio),a.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),o.height=.6*s.initHeight;var h=s.superJump;s.setSuperJump(!1),this.game.cameraShake(),s.scheduleOnce(function(){o.height=s.initHeight,s.game.cameraShake(),s.crashCount++;var t=0,e=0,i=Number(this.game.upgradeObj[105][this.game.userData.upgrade[105]].effect);h?(t=s.selfSpeed.x+s.effect1*(1+i),e=1.5*s.fixSpeedY):(t=s.selfSpeed.x+s.effect2*(1+i),e=s.fixSpeedY),s.jumpSpeed=cc.v2(t,e),a.node.getComponent(cc.RigidBody).linearVelocity=s.jumpSpeed,s.ballCollider.node.getComponent(cc.RigidBody).linearVelocity=s.jumpSpeed,s.crashCount>=s.crashLimit&&s.scheduleOnce(s.ballLeave,.2)},.15)}}},ballLeave:function(){var t=this;t.node.controlBall=!1,t.game.ball.spr.enabled=!0,t.ballCollider.node.getComponent(cc.RigidBody).linearVelocity=cc.v2(t.jumpSpeed.x,t.jumpSpeed.y),t.ballCollider.node.getComponent("ball").ballState(l.normal),t.circleCollider.enabled=!1,t.death(),t.game.BattleGameUI.addPower(t.power),t.game.BattleGameUI.switchSpringListen(!1,this),t.game.BattleGameUI.setPowerClose(!1),console.log("球脱离弹簧")},update:function(t){this.node.controlBall&&this.body.linearVelocity.y<0&&this.node.y- -cc.winSize.height/2-65<300?(this.game.BattleGameUI.switchSpringListen(!0,this),this.spr.spriteFrame!=this.superJumpSprFrame&&(this.spr.spriteFrame=this.superJumpSprFrame)):this.node.controlBall&&(this.game.BattleGameUI.switchSpringListen(!1,this),this.spr.spriteFrame!=this.initSprFrame&&(this.spr.spriteFrame=this.initSprFrame)),this.node.controlBall&&(this.ballSpr.node.rotation+=3,this.ballCollider.node.position=cc.p(this.node.position.x,this.node.position.y+this.node.height+this.ballCollider.node.height/2),0!=this.body.linearVelocity.x&&0!=this.body.linearVelocity.y&&this.ball.setLinearVelocity(this.body.linearVelocity))}}),cc._RF.pop()},{AudioPlayer:"AudioPlayer",Foe_base:"Foe_base",Types:"Types",UserDataStorage:"UserDataStorage"}],Foe_triangle:[function(t,e,i){"use strict";cc._RF.push(e,"94346HiHWNDS64MJeMmT6Ac","Foe_triangle");var a=t("Foe_base"),f=t("Types").BallState;cc.Class({extends:a,properties:{speedLowest:800,rate:{default:.1,tooltip:"碰撞效果系数"}},start:function(){},onBeginContact:function(t,e,i){if(this.isdeath||this.fly)t.disabled=!0;else{var a=!1;if("ball"==i.node.group&&this.game.ball.state==f.control&&(a=!0),this.checkCollider(t,e,i),"ball"==i.node.group){var s=(this.otherCollider=i).node.getComponent("ball");if(0==s.alive)return void(t.disabled=!0);if(1==s.getBigBallShootState()||2==s.getBigBallShootState())a=t.disabled=!0;else if(s.state==f.normal){a=!0;var o=s.getStageRunDistance(),n=s.getLinearVelocity();this.game.BattleGameUI.speedDown();var c=.8*Math.abs(n.y);c<this.speedLowest&&(c=this.speedLowest);var r=n.x;if(s.getBallShootState()){var h=this.game.background,l=h.getComponent("world").groundPrefab.data,d=l.getComponent(cc.PhysicsBoxCollider).size.height,u=h.node.y+l.y+d+this.node.height/2+100;this.node.y<u?t.disabled=!0:(s.stopShootAni(),s.setLinearVelocity(cc.v2(r,c)),s.injure(this.injureState))}else{var g=Number(this.game.upgradeObj[102][this.game.userData.upgrade[102]].effect),p=this.effect1*(1+parseInt(o/this.effect2)*this.effect3)-g;p<0&&(p=0),r=n.x-p,s.setLinearVelocity(cc.v2(r,c)),s.injure(this.injureState)}}}if(1==a){t.disabled=!0,this.game.BattleGameUI.addPower(this.power);var m=null;this.game.ball.state==f.control&&("ball"==i.node.group&&1==this.game.ball.getBigBallShootState()||2==this.game.ball.getBigBallShootState()?m=1:"ring"==this.game.ball.controlObj.node.tag?m=2:"spring"==this.game.ball.controlObj.node.tag&&(m=3)),this.death(m)}}},update:function(t){}}),cc._RF.pop()},{Foe_base:"Foe_base",Types:"Types"}],GameOverLogic:[function(t,e,i){"use strict";cc._RF.push(e,"74e0cHLGD9HDIRAME+xtAvp","GameOverLogic");var a=t("UserDataStorage"),s=t("AudioPlayer"),o=t("ADUtils");cc.Class({extends:cc.Component,properties:{TxtContinue:cc.Label,TxtRecord:cc.Label,SprNewRecord:cc.Sprite,TxtOverRank:cc.Label,OverCoinNode:cc.Node,TxtOverCoin:cc.Label,NodeDoubleCoin:cc.Node,TaskBg:cc.Sprite,TaskItemPrefab:cc.Prefab,ListNode:cc.Node,BtnAgain:cc.Button,BtnAD:cc.Button,TxtTip:cc.Label,TipShowTime:2,BtnAudio:{url:cc.AudioClip,default:null},WinAudio:{url:cc.AudioClip,default:null},LoseAudio:{url:cc.AudioClip,default:null}},onLoad:function(){this.recordInitPos=this.TxtRecord.node.position},init:function(t){this.game=t},start:function(){},onEnable:function(){s.stopBgMusic(),cc.sys.isNative&&this.game.userData.playTime%5==0&&showPageAds("Gameover","1"),this.NodeDoubleCoin.active=!1,this.switchCloseBtn(!1),this.userData=this.game.userData;var t=parseInt(this.game.ball.getStageRunDistance());t>this.game.BattleGameUI.maxDistance&&(t=this.game.BattleGameUI.maxDistance),this.uiShow(!1),this.setRecord(t),this.updateCoin(),this.setCoin(this.game.BattleGameUI.getCoin),this.resetI18nTxt()},uiShow:function(t){this.OverCoinNode.active=t,this.ListNode.active=t,this.BtnAD.node.active=t,this.TaskBg.node.active=t},resetI18nTxt:function(){this.TxtContinue.string=this.game.i18n.t("tapToContinue")},switchCloseBtn:function(t){this.BtnAgain.interactable=t,this.TxtTip.node.active=t},checkMachineBox:function(){var t=this;1==this.game.BattleGameUI.getIsGetMachineBox()?this.game.showGameOverMachine(function(){t.checkTaskStage()}):t.checkTaskStage()},checkTaskStage:function(){var t=this,e=this.game.taskUI.awardAndResetTask();this.taskCompleteList=e,this.completeID=0,this.taskCompleteLength=e.length,0<e.length?(this.singleTaskAni(e[this.completeID++]),this.BtnAD.node.active=!1):this.scheduleOnce(function(){t.switchCloseBtn(!0)},this.TipShowTime)},singleTaskAni:function(s){var o=this,t=function(a){if(a==s.id){var t=cc.callFunc(function(){o.showTaskList[a].removeFromParent()},o),e=cc.callFunc(function(){var t=Number(o.game.taskObj[s.id].reward),e=cc.v2(180,180),i=cc.p(0,0);o.completeID<=o.taskCompleteLength-1?o.game.lotteryUI.extractLotteryAndFunc(t,!1,e,i,function(){o.singleTaskAni(o.taskCompleteList[o.completeID++]);var t=cc.spawn(cc.moveBy(1,cc.v2(-200,0)),cc.fadeOut(1));o.showTaskList[a].runAction(t),delete o.showTaskList[a]}):o.game.lotteryUI.extractLotteryAndFunc([t],!1,e,i,function(){var t=cc.spawn(cc.moveBy(1,cc.v2(-200,0)),cc.fadeOut(1));o.showTaskList[a].runAction(t),delete o.showTaskList[a],o.BtnAD.node.active=!0,o.scheduleOnce(function(){o.switchCloseBtn(!0)},o.TipShowTime)})},o);o.showTaskList[a].runAction(cc.sequence(cc.callFunc(function(){o.showTaskList[a].getComponent("TaskItem").taskFinish()}),cc.delayTime(1),e),t)}};for(var e in o.showTaskList)t(e)},sortTaskList:function(t){var e=0;for(var i in this.showTaskList){var a=this.showTaskList[i];a.runAction(cc.sequence(cc.delayTime(t),cc.moveTo(t,cc.v2(0,-a.height/2-a.height*e)))),e++}},updateCoin:function(){this.game.addCoin(this.game.BattleGameUI.getCoin)},taskShow:function(){var t=this.game.taskObj,e=this.game.userData.task;this.showTaskList={},this.ListNode.removeAllChildren();var i=0;for(var a in e)if("length"!=a&&"remove"!=a){var s=e[a],o=e[a].id,n=t[o],c=s.num,r=s.count,h=cc.instantiate(this.TaskItemPrefab);h.task=n,(this.showTaskList[o]=h).setPosition(cc.v2(0,-h.height/2-h.height*i)),this.ListNode.addChild(h);var l=h.getComponent("TaskItem");l.setIcon(n.taskicon);var d=Number(n.tasktype),u=Number(n.target),g=Number(n.limit),p=this.game.taskUI.getTaskDes(d,u,g,r)+" ("+c+"/"+r+")";l.setDescriptive(p),l.setRewardCount(n.reward),l.lineActive(!1),i++}},applyItem:function(t){for(var e=0;e<t;e++){var i=cc.instantiate(this.TaskItemPrefab);i.setPosition(cc.v2(0,-i.height/2-i.height*e)),this.Task.addChild(i)}},setRecord:function(t){var e=!1;this.userData.bestScore<t?(s.playSound(this.WinAudio),e=!0,a.updateBestScore(t),this.game.skillUpUI.checkSkinTarget(1),cc.sys.isNative&&trackEvent_2("LengthRange",String(Math.ceil(t/500)))):(s.playSound(this.LoseAudio),a.updateBestScoreHoldCount(this.game.userData.bestScoreHoldCount+1),this.SprNewRecord.node.active=!1),cc.sys.isNative&&trackEvent_2("LengthCount",String(Math.ceil(t/500))),this.rollRecord(1.2,t,e)},rollRecord:function(t,e,i){var a=this;this.TxtRecord.string="0M",this.recordTarget=e,this.startRoll=!0,this.startTime=0,this.targetTime=t,this.TxtRecord.node.y=0,this.TxtRecord.node.scale=1,this.SprNewRecord.node.active=!1;var s=cc.moveTo(.5,this.recordInitPos.x,this.recordInitPos.y),o=cc.scaleTo(.5,.5),n=cc.callFunc(function(){a.recordAniFinish()},this);if(i){var c=cc.callFunc(function(){a.SprNewRecord.node.active=!0,a.newRecordAct()},this);this.TxtRecord.node.runAction(cc.sequence(cc.delayTime(t),cc.delayTime(.5),c,cc.delayTime(.65),cc.spawn(s,o),n))}else this.TxtRecord.node.runAction(cc.sequence(cc.delayTime(t),cc.delayTime(.5),cc.spawn(s,o),n))},newRecordAct:function(){this.SprNewRecord.node.active=!0,this.SprNewRecord.node.x=this.TxtRecord.node.width/2,this.SprNewRecord.node.y=this.TxtRecord.node.height/3,this.SprNewRecord.node.scale=2;var t=cc.scaleTo(.15,1);this.SprNewRecord.node.runAction(t)},recordAniFinish:function(){var t=this;this.BtnAD.node.active=!0,this.BtnAD.interactable=!0,this.game.readyUI.TaskActive?(this.ListNode.active=!0,this.taskShow(),this.checkTaskStage()):(this.ListNode.active=!1,this.scheduleOnce(function(){t.switchCloseBtn(!0)},2)),this.uiShow(!0)},setCoin:function(t){this.TxtOverCoin.string=t},again:function(){console.log("again"),this.game.goToReady()},ad:function(){var t=this;if(console.log("ad"),s.playSound(this.BtnAudio),this.BtnAD.interactable=!1,cc.sys.isNative){var e=trackVideoAdsState("Doublegold","4");console.log("state:"+e),0==e?o.showVideoAD("Doublegold","4",t):1==e?o.loadAndShowVideoAD("Doublegold","4",t):2==e?Tip.show(t.game.i18n.t("netError"),.5):3==e&&Tip.show(t.game.i18n.t("otherError"),.5)}else t.adFinish()},adFinish:function(){var t=this;this.game.watchAd(),this.updateCoin(),this.NodeDoubleCoin.active=!0,this.NodeDoubleCoin.scale=2;var e=cc.scaleTo(.25,1),i=cc.callFunc(function(){t.setCoin(2*t.game.BattleGameUI.getCoin)});this.NodeDoubleCoin.runAction(cc.sequence(e,i)),t.switchCloseBtn(!0)},update:function(t){1==this.startRoll&&(this.startTime+=t,this.startTime>=this.targetTime&&(this.startRoll=!1,this.startTime=this.targetTime),this.TxtRecord.string=parseInt(this.startTime/this.targetTime*this.recordTarget)+"M")}}),cc._RF.pop()},{ADUtils:"ADUtils",AudioPlayer:"AudioPlayer",UserDataStorage:"UserDataStorage"}],GameOverMachineLogic:[function(t,e,i){"use strict";cc._RF.push(e,"c463an8GyxAk4rZtNugE++6","GameOverMachineLogic");var a=t("Utils"),s=(t("UserDataStorage"),t("ADUtils"));cc.Class({extends:cc.Component,properties:{TxtTitle:cc.Label,TxtTip:cc.Label,machineIcon:cc.Node,adapterNode:cc.Node},onLoad:function(){},init:function(t){this.game=t},start:function(){},onEnable:function(){this.resetI18nTxt()},resetI18nTxt:function(){this.TxtTitle.string=this.game.i18n.t("machineUITitle"),this.TxtTip.string=this.game.i18n.t("machineAdOpen")},openMachine:function(t){var e=cc.v2(180,180),i=this.machineIcon.position;this.game.lotteryUI.extractLotteryAndFunc(t,!0,e,i,this.callFunc)},ad:function(){var t=this;if(console.log("ad"),cc.sys.isNative){var e=trackVideoAdsState("Getrewards","2");console.log("state:"+e),0==e?s.showVideoAD("Getrewards","2",t):1==e?s.loadAndShowVideoAD("Getrewards","2",t):2==e?Tip.show(t.game.i18n.t("netError"),.5):3==e&&Tip.show(t.game.i18n.t("otherError"),.5)}else t.adFinish()},adFinish:function(){this.openMachine(4),this.game.watchAd(),this.fadeClose()},show:function(t){this.node.active=!0,this.node.opacity=255,a.layerOpenTransition(this.adapterNode),this.callFunc=t},close:function(){this.node.active=!1,this.callFunc&&this.callFunc()},fadeClose:function(){var t=this,e=cc.callFunc(function(){t.node.active=!1});this.node.runAction(cc.sequence(cc.fadeOut(.5),e))},update:function(t){}}),cc._RF.pop()},{ADUtils:"ADUtils",UserDataStorage:"UserDataStorage",Utils:"Utils"}],GameUI:[function(t,e,i){"use strict";cc._RF.push(e,"adfdbaSQQdPhrky6klPSXUX","GameUI"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.x=cc.winSize.width/2,this.node.y=cc.winSize.height/2,this.node.width=cc.winSize.width,this.node.height=cc.winSize.height},start:function(){}}),cc._RF.pop()},{}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"134demS9wVLY6OZJHWVACGE","Game");var a=t("Types").GameState,s=t("UserDataStorage"),d=t("Utils"),o=t("LanguageData"),n=t("AudioPlayer"),c=t("ADUtils");cc.Class({extends:cc.Component,properties:{ball:cc.Node,foeMng:cc.Node,poolMng:cc.Node,changeBg:cc.Sprite,background:cc.Node,foeGroup:cc.Node,GameUIAni:cc.Animation,LogoUI:cc.Node,ReadyUI:cc.Node,BattleGameUI:cc.Node,GameOverUI:cc.Node,SettingUI:cc.Node,SkillUpUI:cc.Node,TaskUI:cc.Node,MachineUI:cc.Node,GameOverMachineUI:cc.Node,LotteryUI:cc.Node,Camera:cc.Node,root:cc.Animation,transitionBg:cc.Node,GuideUI:cc.Node,Canvas:cc.Node,GameUI:cc.Node,LoadingUI:cc.Node,BtnAudio:{url:cc.AudioClip,default:null},ReadyBgAudio:{url:cc.AudioClip,default:null},BattleBgAudio:[cc.AudioClip]},onLoad:function(){if(this.UserDataStorage=s,this.UserDataStorage.init(),this.userData=s.UserData,this.userData.currentLanguage)o.init(this.userData.currentLanguage);else{var t=cc.sys.language;t==cc.sys.LANGUAGE_CHINESE?(o.init("zh_tw"),s.updateLanguage("zh_tw")):(cc.sys.LANGUAGE_ENGLISH,o.init("en"),s.updateLanguage("en"))}this.i18n=o,this.isPause=!1,this.showLogo=!0,this.ball=this.ball.getComponent("ball"),this.ball.init(this),this.foeMng=this.foeMng.getComponent("FoeMng"),this.foeMng.init(this),this.poolMng=this.poolMng.getComponent("PoolMng"),this.poolMng.init(),this.background=this.background.getComponent("world"),this.Camera=this.Camera.getComponent("camera-control"),this.Camera.init(this),c.init(this),this.resetChangeBgSize(cc.winSize.width,cc.winSize.height),this.changeBgColor(),this.setGameState(a.Logo),this.loadSuccesslistener=null,this.loadFaildlistener=null,this.closeSuccesslistener=null,this.closeFaildlistener=null,cc.sys.isNative&&removeSplash(),cc.sys.isNative&&0==this.userData.playTime&&trackEvent_2("Action",String("1"))},start:function(){this.logoUI=this.LogoUI.getComponent("LogoGameLogic"),this.logoUI.init(this),this.readyUI=this.ReadyUI.getComponent("ReadyGameLogic"),this.readyUI.init(this),this.BattleGameUI=this.BattleGameUI.getComponent("BattleGameLogic"),this.BattleGameUI.init(this),this.GameOverUI=this.GameOverUI.getComponent("GameOverLogic"),this.GameOverUI.init(this),this.settingUI=this.SettingUI.getComponent("SettingLogic"),this.settingUI.init(this),this.skillUpUI=this.SkillUpUI.getComponent("SkillUpLogic"),this.skillUpUI.init(this),this.taskUI=this.TaskUI.getComponent("TaskLogic"),this.taskUI.init(this),this.machineUI=this.MachineUI.getComponent("MachineLogic"),this.machineUI.init(this),this.gameOverMachineUI=this.GameOverMachineUI.getComponent("GameOverMachineLogic"),this.gameOverMachineUI.init(this),this.lotteryUI=this.LotteryUI.getComponent("LotteryLogic"),this.lotteryUI.init(this),this.guideUI=this.GuideUI.getComponent("GuideLogic"),this.guideUI.init(this),0==this.showLogo?this.goToReady():this.goToLogo(),this.loadConfig()},loadConfig:function(){this.showLoading(),this.maxCofingCount=7,this.loadConfigCount=0,this.loadUpgradeConfig(),this.loadSkinConfig(),this.loadTaskConfig(),this.loadMachineConfig(),this.loadLotteryConfig(),this.loadStageConfig(),this.loadGroupConfig()},loadFinishCheck:function(){this.loadConfigCount++,this.loadConfigCount>=this.maxCofingCount&&this.hideLoading()},loadUpgradeConfig:function(){var i=this;cc.loader.load(cc.url.raw("resources/GameJson/Upgrade.json"),function(t,e){t?cc.log(t):(i.loadFinishCheck(),i.upgradeObj=i.trimUpgradeData(e),i.ball.resetInitImpulse(),i.skillUpUI.initSkill(),i.readyUI.checkRedPoint())})},trimUpgradeData:function(t){var e=d.deepClone(t),i={};for(var a in e)if(e.hasOwnProperty(a)){var s=e[a];i[s.type]||(i[s.type]={},i[s.type].length=0),null!=s.type&&(i[s.type][s.lv]=s,i[s.type].length++)}return i},loadSkinConfig:function(){var i=this;cc.loader.load(cc.url.raw("resources/GameJson/Skin.json"),function(t,e){t?cc.log(t):(i.loadFinishCheck(),i.skinObj=i.trimSkinData(e),i.skillUpUI.initSkin(),i.ball.resetSkin())})},trimSkinData:function(t){var e=d.deepClone(t),i={};for(var a in i.length=e.length,e){var s=e[a];null!=s.id&&(i[s.id]=s)}return i},loadTaskConfig:function(){var i=this;cc.loader.load(cc.url.raw("resources/GameJson/Task.json"),function(t,e){t?cc.log(t):(i.loadFinishCheck(),i.taskObj=i.trimTaskData(e),i.taskUI&&i.taskUI.resetData())})},trimTaskData:function(t){var e=d.deepClone(t),i={};for(var a in i.length=e.length,e){var s=e[a];null!=s.id&&(i[s.id]=s)}return i},loadMachineConfig:function(){var i=this;cc.loader.load(cc.url.raw("resources/GameJson/Machine.json"),function(t,e){t?cc.log(t):(i.loadFinishCheck(),i.machineObj=i.trimMachineData(e))})},trimMachineData:function(t){var e=d.deepClone(t),i={};for(var a in i.length=e.length,e){var s=e[a],o={};o.id=s.id,o.lv=s.LV,o.LVUP=s.LVUP,o.chance={};for(var n=String(s.chance).split("|"),c=0;c<n.length;c++){var r=n[c],h=String(r).split(",");o.chance[c]={},o.chance[c].lotteryId=Number(h[0]),o.chance[c].weight=Number(h[1])}null!=s.id&&(i[s.id]=o)}return i},loadLotteryConfig:function(){var i=this;cc.loader.load(cc.url.raw("resources/GameJson/Lottery.json"),function(t,e){t?cc.log(t):(i.loadFinishCheck(),i.lotteryObj=i.trimLotteryData(e))})},trimLotteryData:function(t){var e=d.deepClone(t),i={};for(var a in i.length=e.length,e){var s=e[a];null!=s.id&&(i[s.id]=s)}return i},loadStageConfig:function(){var i=this;cc.loader.load(cc.url.raw("resources/GameJson/Stage.json"),function(t,e){t?cc.log(t):(i.loadFinishCheck(),i.stageObj=i.trimStageData(e))})},trimStageData:function(t){var e=d.deepClone(t),i={};for(var a in i.length=e.length,e){var s=e[a];if(null!=s.id){var o={},n=String(s.Distance).split(",");o.minDistance=Number(n[0]),o.maxDistance=Number(n[1]),o.boss={};for(var c=String(s.bossID).split("|"),r=0;r<c.length;r++){var h=c[r],l=String(h).split(",");o.boss[r]={},o.boss[r].bossID=Number(l[0]),o.boss[r].weight=Number(l[1])}o.name=s.name,i[s.id]=o}}return i},loadGroupConfig:function(){var i=this;cc.loader.load(cc.url.raw("resources/GameJson/Group.json"),function(t,e){t?cc.log(t):(i.loadFinishCheck(),i.groupObj=i.trimGroupData(e))})},trimGroupData:function(t){var e=d.deepClone(t),i={};for(var a in e)if(e.hasOwnProperty(a)){var s=e[a],o={};o.id=s.id,o.groupList={};for(var n=String(s.group).split("|"),c=0;c<n.length;c++){var r=n[c],h=String(r).split(",");o.groupList[c]={},o.groupList[c].id=Number(h[0]),o.groupList[c].offset=cc.p(Number(h[1]),Number(h[2]))}var l=String(s.speed).split(",");o.minSpeed=Number(l[0])/1e3,o.maxSpeed=Number(l[1])/1e3,i[s.id]=o}return i},resetChangeBgSize:function(t,e){this.changeBg.node.x=t/2,this.changeBg.node.y=e/2,this.changeBg.node.width=t,this.changeBg.node.height=e},changeBgColor:function(t){var e=10;t&&(e=t);var i=cc.sequence(cc.tintTo(e,0,159,217),cc.tintTo(10,92,40,189),cc.tintTo(10,199,217,0),cc.tintTo(10,187,20,209),cc.tintTo(10,90,219,0),cc.tintTo(10,201,20,58)).repeatForever();this.changeBg.node.runAction(i)},stopBgColorAndBlack:function(t){this.changeBg.node.stopAllActions(),this.changeBg.node.runAction(cc.tintTo(t,0,0,0))},changeBgColorAndWhite:function(){var t=this;this.changeBg.node.stopAllActions();var e=cc.callFunc(function(){t.BattleGameUI.enterBossStage?t.changeBg.node.runAction(cc.tintTo(1,0,0,0)):t.changeBgColor(1)}),i=cc.sequence(cc.tintTo(.5,255,255,255),e);this.changeBg.node.runAction(i)},discoColor:function(){this.changeBg.node.stopAllActions();var t=this,e=[cc.color(0,159,217),cc.color(92,40,189),cc.color(199,217,0),cc.color(187,20,209),cc.color(90,219,0),cc.color(201,20,58)],i=0,a=cc.callFunc(function(){t.changeBg.node.color=e[i],e.length-1<=++i&&(i=0)}),s=cc.repeat(cc.sequence(a,cc.delayTime(.2)),e.length);return this.changeBg.node.runAction(s),.2*e.length},setGameState:function(t){this.gameState=t},getGameState:function(){return this.gameState},goToLogo:function(){this.logoUI.node.active=!0,this.readyUI.node.active=!0,this.BattleGameUI.node.active=!1,this.GameOverUI.node.active=!1,this.setGameState(a.Logo),this.readyUI.txtShow(!1),n.playerBgMusic(this.ReadyBgAudio)},goToReady:function(){this.logoUI.node.active=!1,this.readyUI.node.active=!0,this.BattleGameUI.node.active=!1,this.GameOverUI.node.active=!1,this.setGameState(a.Ready),this.readyUI.init(this),this.readyUI.txtShow(!0),this.readyUI.checkGuideTip(),this.upgradeObj&&this.readyUI.checkRedPoint(),this.transition(),n.playerBgMusic(this.ReadyBgAudio),this.changeBgColor()},goToStart:function(){cc.sys.isNative&&(loadAds("Gameover"),sendReportImmediately()),this.setGameState(a.Start),this.logoUI.node.active=!1,this.readyUI.node.active=!1,this.BattleGameUI.node.active=!0,this.GameOverUI.node.active=!1,this.BattleGameUI.init(this),this.BattleGameUI.resetData(),this.ball.readyHit(),this.background.resetBg(),this.foeMng.produceFoe(),this.transition(1);var t=d.randomNumBoth(0,this.BattleBgAudio.length-1);n.playerBgMusic(this.BattleBgAudio[t]),0==this.userData.playTime&&this.foeMng.fixBoxFoe()},goToGameing:function(){var t=this;this.setGameState(a.Gameing),this.BattleGameUI.checkPower(),0==this.userData.guide.smallShoot?this.BattleGameUI.setPowerClose(!0):this.BattleGameUI.showPowerBar(),this.BattleGameUI.showPowerBar(),0<this.userData.buff[2]&&this.scheduleOnce(function(){t.BattleGameUI.costBuffAct(2)},1),this.foeMng.startSpawn()},goToOver:function(){this.logoUI.node.active=!1,this.readyUI.node.active=!1,this.BattleGameUI.node.active=!1,this.GameOverUI.node.active=!0,this.GameOverUI.init(this),this.setGameState(a.Over),this.clearAllFoes(),this.transition()},showSetting:function(){n.playSound(this.BtnAudio),this.readyUI.txtShow(!1),this.settingUI.show(!1)},showSkillUp:function(){n.playSound(this.BtnAudio),this.readyUI.txtShow(!1),this.skillUpUI.show()},showMachine:function(){n.playSound(this.BtnAudio),this.readyUI.txtShow(!1),this.machineUI.show()},showTask:function(){n.playSound(this.BtnAudio),1==this.readyUI.newTask&&0==this.userData.guide.task&&(this.readyUI.newTask=!1,s.updateGuide("task",!0),this.taskUI.getNewTask()),this.readyUI.txtShow(!1),this.taskUI.show()},showGameOverMachine:function(t){this.gameOverMachineUI.show(t)},showLottery:function(t,e){this.readyUI.txtShow(!1),this.lotteryUI.show(t,e)},showLoading:function(){this.LoadingUI.active=!0},hideLoading:function(){this.LoadingUI.active=!1},watchAd:function(){s.updateMachine("upAdCount",this.userData.machine.upAdCount+1),s.updateAdCount(this.userData.watchAdCount+1),this.checkMachineLevel(),this.skillUpUI.checkSkinTarget(3)},addCoin:function(t){s.updateCoin(this.userData.coin+t),this.readyUI.checkRedPoint()},checkMachineLevel:function(){var t=this.machineObj,e=this.userData.machine.level;e>=t.length||(this.userData.machine.upAdCount>=t[e].LVUP&&(s.updateMachine("upAdCount",0),s.updateMachine("level",e+1)),this.machineUI.resetLevelData())},pause:function(t,e){this.isPause=!0,cc.director.getPhysicsManager().enabled=!1,cc.director.getScheduler().pauseTarget(this.foeMng),this.Canvas.pauseAllActions(),this.GameUI.pauseAllActions(),e||this.settingUI.show(!0)},resume:function(){this.isPause=!1,cc.director.getPhysicsManager().enabled=!0,cc.director.getScheduler().resumeTarget(this.foeMng),this.Canvas.resumeAllActions(),this.GameUI.resumeAllActions()},slow:function(){cc.director.getScheduler().setTimeScale(.5)},resumeSlow:function(){cc.director.getScheduler().setTimeScale(1)},cameraShake:function(){this.root.play("camera-shake"),this.GameUIAni.play("ui-shake")},transition:function(t){var e=t||.5;this.transitionBg.opacity=200,this.transitionBg.runAction(cc.fadeOut(e))},clearAllFoes:function(){for(var t=this.foeGroup.children,e=t.length-1;0<=e;--e){t[e].emit("reset")}},allDeathUnlessControl:function(){for(var t=this.foeGroup.children,e=t.length-1;0<=e;--e){t[e].emit("deathUnlessControl",1)}},flyAndDieAllFoes:function(){for(var t=this.foeGroup.children,e=t.length-1;0<=e;--e){t[e].emit("fly_death",1)}},update:function(t){}}),cc._RF.pop()},{ADUtils:"ADUtils",AudioPlayer:"AudioPlayer",LanguageData:"LanguageData",Types:"Types",UserDataStorage:"UserDataStorage",Utils:"Utils"}],GuideLogic:[function(t,e,i){"use strict";cc._RF.push(e,"69de1wfWU1C2KmPNvaLSmzb","GuideLogic"),cc.Class({extends:cc.Component,properties:{TxtSuperDash:cc.Label,TxtDestroy:cc.Label,TxtChange:cc.Label,TxtTap:cc.Label,TxtQuickTap:cc.Label,CloseBtn:cc.Button,TapTip:cc.Node,TapTipTxt:cc.Label,HitBarTxt:cc.Label,HitBarTapTip:cc.Label,GuideTipNode:cc.Node,SpringObj:cc.Node,RingObj:cc.Node,WallBossObj:cc.Node,MachineBoxObj:cc.Node,TaskObj:cc.Node,HitBarObj:cc.Node,HitCircleObj:cc.Node,CloseTip:cc.Label,TipNode:cc.Node,TipTitle:cc.Label,TipContent:cc.Label,GuideNode:cc.Node,SpringGuide:cc.Node,RingGuide:cc.Node,WallBossGuide:cc.Node,HitbarGuide:cc.Node,circleNode:{displayName:"circle",default:null,type:cc.Node},_isCatchTouch:!0},init:function(t){this.game=t},start:function(){},resetI18nTxt:function(){this.TxtSuperDash.string=this.game.i18n.t("superDash"),this.TxtDestroy.string=this.game.i18n.t("destroy"),this.TxtChange.string=this.game.i18n.t("change"),this.TxtTap.string=this.game.i18n.t("tap"),this.TapTipTxt.string=this.game.i18n.t("tap"),this.TxtQuickTap.string=this.game.i18n.t("quickTap"),this.HitBarTapTip.string=this.game.i18n.t("tap"),this.HitBarTxt.string=this.game.i18n.t("hitBarGuideContent"),this.CloseTip.string=this.game.i18n.t("tapToContinue")},showType:function(t){this.type=t,this.TapTip.active=1==t,this.GuideTipNode.active=1!=t,this.CloseBtn.node.active=1!=t,this.TipNode.active=2==t,this.GuideNode.active=3==t,1==t?(this.node.width=this.node.height=1e4,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBg,this),this._isCatchTouch=!0):this._isCatchTouch=!1,this.resetI18nTxt()},showObj:function(t){this.SpringObj.active="spring"==t,this.RingObj.active="ring"==t,this.WallBossObj.active="wallBoss"==t,this.MachineBoxObj.active="machineBox"==t,this.TaskObj.active="task"==t,this.HitBarObj.active="hitBar"==t,this.HitCircleObj.active="hitBar"==t},showGuideContent:function(t){this.SpringGuide.active="spring"==t,this.RingGuide.active="ring"==t,this.WallBossGuide.active="wallBoss"==t,this.HitbarGuide.active="hitBar"==t},showTapTip:function(t,e){var i=this;if(i.game.readyUI.txtShow(!1),i.tag=t,i.node.active=!0,i.showType(1),i.TapTipTxt.node.active=!1,"hit"==i.tag){i.TapTip.position=cc.p(0,0),i.TapTipTxt.node.active=!0;var a=i.game.BattleGameUI.ballAnimState.speed;i.hitAniSpeed=a,i.game.BattleGameUI.ballAnimState.speed=0,i.game.BattleGameUI.hitBar.hitPoint.node.pauseAllActions(),i.game.pause(null,!0)}else"smallShoot"==i.tag&&(i.TapTip.position=cc.p(0,0),i.TapTipTxt.node.active=!0,i.game.pause(null,!0))},showTip:function(t){var e=this;e.game.readyUI.txtShow(!1),e.tag=t,e.node.active=!0,e.showType(2),e.showObj(t),e.GuideTipNode.active=!1,e.closeBtnInteractable(!1);var i=e.getComponent(cc.Animation).getAnimationState("guideTipOut").clip.duration;e.node.getComponent(cc.Animation).play("guideTipOut"),e.scheduleOnce(function(){e.closeBtnInteractable(!0)},i),"spring"==e.tag?(e.TipTitle.string=this.game.i18n.t("springGuideTitle"),e.TipContent.string=this.game.i18n.t("springGuideContent")):"ring"==e.tag?(e.TipTitle.string=this.game.i18n.t("ringGuideTitle"),e.TipContent.string=this.game.i18n.t("ringGuideContent")):"machineBox"==e.tag?(e.TipTitle.string=this.game.i18n.t("machineGuideTitle"),e.TipContent.string=this.game.i18n.t("machineGuideContent")):"task"==e.tag&&(e.TipTitle.string=this.game.i18n.t("taskGuideTitle"),e.TipContent.string=this.game.i18n.t("taskGuideContent"))},showGuide:function(t){var e=this;e.game.readyUI.txtShow(!1),e.tag=t,e.node.active=!0,e.showType(3),e.showObj(t),e.showGuideContent(t),e.game.pause(null,!0),e.GuideTipNode.active=!1,e.closeBtnInteractable(!1);var i=e.getComponent(cc.Animation).getAnimationState("guideTipOut").clip.duration;if("hitBar"==t){var a=e.game.BattleGameUI.ballAnimState.speed;e.hitAniSpeed=a,e.game.BattleGameUI.ballAnimState.speed=0;var s=e.game.BattleGameUI.hitBar;s.hitPoint.node.pauseAllActions();var o=this.GuideTipNode.position,n=cc.p(s.node.x-o.x,s.node.y+s.greatChunk.node.y-o.y);this.HitCircleObj.position=n,i+=1.5}e.node.getComponent(cc.Animation).play("guideTipOut"),e.scheduleOnce(function(){e.closeBtnInteractable(!0)},i)},closeBtnInteractable:function(t){this.CloseBtn.interactable=t,this.CloseTip.node.active=t},closeTapTip:function(){var t=this;"hit"==t.tag&&(t.game.resume(),t.game.BattleGameUI.hitBar.hitPoint.node.resumeAllActions(),t.game.BattleGameUI.ballAnimState.speed=this.hitAniSpeed),"smallShoot"==t.tag&&t.game.resume(),t.game.readyUI.txtShow(!0),t.node.active=!1},close:function(){this.game.resume(),this.game.readyUI.txtShow(!0),this.node.active=!1,"hitBar"==this.tag&&this.showTapTip("hit")},onDestroy:function(){1==this.type&&this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBg,this)},onTouchBg:function(t){var e=t.getLocation(),i=this.circleNode.getBoundingBoxToWorld();"hit"!=this.tag&&"smallShoot"!=this.tag||(i=this.game.BattleGameUI.node.getBoundingBoxToWorld());i.width-=40,i.width=i.width<=0?0:i.width,i.height-=40,i.height=i.height<=0?0:i.height,i.contains(e)?this.node._touchListener.setSwallowTouches(!1):this.node._touchListener.setSwallowTouches(!0)}}),cc._RF.pop()},{}],HitBar:[function(t,e,i){"use strict";cc._RF.push(e,"282d7X63Y5LJJ8BBv215Rj3","HitBar");var a=t("Utils"),s=t("Types").HitLevel,o=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{greatChunk:cc.Sprite,chunkLimitY:{default:cc.v2(40,200),tooltip:"最佳击球点位置范围。根据最佳击球块范围，40是最低点"},initalSpeed20:{default:1.2,tooltip:"初始速度加成，20像素范围"},initalSpeed15:{default:1.5,tooltip:"初始速度加成，15像素范围"},initalSpeed10:{default:1.8,tooltip:"初始速度加成，10像素范围"},hitPoint:cc.Sprite},onLoad:function(){this.node.active=!0},start:function(){this.hitPoint.node.position=cc.p(0,this.node.height),this.node.active=!1,this.hitLevel=s.Bad},init:function(t){this.game=t,this.node.active=!0,this.isGuide=!this.game.userData.guide.hit,this.ballSpeed=this.game.ball.impulse;var e=a.randomNumBoth(this.chunkLimitY.x,this.chunkLimitY.y);this.greatChunk.node.y=e,this.movePoint(),this.setHitLevel(s.Bad)},setHitLevel:function(t){this.hitLevel=t},getHitLevel:function(){return this.hitLevel},getHitLevelDesc:function(t){var e="";return t==s.Bad?e=this.game.i18n.t("bad"):t==s.Cool?e=this.game.i18n.t("cool"):t==s.Great?e=this.game.i18n.t("great"):t==s.Amazing&&(e=this.game.i18n.t("amazing")),e},getHitLevelType:function(t){var e="";return t==s.Bad?e="Bad":t==s.Cool?e="Cool":t==s.Great?e="Great":t==s.Amazing&&(e="Amazing"),e},movePoint:function(){var t=this;this.moveing=!0,this.game.BattleGameUI.switchHitListen(!0),0==this.game.userData.guide.hit&&this.game.BattleGameUI.setHitClose(!0);var e=.8+.4*Math.random();if(!this.isGuide){var i=this.game.userData.amazingHitList,a=!1,s=0,o=!1;i[2]&&i[3]&&i[4]&&(o=!0);for(var n=0;n<this.game.userData.amazingHitList.length;n++){this.game.userData.amazingHitList[n]&&(a=!0,s++)}o?e=.6+.2*Math.random():5<=this.game.userData.hitCount&&0==s?e=1.2+.3*Math.random():this.game.userData.hitCount<5&&(e=a?.8+.4*Math.random():1.2+.3*Math.random())}var c=cc.moveTo(e,cc.p(this.hitPoint.node.x,0)),r=cc.callFunc(function(){t.game.BattleGameUI.switchHitListen(!1),t.game.BattleGameUI.hitbarMoveFinish(),t.game.BattleGameUI.showHitLevel(this.getHitLevel()),t.moveing=!1},this);this.hitPoint.node.position=cc.p(this.hitPoint.node.x,this.node.height);var h=cc.sequence(c,r);this.pointMoveSeque=h,this.hitPoint.node.runAction(h)},hit:function(){var t=this.hitPoint.node.y,e=this.greatChunk.node.y,i=this.greatChunk.node.height;if(e+i/2<t||t<e-i/2)this.setHitLevel(s.Bad);else{var a=1;t<=e+5&&e-5<=t?(this.setHitLevel(s.Amazing),a=this.initalSpeed10):t<=e+20&&e-20<=t?(this.setHitLevel(s.Great),a=this.initalSpeed15):t<=e+40&&e-40<=t&&(this.setHitLevel(s.Cool),a=this.initalSpeed20),this.ballSpeed=cc.v2(this.ballSpeed.x*a,this.game.ball.hitLevelSpeedY[this.getHitLevelType(this.getHitLevel())])}this.pointMoveSeque&&this.hitPoint.node.stopAction(this.pointMoveSeque),this.game.BattleGameUI.switchHitListen(!1)},hide:function(){this.node.active=!1},guideHit:function(){o.updateGuide("hit",!0),this.game.BattleGameUI.setHitClose(!1),this.game.guideUI.showGuide("hitBar")},update:function(t){if(this.moveing&&0==this.game.userData.guide.hit){var e=this.hitPoint.node.y,i=this.greatChunk.node.y;e<=i+5&&i-5<=e&&this.guideHit()}}}),cc._RF.pop()},{Types:"Types",UserDataStorage:"UserDataStorage",Utils:"Utils"}],LanguageData:[function(t,e,i){"use strict";cc._RF.push(e,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var a=t("polyglot.min"),s=null;function o(t){return window.i18n.languages[t]}function n(t){t&&(s?s.replace(t):s=new a({phrases:t,allowMissing:!0}))}window.i18n||(window.i18n={languages:{},curLang:""}),e.exports={init:function(t){if(t!==window.i18n.curLang){var e=o(t)||{};window.i18n.curLang=t,n(e),this.inst=s}},t:function(t,e){if(s)return s.t(t,e)},inst:s,updateSceneRenderers:function(){for(var t=cc.director.getScene().children,e=[],i=0;i<t.length;++i){var a=t[i].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(e,a)}for(var s=0;s<e.length;++s){e[s].updateLabel()}for(var o=[],n=0;n<t.length;++n){var c=t[n].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(o,c)}for(var r=0;r<o.length;++r){o[r].updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],Loading:[function(t,e,i){"use strict";cc._RF.push(e,"474d5oSepxLCatlL3Gf49uV","Loading"),cc.Class({extends:cc.Component,properties:{colorList:[cc.Node],showCout:3},onLoad:function(){this.time=0,this.currentIndex=0,this.colorListLength=this.colorList.length;for(var t=0;t<this.colorListLength;t++)this.colorList[t]},start:function(){},update:function(t){if(this.time+=t,!(this.time<.1)){this.time=0,this.currentIndex++,this.currentIndex>=this.colorListLength&&(this.currentIndex=0);for(var e=[this.currentIndex,(this.currentIndex+1)%this.colorListLength,(this.currentIndex+2)%this.colorListLength],i=0;i<this.colorListLength;i++){for(var a=this.colorList[i],s=!1,o=0;o<e.length;o++){e[o]==i&&(s=!0)}a.active=!!s}}}}),cc._RF.pop()},{}],LocalizedLabel:[function(t,e,i){"use strict";cc._RF.push(e,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var a=t("LanguageData");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(t){this._dataID!==t&&(this._dataID=t,this.updateLabel())}},_dataID:""},onLoad:function(){a.inst||a.init(),this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Label);if(t)return this.label=t,void this.updateLabel()},updateLabel:function(){this.label?a.t(this.dataID)&&(this.label.string=a.t(this.dataID)):cc.error("Failed to update localized label, label component is invalid!")}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(t,e,i){"use strict";cc._RF.push(e,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var a=t("SpriteFrameSet");cc.Class({extends:cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{default:[],type:a}},onLoad:function(){this.fetchRender()},fetchRender:function(){var t=this.getComponent(cc.Sprite);if(t)return this.sprite=t,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(t){for(var e=0;e<this.spriteFrameSet.length;++e)if(this.spriteFrameSet[e].language===t)return this.spriteFrameSet[e].spriteFrame},updateSprite:function(t){if(this.sprite){var e=this.getSpriteFrameByLang(t);!e&&this.spriteFrameSet[0]&&(e=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=e}else cc.error("Failed to update localized sprite, sprite component is invalid!")}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],LogoGameLogic:[function(t,e,i){"use strict";cc._RF.push(e,"9a05eC1OZZCo7Eukgiyb4Dm","LogoGameLogic");var a=t("AudioPlayer");cc.Class({extends:cc.Component,properties:{logoAnim:{default:null,type:cc.Animation},BtnAudio:{url:cc.AudioClip,default:null}},onLoad:function(){this.logoAnim.play()},start:function(){},init:function(t){this.game=t},showParticle:function(){},enableButtons:function(){},playGame:function(){a.playSound(this.BtnAudio),cc.sys.isNative&&0==this.game.userData.playTime&&trackEvent_2("Action",String("2")),this.game.goToReady()}}),cc._RF.pop()},{AudioPlayer:"AudioPlayer"}],LotteryBuffIcon:[function(t,e,i){"use strict";cc._RF.push(e,"e6a48azFIlBrpIVHJOen1AG","LotteryBuffIcon"),cc.Class({extends:cc.Component,properties:{spr_icon:cc.Sprite,txt_count:cc.Label},start:function(){},init:function(t,e){this.game=t;var i;this.game.userData.buff[e];i="resources/LotteryEffect/"+this.game.lotteryObj[e+100].icon+".png",this.setIcon(i),this.txt_count.node.active=!1},setIcon:function(t){var i=this;cc.loader.load(cc.url.raw(t),function(t,e){t?cc.error("load img error:"+t):(cc.log("load img success"),i.spr_icon.spriteFrame=new cc.SpriteFrame(e))})},setCount:function(t){this.txt_count.string=t},hideCount:function(){this.txt_count.node.active=!1}}),cc._RF.pop()},{}],LotteryItem:[function(t,e,i){"use strict";cc._RF.push(e,"ba52anKaYRDCbPlqOHAPKMV","LotteryItem");var s=t("AudioPlayer");cc.Class({extends:cc.Component,properties:{OpenBtn:cc.Button,rewardSpr:cc.Sprite,rewardDesc:cc.Label,render:cc.Sprite,openAudio:{url:cc.AudioClip,default:null}},start:function(){},init:function(t,e,i){var a=this;this.game=t,this.index=i;var s=a.game.lotteryObj[e].icon,o=Number(a.game.lotteryObj[e].rewardtype),n=Number(a.game.lotteryObj[e].rewardcount),c="";switch(o){case 1:c=this.game.i18n.t("coin").format(n);break;case 2:c=this.game.i18n.t("newSkin");break;case 3:c=this.game.i18n.t("buffUpSpeed");break;case 4:c=this.game.i18n.t("buffPower");break;case 5:c=this.game.i18n.t("buffCoin");break;case 6:c=this.game.i18n.t("buffRevive")}var r="";r=2==o?"resources/BallSkin/"+s+".png":"resources/LotteryEffect/"+s+".png",a.rewardDesc.string=c,cc.loader.load(cc.url.raw(r),function(t,e){t?cc.error("load img error:"+t):(cc.log("load img success"),a.rewardSpr.spriteFrame=new cc.SpriteFrame(e))})},flyToWait:function(t,e){var i=this;i.OpenBtn.interactable=!1;var a=this.getComponent(cc.Animation).getAnimationState("lottery_fly").clip.duration,s=cc.callFunc(function(){i.getComponent(cc.Animation).play("lottery_fly")}),o=cc.callFunc(function(){i.getComponent(cc.Animation).play("lottery_wait"),i.OpenBtn.interactable=!0});this.node.runAction(cc.sequence(cc.delayTime(e),s,cc.moveTo(a,t),o))},open:function(){var t=this;s.playSound(this.openAudio),t.OpenBtn.interactable=!1;var e=this.getComponent(cc.Animation).getAnimationState("lottery_open").clip.duration,i=cc.callFunc(function(){t.getComponent(cc.Animation).play("lottery_open")}),a=cc.callFunc(function(){t.getComponent(cc.Animation).play("lottery_wait"),t.game.lotteryUI.checkLotteryReward(t.index)});t.getComponent(cc.Animation).play("lottery_open"),this.node.runAction(cc.sequence(i,cc.delayTime(e),a)),this.game.lotteryUI.openCount()}}),cc._RF.pop()},{AudioPlayer:"AudioPlayer"}],LotteryLogic:[function(t,e,i){"use strict";cc._RF.push(e,"3448dXCw1xP+40sWt34NPOa","LotteryLogic");var m=t("Utils"),o=t("UserDataStorage"),a=t("AudioPlayer");cc.Class({extends:cc.Component,properties:{TxtContinue:cc.Label,closeBtn:cc.Button,closeTip:cc.Label,openBtn:cc.Button,machineNode:cc.Node,LotteryPrefab:cc.Prefab,lotteryListNode:cc.Node,machineAudio:{url:cc.AudioClip,default:null}},onLoad:function(){},start:function(){},swithClose:function(t){this.closeBtn.interactable=t,this.closeTip.node.active=t},init:function(t){this.game=t},onEnable:function(){this.resetI18nTxt()},resetI18nTxt:function(){this.TxtContinue.string=this.game.i18n.t("tapToContinue")},show:function(t,e,i,a){this.list=t,this.node.active=!0,this.openNum=0,this.machine_show=e,this.lotteryListNode.removeAllChildren(),this.swithClose(!1),e?this.showMachine(i,a):this.showLottery()},fly:function(t,e){this.openBtn.interactable=!0;var i=this.machineNode.x,a=this.machineNode.y;this.machineNode.scale=t.x/this.machineNode.width,this.machineNode.x=e.x,this.machineNode.y=e.y;this.machineNode.runAction(cc.spawn(cc.moveTo(1,cc.p(i,a)),cc.scaleTo(1,1)))},showMachine:function(t,e){o.updateMachine("openCount",this.game.userData.machine.openCount+1),this.machineNode.active=!0,this.getComponent(cc.Animation).play("machine_tip"),this.openBtn.interactable=!0,t&&e&&this.fly(t,e)},showLottery:function(){this.machineNode.active=this.machine_show;var t=this.list,e=t.length,i=cc.winSize;this.lotteryList=[];for(var a=0;a<e;a++){var s=t[a],o=this.createLottery(),n=o.getComponent("LotteryItem");n.init(this.game,s,a);var c=cc.v2(0,0);1==e?c=cc.v2(0,0):2==e?c=cc.v2(-i.width/4+i.width/2*a,0):3==e?0==a?c=cc.v2(-i.width/3,0):1==a?c=cc.v2(0,0):2==a&&(c=cc.v2(i.width/3,0)):4==e&&(c=cc.v2(-(i.width/8+i.width/4)+i.width/4*a,0)),o.setPosition(cc.v2(0,0)),this.lotteryListNode.addChild(o),n.flyToWait(c,.2*a)}},extractLotteryAndFunc:function(t,e,i,a,s){this.callFunc=s,this.extractCount=1,this.extractNum=0,this.machine_show=e,this.extractLottery(t,e,i,a)},extractLotteryMore:function(t,e,i,a){this.callFunc=null,this.countList=t,this.extractCount=t.length,this.extractNum=0,this.machine_show=e,this.extractLottery(this.countList[this.extractNum++],this.machine_show,i,a)},extractLottery:function(t,e,i,a){var s=this.game.userData.machine.level,o=this.game.userData.skin,n=this.game.lotteryObj,c=this.game.machineObj[s].chance,r=[],h={};if(0==this.game.userData.machine.openCount&&4==t)r=[101,102,103,104];else for(var l=0;l<t;l++){var d=m.getResultByWeight(c).lotteryId,u=n[d],g=Number(u.rewardtype),p=Number(u.rewardcount);2==g&&1==o[p]?l--:2==g&&h[d]?l--:(2==g&&(h[d]=!0),r.push(d))}this.show(r,e,i,a)},checkLotteryReward:function(t){var e=this.game.lotteryObj;if(this.list[t]){var i=e[this.list[t]],a=Number(i.rewardtype),s=Number(i.rewardcount);switch(a){case 1:this.game.addCoin(s),this.game.readyUI.setCoin(this.game.userData.coin);break;case 2:this.game.skillUpUI.getSkin(s);break;case 3:o.updateBuff(1,this.game.userData.buff[1]+1);break;case 4:o.updateBuff(2,this.game.userData.buff[2]+1);break;case 5:o.updateBuff(3,this.game.userData.buff[3]+1);break;case 6:o.updateBuff(4,this.game.userData.buff[4]+1)}}},createLottery:function(){return cc.instantiate(this.LotteryPrefab)},openCount:function(){this.openNum++,this.openNum>=this.list.length&&this.swithClose(!0)},openMachine:function(){var t=this;a.playSound(this.machineAudio),t.openBtn.interactable=!1;var e=t.getComponent(cc.Animation).getAnimationState("machine_collect").clip.duration;t.getComponent(cc.Animation).play("machine_collect");var i=cc.callFunc(function(){t.getComponent(cc.Animation).play("machine_openLoop"),t.showLottery()});t.node.runAction(cc.sequence(cc.delayTime(e),i))},close:function(){null!=this.callFunc?(this.node.active=!1,this.game.readyUI.txtShow(!0),this.callFunc()):this.extractNum<this.extractCount?this.extractLottery(this.countList[this.extractNum++],this.machine_show):this.node.active=!1}}),cc._RF.pop()},{AudioPlayer:"AudioPlayer",UserDataStorage:"UserDataStorage",Utils:"Utils"}],MachineLogic:[function(t,e,i){"use strict";cc._RF.push(e,"3088ddtosZGpISj6wX3G/LW","MachineLogic");var c=t("Utils"),s=t("UserDataStorage"),a=t("AudioPlayer"),o=t("ADUtils");cc.Class({extends:cc.Component,properties:{TxtTitle:cc.Label,TxtTip:cc.Label,machineIcon:cc.Node,OpenNode:cc.Node,WaitNode:cc.Node,WaitLabel:cc.Label,LevelLable:cc.Label,WatchADCount:cc.Label,adapterNode:cc.Node,BtnAudio:{url:cc.AudioClip,default:null}},onLoad:function(){},init:function(t){this.game=t,this.TimeStampCD=[5,5,5,5],this.checkDayOpenCount()},checkDayOpenCount:function(){c.isDayNewGame(this.game.userData.lastPlayTimeStamp)?(this.dayOpenCount=0,s.updateMachine("dayOpenCount",0),this.timeUp()):this.dayOpenCount=this.game.userData.machine.dayOpenCount},start:function(){},onEnable:function(){this.resetData(),this.resetLevelData(),this.resetI18nTxt()},resetI18nTxt:function(){this.TxtTitle.string=this.game.i18n.t("machineUITitle"),this.TxtTip.string=this.game.i18n.t("machineTip")},resetData:function(){var t=this.game.userData,e=c.getTimeStamp(0);0==t.machine.count?t.machine.timeStamp<=e?this.timeUp():this.waitOrList(!0):this.waitOrList(!1)},resetLevelData:function(){var t=this.game.userData.machine.level,e=this.game.machineObj[t].LVUP,i=this.game.userData.machine.upAdCount;this.LevelLable.string="Lv "+t,this.WatchADCount.string=i+"/"+e},timeUp:function(){this.waitOrList(!1),s.updateMachine("count",1)},waitOrList:function(t){this.WaitNode.active=t,this.OpenNode.active=!t},resetTimeStamp:function(){var t=this.dayOpenCount;t>=this.TimeStampCD.length-1&&(t=this.TimeStampCD.length-1);var e=this.TimeStampCD[t],i=c.getTimeStamp(e);s.updateMachine("timeStamp",i),s.updateMachine("count",0)},openMachine:function(t){var e=c.getTimeStamp(0);s.updateLastPlayTimeStamp(e);var i=cc.v2(180,180),a=this.machineIcon.position;this.game.lotteryUI.extractLotteryMore(t,!0,i,a)},get:function(){console.log("get"),a.playSound(this.BtnAudio),this.openMachine([4]),this.resetTimeStamp(),this.waitOrList(!0),this.fadeClose(),s.updateMachine("dayOpenCount",this.game.userData.machine.dayOpenCount+1),cc.sys.isNative&&trackEvent_1("ReceiveRewards")},ad:function(){var t=this;if(console.log("ad"),a.playSound(this.BtnAudio),s.updateMachine("dayOpenCount",this.game.userData.machine.dayOpenCount+1),cc.sys.isNative){var e=trackVideoAdsState("Doublebonus","1");console.log("state:"+e),0==e?o.showVideoAD("Doublebonus","1",t):1==e?o.loadAndShowVideoAD("Doublebonus","1",t):2==e?Tip.show(t.game.i18n.t("netError"),.5):3==e&&Tip.show(t.game.i18n.t("otherError"),.5)}else t.adFinish()},adFinish:function(){this.openMachine([4,4]),this.game.watchAd(),this.resetTimeStamp(),this.waitOrList(!0),this.fadeClose()},show:function(){this.node.active=!0,this.node.opacity=255,c.layerOpenTransition(this.adapterNode)},close:function(){this.game.readyUI.txtShow(!0),this.node.active=!1},fadeClose:function(){var t=this,e=cc.callFunc(function(){t.close()});this.node.runAction(cc.sequence(cc.fadeOut(.5),e))},update:function(t){if(this.WaitNode.active){var e=c.getTimeStamp(0),i=this.game.userData.machine.timeStamp-e,a=Math.floor(i/3600);a<10&&(a="0"+a);var s=Math.floor(i%3600/60);s<10&&(s="0"+s);var o=Math.floor(i%60);o<10&&(o="0"+o);var n=a+":"+s+":"+o+" "+this.game.i18n.t("canOpen");this.WaitLabel.string=n,i<=0&&this.timeUp()}}}),cc._RF.pop()},{ADUtils:"ADUtils",AudioPlayer:"AudioPlayer",UserDataStorage:"UserDataStorage",Utils:"Utils"}],Move:[function(t,e,i){"use strict";cc._RF.push(e,"0002bF3ZQlOOIU6HYHx0y6F","Move");var s=t("Utils"),a=cc.Class({extends:cc.Component,properties:{rotationAngle:5},onLoad:function(){},initProperty:function(t,e){this.switch=!0;var i=cc.find("/Game");this.game=i.getComponent("Game"),this.ballDistance=this.game.ball.getSpeedX(),this.minSpeedRate=t,this.maxSpeedRate=e;var a=s.getRandomRate(this.minSpeedRate,this.maxSpeedRate);this.moveDistance=this.ballDistance*a,this.stopMove=!1,this.rotate_bool=!0},resetRate:function(t){var e=this.game.ball.getSpeedX();this.moveDistance=e*t},setSwitch:function(t){this.switch=t},setRotate:function(t){this.rotate_bool=t},update:function(){if(1!=this.game.isPause&&this.switch&&null!=this.moveDistance){this.moveDistance<=0&&(this.moveDistance=.5),1==this.stopMove&&(this.moveDistance=0);var t=cc.director.getScheduler().getTimeScale();this.node.x+=this.moveDistance*t,this.rotate_bool&&(this.node.rotation+=t*this.rotationAngle)}}});e.exports=a,cc._RF.pop()},{Utils:"Utils"}],NodePool:[function(t,e,i){"use strict";cc._RF.push(e,"10917B09MxLl6o+yb3kzUqZ","NodePool");var a=cc.Class({name:"NodePool",properties:{prefab:cc.Prefab,size:0},ctor:function(){this.idx=0,this.initList=[],this.list=[]},init:function(){for(var t=0;t<this.size;++t){var e=cc.instantiate(this.prefab);this.initList[t]=e,this.list[t]=e}this.idx=this.size-1},reset:function(){for(var t=0;t<this.size;++t){var e=this.initList[t];(this.list[t]=e).active&&(e.active=!1),e.parent&&e.removeFromParent()}this.idx=this.size-1},request:function(){if(this.idx<0)return cc.log("Error: the pool do not have enough free item."),null;var t=this.list[this.idx];return t&&(t.active=!0),--this.idx,t},return:function(t){++this.idx,t.active=!1,t.parent&&t.removeFromParent(),this.list[this.idx]=t}});e.exports=a,cc._RF.pop()},{}],PoolMng:[function(t,e,i){"use strict";cc._RF.push(e,"7e21fTKcmFAtbqTgFTM0rMr","PoolMng");var a=t("NodePool");t("Types").FoeType;cc.Class({extends:cc.Component,properties:{foePools:{default:[],type:a}},init:function(){for(var t=0;t<this.foePools.length;++t)this.foePools[t].init()},requestFoe:function(t){var e=this.foePools[t];return 0<=e.idx?e.request():null},returnFoe:function(t,e){var i=this.foePools[t];i.idx<i.size?i.return(e):cc.log("Return obj to a full pool, something has gone wrong")}}),cc._RF.pop()},{NodePool:"NodePool",Types:"Types"}],PowerBar:[function(t,e,i){"use strict";cc._RF.push(e,"e58a5KMJ6BAx7o0RKdz+3dG","PowerBar");t("Types").BallState,t("Types").GameState,t("UserDataStorage");var o=t("AudioPlayer");cc.Class({extends:cc.Component,properties:{gridPower:300,gridCount:3,bar:cc.Node,progressBar:cc.ProgressBar,powerPoints:cc.Node,powerPointPrefab:cc.Prefab,noPowerAudio:{url:cc.AudioClip,default:null}},onLoad:function(){this.initPos=this.node.position},init:function(t){this.game=t,this.power=0,this.powerValueList=[],this.maxPower=this.gridCount*this.gridPower,this.powerCount=0,this.initPowerLevel(),this.initPowerPoint(),this.setPower(this.maxPower)},onEnable:function(){this.resetGridCount(),this.initPowerLevel(),this.initPowerPoint(),this.maxPower=this.gridCount*this.gridPower,this.setPower(this.maxPower)},resetGridCount:function(){this.userData=this.game.userData,this.coinLv=this.userData.upgrade[4],this.gridCount=Number(this.game.upgradeObj[4][this.coinLv].effect)},addGrid:function(){this.resetGridCount(),this.gridCount+=3,this.initPowerLevel(),this.initPowerPoint(),this.maxPower=this.gridCount*this.gridPower,this.setPower(this.power+3*this.gridPower)},start:function(){},initPowerLevel:function(){for(var t=0;t<this.gridCount;t++)this.powerValueList[t]=(t+1)*this.gridPower},initPowerPoint:function(){this.powerPoints.removeAllChildren();for(var t=0;t<this.gridCount-1;t++){var e=Math.round((t+1)/this.gridCount*this.node.height),i=cc.instantiate(this.powerPointPrefab);i.setPosition(cc.v2(0,e)),this.powerPoints.addChild(i)}},setPower:function(t){t>this.maxPower&&(t=this.maxPower),t<0&&(t=0),this.power=t,this.resetPowerCount(t),this.game.BattleGameUI.switchPowerListen(!0),this.progressBar.progress=t/this.maxPower},shake:function(){o.playSound(this.noPowerAudio);var t=this.initPos,e=cc.moveTo(.03,cc.v2(t.x+2,t.y+4)),i=cc.moveTo(.03,cc.v2(t.x-2,t.y-3)),a=cc.moveTo(.03,cc.v2(t.x-2,t.y+3)),s=cc.moveTo(.03,cc.v2(t.x,t.y));this.node.stopAllActions(),this.node.runAction(cc.sequence(e,i,a,s))},checkPower:function(){this.addPower(0)},addPower:function(t){this.setPower(this.power+t)},reducePower:function(t){this.setPower(this.power-t)},useGrid:function(){this.reducePower(this.gridPower)},resetPowerCount:function(t){this.powerCount=0;for(var e=this.powerValueList.length-1;0<=e;e--){if(this.powerValueList[e]<=t){this.powerCount=e+1;break}}}}),cc._RF.pop()},{AudioPlayer:"AudioPlayer",Types:"Types",UserDataStorage:"UserDataStorage"}],ReadyGameLogic:[function(t,e,i){"use strict";cc._RF.push(e,"9589aSE7JpOnqsUzYKygBTj","ReadyGameLogic");var r=t("Utils"),a=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{TxtNode:cc.Node,TxtTap:cc.Label,TxtTip:cc.Label,TxtBest:cc.Label,TxtCoin:cc.Label,TxtBestScore:cc.Label,TxtMachineTime:cc.Label,BtnUP:cc.Button,skillRedPoint:cc.Sprite,BtnMachineBox:cc.Button,BtnTask:cc.Button,btnSetRedPoint:cc.Sprite,btnTaskRedPoint:cc.Sprite,springLimitCount:6,MachineBoxLimitCount:10,ringLimitCount:15,TaskLimitCount:20},onLoad:function(){},start:function(){},init:function(t){this.game=t;var e=this.game.userData;this.setCoin(e.coin),this.setBestScore(e.bestScore),this.switchTapListen(!0);var i=this.game.userData.playTime;this.BtnMachineBox.node.active=i>=this.MachineBoxLimitCount,this.BtnTask.node.active=i>=this.TaskLimitCount,this.resetTapTxt()},onEnable:function(){this.switchTapListen(!0)},setSetRedPoint:function(t){this.btnSetRedPoint.node.active=t},setTaskRedPoint:function(t){this.btnTaskRedPoint.node.active=t},resetTapTxt:function(){this.TxtTap.string=this.game.i18n.t("clickStar"),this.TxtTip.string=this.game.i18n.t("challengeDistance"),this.TxtBest.string=this.game.i18n.t("betScore")+":"},checkGuideTip:function(){var t=this.game.userData.playTime+1;t==this.springLimitCount?this.game.guideUI.showTip("spring"):t==this.MachineBoxLimitCount?this.game.guideUI.showTip("machineBox"):t==this.ringLimitCount?this.game.guideUI.showTip("ring"):t==this.TaskLimitCount&&(this.game.guideUI.showTip("task"),this.newTask=!0),5==t&&this.setSetRedPoint(!0),this.BtnMachineBox.node.active=t>=this.MachineBoxLimitCount,this.BtnTask.node.active=t>=this.TaskLimitCount,this.TaskActive=t>=this.TaskLimitCount,0==this.game.userData.task.length&&this.game.readyUI.setTaskRedPoint(!0)},setCoin:function(t){this.TxtCoin.string=t},setBestScore:function(t){this.TxtBestScore.string=t+"M"},checkRedPoint:function(){var t=this.game.skillUpUI.checkRedPoint();this.skillRedPoint.node.active=t},switchTapListen:function(t){if(t){this.TxtTap.node.active=!0;var e=cc.repeatForever(cc.blink(2,4));this.TxtTap.node.runAction(e),this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchend",this.onTouchEnd,this)}else this.node.off("touchstart",this.onTouchStart,this),this.node.off("touchend",this.onTouchEnd,this)},txtShow:function(t){this.TxtNode.active=t},onTouchStart:function(){},onTouchEnd:function(){cc.sys.isNative&&0==this.game.userData.playTime&&trackEvent_2("Action",String("3")),this.game.goToStart()},timeUp:function(){a.updateMachine("count",1)},update:function(t){if(0==this.game.userData.machine.count){var e=r.getTimeStamp(0),i=this.game.userData.machine.timeStamp-e,a=Math.floor(i/3600);a<10&&(a="0"+a);var s=Math.floor(i%3600/60);s<10&&(s="0"+s);var o=Math.floor(i%60);o<10&&(o="0"+o);var n=a+":"+s+":"+o;this.TxtMachineTime.string=n,i<=0&&this.timeUp()}else{var c=this.game.i18n.t("canOpen");this.TxtMachineTime.string=c}}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage",Utils:"Utils"}],SettingLogic:[function(t,e,i){"use strict";cc._RF.push(e,"e3a9ds4lExKpb3EK2ScBAB1","SettingLogic");var a=t("Utils"),s=t("UserDataStorage"),o=t("AudioPlayer");cc.Class({extends:cc.Component,properties:{zh_cnToggle:cc.Toggle,zh_twToggle:cc.Toggle,enToggle:cc.Toggle,TxtTitle:cc.Label,musicProgress:cc.ProgressBar,musicSlider:cc.Slider,soundProgress:cc.ProgressBar,soundSlider:cc.Slider,againBtn:cc.Button,Toggle:cc.ToggleContainer,adapterNode:cc.Node,BtnAudio:{url:cc.AudioClip,default:null}},onLoad:function(){this.isReadyLayer=!0},init:function(t){this.game=t,this.music=o.getMusic(),this.sound=o.getSound(),this.initMusicProgress(this.music),this.initSoundProgress(this.sound)},start:function(){},onEnable:function(){var t=this.game.userData.currentLanguage;"zh_cn"==t?(this.zh_cnToggle.check(),this.zh_twToggle.uncheck(),this.enToggle.uncheck()):"zh_tw"==t?(this.zh_cnToggle.uncheck(),this.zh_twToggle.check(),this.enToggle.uncheck()):"en"==t&&(this.zh_cnToggle.uncheck(),this.zh_twToggle.uncheck(),this.enToggle.check())},resetTitle:function(){this.TxtTitle.string=this.game.i18n.t("setUITitle"),this.game.readyUI.resetTapTxt()},show:function(t){this.node.active=!0,this.isReadyLayer=!t,this.againBtn.node.active=t,this.againBtn.interactable=!0,this.game.readyUI.setSetRedPoint(!1),this.resetTitle(),a.layerOpenTransition(this.adapterNode)},switchLanguage:function(t,e){this.game.i18n.init(e),s.updateLanguage(e),this.resetTitle()},zh_cn:function(){0!=this.zh_cnToggle.isChecked&&(o.playSound(this.BtnAudio),this.game.i18n.init("zh_cn"),s.updateLanguage("zh_cn"),this.resetTitle())},zh_tw:function(){0!=this.zh_twToggle.isChecked&&(o.playSound(this.BtnAudio),this.game.i18n.init("zh_tw"),s.updateLanguage("zh_tw"),this.resetTitle())},en:function(){0!=this.enToggle.isChecked&&(o.playSound(this.BtnAudio),this.game.i18n.init("en"),s.updateLanguage("en"),this.resetTitle())},initMusicProgress:function(t){this.musicSlider.progress=t,this.setMusicProgressBar()},initSoundProgress:function(t){this.soundSlider.progress=t,this.setSoundProgressBar()},setMusicProgressBar:function(){this.musicProgress.progress=this.musicSlider.progress,this.music=this.musicProgress.progress,o.setMusic(this.music)},setSoundProgressBar:function(){this.soundProgress.progress=this.soundSlider.progress,this.sound=this.soundProgress.progress,o.setSound(this.sound)},again:function(){console.log("again"),this.game.resume(),o.playSound(this.BtnAudio),this.game.showLoading(),this.againBtn.interactable=!1,this.againBtn.active=!1,cc.sys.isNative&&trackEvent_1("Activereboot"),cc.director.loadScene("PlayGame",function(){cc.director.getScene().getChildByName("Game").getComponent("Game").showLogo=!1})},close:function(){this.game.readyUI.txtShow(!0),this.node.active=!1,this.isReadyLayer||this.game.resume()}}),cc._RF.pop()},{AudioPlayer:"AudioPlayer",UserDataStorage:"UserDataStorage",Utils:"Utils"}],SkillItem:[function(t,e,i){"use strict";cc._RF.push(e,"9315bvs6TBIXJvchtuNmJ+l","SkillItem"),cc.Class({extends:cc.Component,properties:{lvTxt:cc.Label,costTxt:cc.Label,moveNode:cc.Node,type:1,redPoint:cc.Sprite},onLoad:function(){this.upgradeObj=this.game.upgradeObj,this.userData=this.game.userData,this.upgrade=this.userData.upgrade,this.resetUI(this.upgrade[this.type]),this.lvTxtPos=this.lvTxt.node.position,this.costTxtPos=this.costTxt.node.position,this.moveNodePos=this.moveNode.position},start:function(){},init:function(t){this.game=t},resetUI:function(t){var e=this.type,i=null,a=null;t<this.upgradeObj[e].length?(i=Number(this.upgradeObj[e][t].cost),a=Number(this.upgradeObj[e][t].lv)):a=i="max",this.costTxt.string=i,this.lvTxt.string="Lv "+a},clickUp:function(){var t=this;if(this.game.skillUpUI.upSkill(this.type)){this.moveNode.stopAllActions();var e=cc.spawn(cc.moveBy(.15,cc.v2(150,0)),cc.fadeOut(.15)),i=cc.callFunc(function(){t.resetUI(t.upgrade[t.type]),t.moveNode.x=t.moveNodePos.x-150}),a=cc.spawn(cc.moveBy(.15,cc.v2(150,0)),cc.fadeIn(.15));this.moveNode.runAction(cc.sequence(e,i,a))}},setRedPointActive:function(t){this.redPoint.node.active=t}}),cc._RF.pop()},{}],SkillUpLogic:[function(t,e,i){"use strict";cc._RF.push(e,"6d9ae3Nn4FMBYaHhMTNPFYt","SkillUpLogic");var c=t("UserDataStorage"),a=t("Utils"),r=t("AudioPlayer");cc.Class({extends:cc.Component,properties:{upBtn:cc.Button,skinBtn:cc.Button,foeBtn:cc.Button,upRedPoint:cc.Sprite,upRedPointMonster:cc.Sprite,skinRedPoint:cc.Sprite,skinNode:cc.Node,foeNode:cc.Node,skinItem:cc.Prefab,skinContent:cc.Node,adapterNode:cc.Node,skillUpItem:cc.Prefab,skillSprite:cc.Sprite,upNode:cc.Node,descNode:cc.Node,descTitle:cc.Label,descLv:cc.Label,descContent:cc.Label,btnCost:cc.Button,descCost:cc.Label,descIcon:cc.Sprite,switchAudio:{url:cc.AudioClip,default:null},upSkillAudio:{url:cc.AudioClip,default:null},selectSkinAudio:{url:cc.AudioClip,default:null}},onLoad:function(){},onEnable:function(){},start:function(){},init:function(t){this.game=t;var e=this.node.getComponent("LayerMove");this.moveScr=e},initItem:function(){},showInit:function(){this.upgradeObj=this.game.upgradeObj,this.userData=this.game.userData,this.upgrade=this.userData.upgrade},show:function(){this.showInit(),this.node.active=!0,this.resetI18nTxt(),a.layerOpenTransition(this.adapterNode),this.initSkill(),this.initSkin(),this.setLayer(1)},resetI18nTxt:function(){},switchLayer:function(t,e){r.playSound(this.switchAudio),this.setLayer(Number(e))},setLayer:function(t){this.upNode.active=1==t,this.upBtn.interactable=1!=t,this.skinNode.active=2==t,this.skinBtn.interactable=2!=t,this.foeNode.active=3==t,this.foeBtn.interactable=3!=t,this.descNode.active=2!=t,1==t&&(this.upNode.active=!0,this.foeNode.active=!1,this.Choice(1)),2==t&&this.initSkin(),3==t&&(this.Choice(101),this.upNode.active=!1,this.foeNode.active=!0),this.checkRedPoint()},resetData:function(){this.userData=this.game.userData,this.upgrade=this.userData.upgrade},checkRedPoint:function(){var t=this.checkSkillRedPoint(),e=this.checkSkinRedPoint();return t||e},checkSkillRedPoint:function(){for(var t=this.game.userData.coin,e=!1,i=!1,a=0;a<this.itemList.length;a++){var s=this.itemList[a],o=this.game.userData.upgrade[s.type],n=this.game.upgradeObj[s.type][o],c=this.game.upgradeObj[s.type].length;t>=n.cost&&o<c?(s.setRedPointActive(!0),s.type<100&&null!=s&&(e=!0),101<=s.type&&null!=s&&(i=!0)):s.setRedPointActive(!1)}return this.upRedPoint.node.active=!!e,this.upRedPointMonster.node.active=!!i,e||i},checkSkinRedPoint:function(){var t=this.game.userData.newSkin,e=!1;for(var i in this.skinObjs)if(this.skinObjs.hasOwnProperty(i)){var a=this.skinObjs[i].getComponent("SkinItem");t[a.skinId]?(a.showRedPoint(),e=!0):a.hideRedPoint()}return this.skinRedPoint.node.active=e},upSkill:function(){r.playSound(this.upSkillAudio);var t=Number(this.selectUpType);this.resetData();var e=this.upgrade[t];if(this.upgradeObj[t].length<=e)return console.log("Already the highest level"),Tip.show(this.game.i18n.t("highestLevel"),.5),!1;var i=this.upgradeObj[t][e];if(this.userData.coin<i.cost)return console.log("Coins are not enough"),Tip.show(this.game.i18n.t("lackCoin"),.5),!1;var a=e+1,s=this.userData.coin-i.cost;switch(this.game.addCoin(-i.cost),c.updateUpgrade(t,a),t){case 1:this.game.ball.resetInitImpulse();break;case 2:this.game.ball.resetMaxSpeed();break;case 3:this.game.BattleGameUI.resetBaseCoin();break;case 4:this.game.BattleGameUI.powerBar.resetGridCount()}this.resetDesc(this.upgradeObj[t][a]),this.game.readyUI.setCoin(s),c.updateUpgradeCount(this.game.userData.upgradeCount+1),this.checkSkinTarget(2),this.game.readyUI.checkRedPoint();for(var o=0;o<this.itemList.length;o++){var n=this.itemList[o];n.type==t?(n.select(),n.skillLv()):n.noselect()}return cc.sys.isNative&&trackEvent_2("Upgrades",String(t)),!0},initSkin:function(){this.userData=this.game.userData;var t=this.userData.selectSkin,e=this.userData.skin,i=this.game.skinObj.length;this.skinContent.removeAllChildren(),this.skinObjs={},this.skinContent.height=150*Math.ceil(i/5);for(var a=0;a<i;a++){var s=cc.instantiate(this.skinItem),o=80+a%5*135,n=-80-140*Math.floor(a/5);s.setPosition(cc.p(o,n)),this.skinContent.addChild(s);var c=a+1,r=(this.skinObjs[c]=s).getComponent("SkinItem");r.init(this.game),r.resetProperty(c),t==c?r.select():e[c]?r.noselect():r.noget()}},initSkill:function(t){this.itemList=[],this.userData=this.game.userData;var e=this.getSkillList();0<e.length&&e[0],this.upNode.removeAllChildren();for(var i=0;i<e.length;i++){var a=e[i],s=cc.instantiate(this.skillUpItem),o=i%4*94-300,n=124-106*Math.floor(i/4);s.setPosition(cc.p(o,n)),this.upNode.addChild(s);var c=s.getComponent("skillUpItem");this.itemList.push(c),c.init(this.game),c.resetProperty(a),0==i?c.select():c.noselect()}var r=this.getOpenFoeUpList();this.foeNode.removeAllChildren();0<r.length&&r[0];for(var h=0;h<r.length;h++){var l=r[h],d=cc.instantiate(this.skillUpItem),u=h%4*94-300,g=124-106*Math.floor(h/4);d.setPosition(cc.p(u,g)),this.foeNode.addChild(d);var p=d.getComponent("skillUpItem");p.init(this.game),p.resetProperty(l),this.itemList.push(p),0==h?p.select():p.noselect()}},getOpenFoeUpList:function(){var t=this.game.userData.playTime,e=[],i=this.game.upgradeObj;for(var a in i)if(101<=Number(a)&&"undefined"!=a){var s=i[a][1];t>=Number(s.open)&&e.push(Number(a))}return e},getSkillList:function(){var t=this.game.userData.playTime,e=[],i=this.game.upgradeObj;for(var a in i)if(Number(a)<101&&"undefined"!=a){var s=i[a][1];t>=Number(s.open)&&e.push(Number(a))}return e},selectSkin:function(t){r.playSound(this.selectSkinAudio);var e=this.userData.skin;for(var i in this.skinObjs){var a=this.skinObjs[i].getComponent("SkinItem");t==i?a.select():e[i]?a.noselect():a.noget()}c.updateSelectSkin(t),this.game.ball.resetSkin(),c.updateNewSkin(t,!1),this.game.readyUI.checkRedPoint(),this.checkSkinRedPoint()},getSkin:function(t){c.updateSkin(t,!0),c.updateNewSkin(t,!0),this.checkSkinRedPoint()},getSkinCount:function(){var t=this.game.userData.skin,e=0;for(var i in t)1==t[i]&&e++;return e},checkSkinTarget:function(t){for(var e in this.game.skinObj)if("length"!=e){var i=Number(this.game.skinObj[e].id);if(1==this.game.userData.skin[i])continue;var a=this.game.skinObj[e].toget,s=String(a).split(","),o=Number(s[0]),n=Number(s[1]);switch(o){case 1:o==t&&this.game.userData.bestScore>=n&&this.getSkin(i);break;case 2:o==t&&this.game.userData.upgradeCount>=n&&this.getSkin(i);break;case 3:o==t&&this.game.userData.watchAdCount>=n&&this.getSkin(i)}}},close:function(){this.game.readyUI.txtShow(!0),this.node.active=!1,this.moveScr?this.moveScr.hideLayer(!0):this.node.active=!1},clickUpItem:function(t){var e=this.game.upgradeObj,i=this.game.userData.upgrade[t],a=e[t][i];this.resetDesc(a)},resetDesc:function(t){var i=this;this.selectUpType=t.type,this.descTitle.string=this.game.i18n.t("skill"+t.type),this.descContent.string=this.game.i18n.t("icon_effect_"+t.type),this.descIcon.Sprite=this.game.i18n.t("res").format(t.res);var e=this.game.upgradeObj[t.type].length;t.lv>=e?(this.descLv.string=this.game.i18n.t("lvName").format(this.game.i18n.t("max")),this.descCost.string=this.game.i18n.t("max")):(this.descLv.string=this.game.i18n.t("lvName").format(t.lv),this.descCost.string=t.cost);var a;a="resources/SkillUpIcon/"+t.res+".png",cc.loader.load(cc.url.raw(a),function(t,e){t?cc.error("load img error:"+t):(cc.log("load img success"),i.skillSprite.spriteFrame=new cc.SpriteFrame(e))})},Choice:function(t){r.playSound(this.selectSkinAudio),this.clickUpItem(t);for(var e=0;e<this.itemList.length;e++){var i=this.itemList[e];i.type==t?i.select():i.noselect()}},resetUI:function(t){var e=this.type,i=null,a=null;t<this.upgradeObj[e].length?(i=Number(this.upgradeObj[e][t].cost),a=Number(this.upgradeObj[e][t].lv)):a=i="max",this.costTxt.string=i,this.lvTxt.string="Lv "+a}}),cc._RF.pop()},{AudioPlayer:"AudioPlayer",UserDataStorage:"UserDataStorage",Utils:"Utils"}],SkinItem:[function(t,e,i){"use strict";cc._RF.push(e,"b43f4+tUMpI9qlgj0NdkD7+","SkinItem"),cc.Class({extends:cc.Component,properties:{nogetNode:cc.Node,getNode:cc.Node,selectBg:cc.Node,getBg:cc.Node,skinSpr:cc.Sprite,redPoint:cc.Sprite},onLoad:function(){},init:function(t){this.game=t,this.userData=this.game.userData,this.skinObj=this.game.skinObj,this.btn=this.node.getComponent(cc.Button)},start:function(){},resetProperty:function(t){this.setId(t),this.setBallSpr(t)},setId:function(t){this.skinId=t},select:function(){this.nogetNode.active=!1,this.getNode.active=!0,this.selectBg.active=!0,this.getBg.active=!1,this.btn.interactable=!1},noselect:function(){this.nogetNode.active=!1,this.getNode.active=!0,this.selectBg.active=!1,this.getBg.active=!0,this.btn.interactable=!0},noget:function(){this.nogetNode.active=!0,this.getNode.active=!1,this.btn.interactable=!1},showRedPoint:function(){this.redPoint.node.active=!0},hideRedPoint:function(){this.redPoint.node.active=!1},setBallSpr:function(t){var i=this,e="resources/BallSkin/"+this.skinObj[t].res+".png";cc.loader.load(cc.url.raw(e),function(t,e){t?cc.error("load img error:"+t):(cc.log("load img success"),i.skinSpr.spriteFrame=new cc.SpriteFrame(e))})},click:function(){this.game.skillUpUI.selectSkin(this.skinId)}}),cc._RF.pop()},{}],Spawn:[function(t,e,i){"use strict";cc._RF.push(e,"668c9yb7gtBCaLgPTpG/8wO","Spawn");var a=t("Types").FoeType,s=cc.Class({name:"Spawn",properties:{foeType:{default:a.box,type:a}},ctor:function(){},spawn:function(t){var e=t.requestFoe(this.foeType);return e||(cc.log("max foe count reached"),null)}});e.exports=s,cc._RF.pop()},{Types:"Types"}],SpriteFrameSet:[function(t,e,i){"use strict";cc._RF.push(e,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var a=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});e.exports=a,cc._RF.pop()},{}],TaskIcon:[function(t,e,i){"use strict";cc._RF.push(e,"8559aGrQEFO46EroxabUHUT","TaskIcon"),cc.Class({extends:cc.Component,properties:{spr_bg:cc.Sprite,spr_icon:cc.Sprite,mask_node:cc.Node},onLoad:function(){},start:function(){},init:function(t,e){this.initMaskHeight=this.spr_bg.node.height,this.game=t,this.id=e,this.taskData=this.game.taskObj[e],this.setIcon(this.taskData.taskicon),this.resetProgress()},setIcon:function(t){var i=this,e="resources/TaskIcon/"+t+".png";cc.loader.load(cc.url.raw(e),function(t,e){t?cc.error("load img error:"+t):(cc.log("load img success"),i.spr_icon.spriteFrame=new cc.SpriteFrame(e),i.spr_bg.spriteFrame=new cc.SpriteFrame(e))})},resetProgress:function(){var t=this.game.userData.task[this.id],e=t.num/t.count;t.isComplete&&(e=1),this.mask_node.height=this.initMaskHeight*e}}),cc._RF.pop()},{}],TaskItem:[function(t,e,i){"use strict";cc._RF.push(e,"e8c3fJifYhBMrG2zqB5hx24","TaskItem"),cc.Class({extends:cc.Component,properties:{spr_icon:cc.Sprite,txt_descriptive:cc.Label,line:cc.Sprite,rewardCount:cc.Label,lightNode:cc.Node},start:function(){},setIcon:function(t){var i=this,e="resources/TaskIcon/"+t+".png";cc.loader.load(cc.url.raw(e),function(t,e){t?cc.error("load img error:"+t):(cc.log("load img success"),i.spr_icon.spriteFrame=new cc.SpriteFrame(e))})},setDescriptive:function(t){this.txt_descriptive.string=t},lineActive:function(t){this.line.node.active=t},setRewardCount:function(t){this.rewardCount.string=t},taskFinish:function(){var t=this;this.lightNode.active=!0,this.lightNode.opacity=255,this.lightNode.runAction(cc.sequence(cc.fadeOut(.8),cc.callFunc(function(){t.lightNode.active=!1})))}}),cc._RF.pop()},{}],TaskLogic:[function(t,e,i){"use strict";cc._RF.push(e,"1369amYs3ZKV5BSgAZQzxWQ","TaskLogic");var h=t("Utils"),l=t("UserDataStorage"),a=t("ADUtils");cc.Class({extends:cc.Component,properties:{TxtTitle:cc.Label,TxtTip:cc.Label,TaskItemPrefab:cc.Prefab,ListNode:cc.Node,WaitNode:cc.Node,WaitLabel:cc.Label,adapterNode:cc.Node,TimeStampCD:3},onLoad:function(){},init:function(t){this.game=t},start:function(){},onEnable:function(){this.resetData(),this.setTaskShow(this.taskIdList),this.resetI18nTxt()},resetI18nTxt:function(){this.TxtTitle.string=this.game.i18n.t("taskUITitle"),this.TxtTip.string=this.game.i18n.t("getTaskWatchAD")},resetData:function(){var t=this.game.userData,e=h.getTimeStamp(0);this.taskItemList=[];var i=[];if(0!=t.task.length&&t.task.length)for(var a in this.waitOrList(!1),t.task)"length"!=a&&"remove"!=a&&i.push(t.task[a].id);else t.taskTimeStamp<=e?this.timeUp():this.waitOrList(!0);this.taskIdList=i},timeUp:function(){this.getNewTask(),this.waitOrList(!1)},waitOrList:function(t){this.WaitNode.active=t,this.ListNode.active=!t},updateTaskData:function(t,e){if(this.game.readyUI.TaskActive){for(var i in this.game.userData.task)if("length"!=i){var a=this.game.userData.task[i].tasktype,s=this.game.userData.task[i].id,o=this.game.userData.task[i].target;switch(a){case 1:a==t&&e==o&&(this.game.userData.task[i].num++,this.game.BattleGameUI.resetTaskProgress(s));break;case 2:a==t&&e>this.game.userData.task[i].num&&(this.game.userData.task[i].num=e,this.game.BattleGameUI.resetTaskProgress(s));break;case 3:case 4:a==t&&(this.game.userData.task[i].num++,this.game.BattleGameUI.resetTaskProgress(s))}}this.checkTaskComplete()}},checkTaskComplete:function(){for(var t in this.game.userData.task)"length"!=t&&this.game.userData.task[t].num>=this.game.userData.task[t].count&&(this.game.userData.task[t].isComplete=!0)},awardAndResetTask:function(){var t=this.completeTask();return this.resetLimitTaskProgress(),this.timeStampCheck(t),l.saveData("task"),t},completeTask:function(){var t=[],e=[];for(var i in this.game.userData.task)if("length"!=i&&1==this.game.userData.task[i].isComplete){cc.sys.isNative&&trackEvent_2("MissionSuccessful",String(this.game.userData.task[i].id)),console.log("已完成任务："+this.game.userData.task[i].id);var a=Number(this.game.taskObj[i].reward);t.push(this.game.userData.task[i]),e.push(a),delete this.game.userData.task[i],this.game.userData.task.length--}return t},rewardLottery:function(t){this.game.lotteryUI.extractLotteryMore(t,!1)},resetLimitTaskProgress:function(){for(var t in this.game.userData.task)"length"!=t&&1==this.game.userData.task[t].limit&&(this.game.userData.task[t].num=0)},timeStampCheck:function(t){if(0==this.game.userData.task.length&&0<t.length){var e=h.getTimeStamp(this.TimeStampCD);l.updateTaskTimeStamp(e)}},getNewTask:function(){this.game.userData;for(var t=this.game.taskObj,e=t.length,i=[],a=0;a<e;a++)i[a]=a+1;for(var s=h.getRandomFromArray(i,3),o={length:0},n=0;n<s.length;n++){var c={},r=t[s[n]];c.id=Number(s[n]),c.num=0,c.count=Number(r.count),c.target=Number(r.target),c.limit=Number(r.limit),c.tasktype=Number(r.tasktype),c.isComplete=!1,o[s[n]]=c,o.length++}l.updateTask(o),this.setTaskShow(s),this.taskIdList=s,this.waitOrList(!1)},setTaskShow:function(g){this.node.stopAllActions();for(var p=this,m=this.game.taskObj,f=this.game.userData.task,t=0;t<this.taskItemList.length;t++){var e=this.taskItemList[t],i=cc.spawn(cc.moveBy(.3,cc.v2(-150,0)),cc.fadeOut(.3));e.runAction(cc.sequence(cc.delayTime(.3*t),i))}var a=cc.callFunc(function(){p.ListNode.removeAllChildren(),p.taskItemList=[];for(var t=0;t<g.length;t++){var e=g[t],i=m[e],a=f[e],s=cc.instantiate(p.TaskItemPrefab);s.setPosition(cc.v2(-150,-s.height/2-s.height*t)),s.opacity=0,p.ListNode.addChild(s),p.taskItemList.push(s);var o=cc.spawn(cc.moveBy(.3,cc.v2(150,0)),cc.fadeIn(.3));s.runAction(cc.sequence(cc.delayTime(.3*t),o));var n=s.getComponent("TaskItem");n.setIcon(i.taskicon);var c=Number(a.num),r=Number(a.count),h=Number(i.tasktype),l=Number(i.target),d=Number(i.limit),u=p.getTaskDes(h,l,d,r)+" ("+c+"/"+r+")";n.setDescriptive(u),n.setRewardCount(i.reward),t!=g.length-1&&n.lineActive(!0)}});this.node.runAction(cc.sequence(cc.delayTime(.3*this.taskItemList.length),a))},getTaskDes:function(t,e,i,a){var s="";switch(t){case 1:switch(e){case 1:0==i?s=this.game.i18n.t("impactBox").format(a):1==i&&(s=this.game.i18n.t("impactBoxOnePlay").format(a));break;case 2:0==i?s=this.game.i18n.t("impactTriangle").format(a):1==i&&(s=this.game.i18n.t("impactTriangleOnePlay").format(a));break;case 3:0==i?s=this.game.i18n.t("impactSpring").format(a):1==i&&(s=this.game.i18n.t("impactSpringOnePlay").format(a));break;case 4:0==i?s=this.game.i18n.t("impactSlide").format(a):1==i&&(s=this.game.i18n.t("impactSlideOnePlay").format(a));break;case 5:0==i?s=this.game.i18n.t("impactLeap").format(a):1==i&&(s=this.game.i18n.t("impactLeapOnePlay").format(a));break;case 6:0==i?s=this.game.i18n.t("impactRing").format(a):1==i&&(s=this.game.i18n.t("impactRingOnePlay").format(a))}break;case 2:s=this.game.i18n.t("flyTimeOnePlay").format(a);break;case 3:0==i?s=this.game.i18n.t("smallShoot").format(a):1==i&&(s=this.game.i18n.t("smallShootOnePlay").format(a));break;case 4:0==i?s=this.game.i18n.t("bigShoot").format(a):1==i&&(s=this.game.i18n.t("bigShootOnePlay").format(a))}return s},show:function(){this.node.active=!0,h.layerOpenTransition(this.adapterNode),this.game.readyUI.setTaskRedPoint(!1)},ad:function(){var t=this;if(console.log("ad"),cc.sys.isNative){var e=trackVideoAdsState("Gettask","3");console.log("state:"+e),0==e?a.showVideoAD("Gettask","3",t):1==e?a.loadAndShowVideoAD("Gettask","3",t):2==e?Tip.show(t.game.i18n.t("netError"),.5):3==e&&Tip.show(t.game.i18n.t("otherError"),.5)}else t.adFinish()},adFinish:function(){this.getNewTask(),this.game.watchAd()},close:function(){this.game.readyUI.txtShow(!0),this.node.active=!1},update:function(t){if(this.WaitNode.active){var e=h.getTimeStamp(0),i=this.game.userData.taskTimeStamp-e,a=Math.floor(i/3600);a<10&&(a="0"+a);var s=Math.floor(i%3600/60);s<10&&(s="0"+s);var o=Math.floor(i%60);o<10&&(o="0"+o);var n=a+":"+s+":"+o+" to get new task";this.WaitLabel.string=n,i<=0&&this.timeUp()}}}),cc._RF.pop()},{ADUtils:"ADUtils",UserDataStorage:"UserDataStorage",Utils:"Utils"}],Types:[function(t,e,i){"use strict";cc._RF.push(e,"f6d8bHUJ/RM7aou/jWTkCuj","Types");var a=cc.Enum({Demon:-1,SkeletonKing:-1}),s=cc.Enum({box:-1,triangle:-1,spring:-1,slide:-1,leap:-1,ring:-1,machineBox:-1}),o=cc.Enum({normal:-1,control:-1}),n=cc.Enum({Logo:-1,Ready:-1,Start:-1,Gameing:-1,Over:-1}),c=cc.Enum({Bad:-1,Cool:-1,Great:-1,Amazing:-1});e.exports={BossType:a,FoeType:s,BallState:o,GameState:n,HitLevel:c},cc._RF.pop()},{}],UserDataStorage:[function(t,e,i){"use strict";cc._RF.push(e,"71fdeYuFJ1CyKfxF3WjHWtM","UserDataStorage");var a=new Object;a.UserData={name:"玩家1",currentLanguage:"",bestScore:0,bestScoreHoldCount:0,stage:1,coin:0,selectSkin:1,playTime:0,lastPlayTimeStamp:0,volume:{music:1,sound:1},upgrade:{1:1,2:1,3:1,4:1,5:1,6:1,101:1,102:1,103:1,104:1,105:1,106:1,107:1},upgradeCount:0,task:{},taskTimeStamp:0,machine:{count:0,timeStamp:0,level:1,openCount:0,upAdCount:0,dayOpenCount:0},watchAdCount:0,skin:{1:!0,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1},newSkin:{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1},buff:{1:0,2:0,3:0,4:0},hitCount:0,amazingHitList:[],guide:{hit:!1,smallShoot:!1,skillUp:!1,spring:!1,ring:!1,skin:!1,wallBoss:!1,firstDeath:!1,task:!1},bossHP:3},a.init=function(){for(var t in this.UserData)this.UserData.hasOwnProperty(t)&&this.initTypeData(t)},a.initTypeData=function(t){var e=cc.sys.localStorage.getItem(t);if(null===e){var i=JSON.stringify(this.UserData[t]);cc.sys.localStorage.setItem(t,i)}else{var a=JSON.parse(e),s=!1;if(a[t]instanceof Object)for(var o in a[t]){null!=a[o]?this.UserData[t][o]=a[o]:s=!0}else this.UserData[t]=a;s&&this.saveData(t)}},a.saveData=function(t){var e=JSON.stringify(this.UserData[t]);cc.sys.localStorage.setItem(t,e)},a.updateLanguage=function(t){this.UserData.currentLanguage=t,this.saveData("currentLanguage")},a.updateCoin=function(t){this.UserData.coin=t,this.saveData("coin")},a.updateBestScore=function(t){this.UserData.bestScore=t,this.saveData("bestScore")},a.updateStage=function(t){this.UserData.stage=t,this.saveData("stage")},a.updateBestScoreHoldCount=function(t){this.UserData.bestScoreHoldCount=t,this.saveData("bestScoreHoldCount")},a.updateName=function(t){this.UserData.name=t,this.saveData("name")},a.updateUpgrade=function(t,e){this.UserData.upgrade[t]=e,this.saveData("upgrade")},a.updateUpgradeCount=function(t){this.UserData.upgradeCount=t,this.saveData("upgradeCount")},a.updateSkin=function(t,e){this.UserData.skin[t]=e,this.saveData("skin")},a.updateNewSkin=function(t,e){this.UserData.newSkin[t]=e,this.saveData("newSkin")},a.updateSelectSkin=function(t){this.UserData.selectSkin=t,this.saveData("selectSkin")},a.updatePlayTime=function(t){this.UserData.playTime=t,this.saveData("playTime")},a.updateLastPlayTimeStamp=function(t){this.UserData.lastPlayTimeStamp=t,this.saveData("lastPlayTimeStamp")},a.updateVolume=function(t,e){this.UserData.volume[t]=e,this.saveData("volume")},a.updateTask=function(t){this.UserData.task=t,this.saveData("task")},a.updateTaskTimeStamp=function(t){this.UserData.taskTimeStamp=t,this.saveData("taskTimeStamp")},a.updateMachine=function(t,e){this.UserData.machine[t]=e,this.saveData("machine")},a.updateAdCount=function(t){this.UserData.watchAdCount=t,this.saveData("watchAdCount")},a.updateBuff=function(t,e){this.UserData.buff[t]=e,this.saveData("buff")},a.updateHitList=function(t){this.UserData.hitCount++,5<=this.UserData.amazingHitList.length&&this.UserData.amazingHitList.shift(),this.UserData.amazingHitList.push(t),this.saveData("amazingHitList")},a.updateGuide=function(t,e){this.UserData.guide[t]=e,this.saveData("guide")},a.updateBossHP=function(t){this.UserData.bossHP=t,this.saveData("bossHP")},e.exports=a,cc._RF.pop()},{}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"35619rLCgBIXoSXXd+F7VZF","Utils");var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);-1<e&&this.splice(e,1)},String.prototype.format=function(){if(0==arguments.length)return this;var t=arguments[0],e=this;if("object"==(void 0===t?"undefined":s(t))){for(var i in t)e=e.replace(new RegExp("\\{"+i+"\\}","g"),t[i]);return e}for(var a=0;a<arguments.length;a++)e=e.replace(new RegExp("\\{"+a+"\\}","g"),arguments[a]);return e};var o=new Object;o.debugLog=function(t){console.log(t)},o.deepClone=function t(e){if(e instanceof Array){for(var i=[],a=0;a<e.length;++a)i[a]=t(e[a]);return i}if(e instanceof Function)return i=new Function("return "+e.toString())();if(e instanceof Object){i={};for(var a in e)i[a]=t(e[a]);return i}return e},o.distance2Point=function(t,e){return Math.sqrt(Math.abs((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)))},o.angle2Point=function(t,e){var i=t.x,a=t.y,s=e.x,o=e.y,n=Math.abs(i-s),c=Math.abs(a-o),r=c/Math.sqrt(Math.pow(n,2)+Math.pow(c,2)),h=Math.acos(r);return 180/(Math.PI/h)},o.rate2Point=function(t,e){e.x,t.x,e.y,t.y},o.randomNumBoth=function(t,e){var i=e-t,a=Math.random();return t+Math.round(a*i)},o.getRandomRate=function(t,e){return Math.random()*(e-t)+t},o.getRandomFromArray=function(t,e){for(var i=[];i.length<e;){var a=Math.random()*t.length;i.push(t.splice(a,1)[0])}return i},o.getResultByWeight=function(t){var e=null,i={},a=0;for(var s in t){var o=t[s];0<o.weight&&(a+=o.weight,i[s]=a)}var n=this.randomNumBoth(0,a);for(var s in i){var c=i[s];if(e=t[s],n<=c)break}return e},o.getTimeStamp=function(t){var e,i=new Date,a=i.getTime(),s=6e4*i.getTimezoneOffset(),o=(new Date).getTimezoneOffset()/60;return e=0<o?a-s:a+s,Math.floor((e+36e5*Math.abs(o))/1e3)+60*t},o.getDateByStamp=function(t){var e=new Date(1e3*t),i=e.getFullYear(),a=e.getMonth()+1,s=e.getDate(),o=[];return o[0]=i,o[1]=a,o[2]=s,o},o.isDayNewGame=function(t){var e=o.getTimeStamp(0);if(e<t)return!1;var i=o.getDateByStamp(e),a=o.getDateByStamp(t);return a[0]<i[0]||(a[1]<i[1]||a[2]<i[2])},o.getTheta=function(t){return Math.atan2(t.x,t.y)*(180/Math.PI)},o.layerOpenTransition=function(t){t.scale=0;var e=cc.scaleTo(.3,1).easing(cc.easeBackOut());t.runAction(e)},e.exports=o,cc._RF.pop()},{}],ball:[function(t,e,i){"use strict";cc._RF.push(e,"dfeedivtd9DFpxhP7jBdRw6","ball");var l=t("Types").BallState,d=t("Types").GameState,c=t("Utils"),r=(t("Types").HitLevel,t("UserDataStorage")),s=t("AudioPlayer");cc.Class({extends:cc.Component,properties:{spr:cc.Sprite,aniSpr:cc.Sprite,ImpactPrefab:cc.Prefab,BigImpactPrefab:cc.Prefab,BoomPrefab:cc.Prefab,speedUpAudio:{url:cc.AudioClip,default:null},superSpeedUpAudio:{url:cc.AudioClip,default:null},dashAudio:{url:cc.AudioClip,default:null},superDashAudio:{url:cc.AudioClip,default:null},impulse:{default:cc.v2(600,600),tooltip:"球的基础速度,击打后球的速度以此为基础"},deathSpeed:{default:30,tooltip:"最低速度，低于该速度撞击地面游戏结束"},maxSpeed:{default:600,tooltip:"球的最高速度"},limitSpeedY:2e3,boundEffect1:{default:150,tooltip:"碰到地上的效果参数1"},boundEffect2:{default:1e3,tooltip:"碰到地上的效果参数2"}},onLoad:function(){this.alive=!0;var t=this.node.getComponent(cc.RigidBody);this.body=t,this.initPos=this.node.position,this.speedX=0,this.preX=this.initPos.x,this.shootCD=!0,this.shootState=!1,this.bigShootState=0,this.flyTime=0,this.up=!1,this.hitLevelSpeedY={Bad:1600,Cool:1800,Great:2e3,Amazing:2200}},readyHit:function(){var t=this.game.BattleGameUI.baseball.showBall.position;this.setPosAndHide(t),this.resetStage(),this.game.userData.guide.hit||this.game.BattleGameUI.setPowerClose(!0)},resetStage:function(){this.node.position=this.initPos,this.speedX=0,this.shootCD=!0,this.shootState=!1,this.bigShootState=0,this.up=!1,this.body.linearVelocity=cc.v2(0,0),this.ballState(l.normal)},resetSkin:function(){var i=this;this.userData=this.game.userData;var t=this.userData.selectSkin,e="resources/BallSkin/"+this.game.skinObj[t].res+".png";cc.loader.load(cc.url.raw(e),function(t,e){t?cc.error("load img error:"+t):(cc.log("load img success"),i.spr.spriteFrame=new cc.SpriteFrame(e))})},resetInitImpulse:function(){this.userData=this.game.userData;var t=Number(this.game.upgradeObj[1][this.userData.upgrade[1]].effect);this.impulse=cc.v2(t,this.hitLevelSpeedY.Bad)},resetMaxSpeed:function(){var t=Number(this.game.upgradeObj[2][this.game.userData.upgrade[2]].effect);this.maxSpeed=t},resetLimitSpeedY:function(){},resetSpeedAmendEffect:function(){},start:function(){this.setLinearVelocity(this.impulse,this.body.getWorldCenter()),this.ballState(l.normal),this.powerCount=0,this.injureState=!1},init:function(t){this.game=t},ballState:function(t,e){(this.state=t)==l.control&&(this.controlObj=e)},getBallShootState:function(){return this.shootState},getBigBallShootState:function(){return this.bigShootState},hide:function(){this.node.getComponent(cc.Sprite).enabled=!1},show:function(){this.node.getComponent(cc.Sprite).enabled=!0},stop:function(){this.closeBody(),this.stopAction()},stopAction:function(){this.body.linearVelocity=cc.v2(0,0),this.body.angularVelocity=0},closeBody:function(){var t=cc.callFunc(function(){this.body.active=!1},this);this.node.runAction(t)},openBody:function(){var t=cc.callFunc(function(){this.body.active=!0},this);this.node.runAction(t)},setPos:function(t){var e=this.body.linearVelocity;this.body.linearVelocity=cc.v2(0,0);var i=cc.callFunc(function(){this.body.linearVelocity=e},this);this.node.runAction(cc.sequence(cc.moveTo(0,t),i))},setPosAndHide:function(t){this.body.linearVelocity=cc.v2(0,0);var e=cc.callFunc(function(){this.node.active=!1},this);this.node.runAction(cc.sequence(cc.moveTo(0,t),e))},hitStart:function(t,e){if(this.node.active=!0,cc.sys.isNative){var i=this.game.userData.playTime+1;trackEvent_2("EnterStage",String(i))}this.alive=!0,this.state=l.normal,this.powerCount=0,this.amazingShoot=e,this.useRevive=!1,this.limitSpeedYActive=!1;var a=t;if(this.game.BattleGameUI.haveSpeedBuff&&(a.x=1.3*a.x),this.setLinearVelocity(a),this.amazingShoot){this.getComponent(cc.Animation).play("risespeed");var s=this.getLinearVelocity(),o=c.getTheta(cc.p(s.x,s.y));this.aniSpr.node.rotation=o}this.spr.node.scale=.3,this.injure(!1),r.updatePlayTime(this.game.userData.playTime+1);var n=c.getTimeStamp(0);r.updateLastPlayTimeStamp(n)},injure:function(t){this.injureState=t},addImpulse:function(t){this.body&&1==this.body.active&&this.body.applyLinearImpulse(t,this.body.getWorldCenter())},setLinearVelocity:function(t){this.body&&1==this.body.active&&(this.body.linearVelocity=t)},getLinearVelocity:function(){return this.body&&1==this.body.active?this.body.linearVelocity:null},death:function(){var t=this;this.body.linearVelocity=cc.v2(0,0),(this.body.angularVelocity=0)<this.game.userData.buff[4]&!this.useRevive?(this.useRevive=!0,this.game.BattleGameUI.costBuffAct(4)):(this.alive=!1,this.game.BattleGameUI.setSpeed(0),1==this.game.BattleGameUI.getIsGetMachineBox()?(this.game.setGameState(d.Over),this.game.clearAllFoes(),this.game.showGameOverMachine(function(){t.game.goToOver()})):t.game.goToOver())},speedAmend:function(t){var e=this.getLinearVelocity(),i=e.y,a=e.x;if((i=.8*Math.abs(i))<600&&(i=600),!this.shootState&&1!=this.bigShootState&&t){this.game.BattleGameUI.speedDown();var s=Number(this.game.upgradeObj[6][this.game.userData.upgrade[6]].effect),o=this.boundEffect1*(1+parseInt(this.getStageRunDistance()/this.boundEffect2))-s;o<0&&(o=0),a=.95*a-o,this.game.gameState!=d.Logo&&this.game.gameState!=d.Ready||(a=1e3)}a<0&&(a=0),this.setLinearVelocity(cc.v2(a,i))},rebound:function(t){var e=this.body.linearVelocity;this.body.linearVelocity=cc.v2(e.x,Math.abs(e.y)*t)},undateCollider:function(t){this.node.getComponent(cc.PhysicsCircleCollider).active=t},getSpeedX:function(){return this.speedX},getRunDistance:function(){var t=parseInt((this.node.x-this.initPos.x)/32);return t<0&&(t=0),t},getStageRunDistance:function(){return parseInt(this.getRunDistance()+this.game.BattleGameUI.minDistance)},getDistance:function(t){return this.initPos.x+32*t},smallShoot:function(){if(this.alive&&this.shootCD){console.log("小冲刺"),s.playSound(this.speedUpAudio),this.ms=!0,this.shootCD=!1,this.shootState=!0;var t=this.getLinearVelocity();this.setLinearVelocity(cc.v2(t.x,-3e3)),this.game.BattleGameUI.powerBar.useGrid(),this.playSmallShootAni(),this.game.taskUI.updateTaskData(3)}},playSmallShootAni:function(){this.getComponent(cc.Animation).play("shoot");var t=this.getLinearVelocity(),e=c.getTheta(cc.p(t.x,t.y))+180;this.aniSpr.node.rotation=e},stopShootAni:function(){this.aniSpr.node.active=!1,this.getComponent(cc.Animation).stop("shoot")},impactAni:function(t){this.game.gameState==d.Gameing&&s.playSound(this.dashAudio);var e=cc.instantiate(this.ImpactPrefab);e.setPosition(t),this.game.root.node.getChildByName("aniLayer").addChild(e);var i=e.getComponent(cc.Animation).getAnimationState("impact").clip.duration;e.getComponent(cc.Animation).play("impact"),this.scheduleOnce(function(){e.removeFromParent(),e.destroy()},i)},bigImpactAni:function(t){s.playSound(this.superDashAudio),this.getComponent(cc.Animation).stop("bigShoot"),this.aniSpr.node.active=!1,this.aniSpr.node.rotation=0,this.game.changeBgColorAndWhite(),this.game.flyAndDieAllFoes(),this.game.cameraShake(),this.game.taskUI.updateTaskData(4),this.bigShootState=2;var e=cc.instantiate(this.BigImpactPrefab);e.setPosition(t),this.game.root.node.getChildByName("aniLayer").addChild(e);var i=e.getComponent(cc.Animation).getAnimationState("bigImpact").clip.duration,a=cc.director.getScheduler().getTimeScale();e.getComponent(cc.Animation).play("bigImpact"),this.game.BattleGameUI.enterBossStage&&this.game.BattleGameUI.wallBoss.reduceHp(),this.scheduleOnce(function(){this.bigShootState=0,e.removeFromParent(),e.destroy(),this.game.BattleGameUI.setPowerClose(!1)},i*(1/a))},reviveAni:function(t){var e=cc.instantiate(this.BoomPrefab);e.setPosition(t),this.game.root.node.getChildByName("aniLayer").addChild(e);var i=e.getComponent(cc.Animation).getAnimationState("revive").clip.duration;e.getComponent(cc.Animation).play("revive"),this.scheduleOnce(function(){e.removeFromParent(),e.destroy()},i)},bigShoot:function(){s.playSound(this.superSpeedUpAudio),this.aniSpr.node.active=!0,this.bigShootState=1,this.getComponent(cc.Animation).play("bigShoot")},rotate:function(t,e){if(!this.game.isPause){var i=cc.director.getScheduler().getTimeScale();this.spr.node.runAction(cc.rotateTo(t*(1/i),e))}},topTimeKeep:function(){var i=this,t=i.getLinearVelocity();i.top?this.setLinearVelocity(cc.v2(t.x,this.limitSpeedY)):(i.top=!0,this.setLinearVelocity(cc.v2(t.x,this.limitSpeedY)),this.game.stopBgColorAndBlack(2),this.game.BattleGameUI.setPowerClose(!0),this.scheduleOnce(function(){i.top=!1;var t=i.getLinearVelocity();i.node.y=2.5*cc.winSize.height,i.setLinearVelocity(cc.v2(t.x+500,-2e3)),t=i.getLinearVelocity();var e=c.getTheta(cc.p(t.x,t.y))+180;i.aniSpr.node.rotation=e,i.bigShoot()},2.1))},onBeginContact:function(t,e,i){var a=cc.p(e.node.x,e.node.y-e.node.height/2);if(0==this.limitSpeedYActive&&"leap"!=i.node.tag&&(this.limitSpeedYActive=!0),"bound"==i.node.group){var s=this.body.linearVelocity;if(0==this.alive?this.stop():this.state==l.normal?(this.speedAmend(!0),this.impactAni(a),this.injure(!0)):this.speedAmend(!1),1==this.getBallShootState()&&(this.stopShootAni(),this.game.cameraShake()),1==this.alive&&1==this.bigShootState&&this.bigImpactAni(a),s.x<=this.deathSpeed&&this.alive&&this.state==l.normal&&this.game.gameState==d.Gameing&&0==this.bigShootState&&0==this.getBallShootState()&&this.death(),this.game.gameState==d.Gameing){var o=Number(this.flyTime.toFixed(2));this.game.taskUI.updateTaskData(2,o)}this.flyTime=0}if(this.game.gameState==d.Gameing){var n=this.game.background,c=n.getComponent("world").groundPrefab.data,r=c.getComponent(cc.PhysicsBoxCollider).size.height,h=n.node.y+c.y+r+this.node.height/2+100;"foe"==i.node.group&&i.node.y<h?t.disabled=!0:(this.shootCD=!0,this.shootState=!1)}this.getBallShootState()&&this.stopShootAni()},update:function(t){if(!this.game.isPause){if(this.speedX=this.node.position.x-this.preX,this.preX=this.node.position.x,this.game.gameState==d.Logo||this.game.gameState==d.Ready||this.game.gameState==d.Over){var e=this.body.linearVelocity;e.y>this.limitSpeedY&&(e.y=this.limitSpeedY),this.setLinearVelocity(cc.v2(e.x,e.y))}if(this.body&&1==this.body.active&&(this.game.gameState==d.Start||this.game.gameState==d.Gameing)){var i=this.body.linearVelocity,a=parseInt(i.x);if(this.state==l.control&&this.controlObj&&(a=parseInt(this.controlObj.node.getComponent(cc.RigidBody).linearVelocity.x)),this.game.BattleGameUI.setSpeed(a),this.game.BattleGameUI.distance.setProgress(this.getRunDistance()),this.game.gameState==d.Gameing){0==this.userData.guide.smallShoot&&i.y<=0&&(this.game.BattleGameUI.setPowerClose(!1),this.game.guideUI.showTapTip("smallShoot"),r.updateGuide("smallShoot",!0)),this.flyTime+=t,this.game.BattleGameUI.setRunDistance(this.node.x),this.limitSpeedYActive&&i.y>this.limitSpeedY&&(i.y=this.limitSpeedY),this.amazingShoot&&(this.aniSpr.node.scale=this.spr.node.scale),this.amazingShoot&&i.y<200&&(this.aniSpr.node.scale=1,this.aniSpr.node.active=!1,this.amazingShoot=!1,this.getComponent(cc.Animation).stop("risespeed")),a>this.maxSpeed&&(i.x-=1),i.x<0&&(i.x=0),this.setLinearVelocity(cc.v2(i.x,i.y)),this.node.y>=2.5*cc.winSize.height+this.node.height/2&&this.topTimeKeep();var s=cc.director.getScheduler().getTimeScale();this.injureState?this.spr.node.rotation+=10*s:0<i.y?0==this.up&&(this.rotate(.1,315),this.up=!0):1==this.up&&(this.rotate(.1,45),this.up=!1)}}}}}),cc._RF.pop()},{AudioPlayer:"AudioPlayer",Types:"Types",UserDataStorage:"UserDataStorage",Utils:"Utils"}],"camera-control":[function(t,e,i){"use strict";cc._RF.push(e,"5f1ef7Z6/5CfJDY8bXWaYbH","camera-control");var d=t("Types").GameState;cc.Class({extends:cc.Component,properties:{target:{default:null,type:cc.Node},landformPrefab:cc.Prefab},onLoad:function(){this.camera=this.getComponent(cc.Camera),this.iswatch=!1,this.move=!1,this.offsetPos=cc.v2(400,0),this.watchZoom=1.5},init:function(t){this.game=t},initPos:function(){this.node.position=cc.p(cc.winSize.width/2,cc.winSize.height/2)},onEnable:function(){cc.director.getPhysicsManager().attachDebugDrawToCamera(this.camera)},onDisable:function(){cc.director.getPhysicsManager().detachDebugDrawFromCamera(this.camera)},watch:function(t){this.iswatch=!0;var e=t.convertToWorldSpaceAR(cc.Vec2.ZERO),i=this.node.parent.convertToNodeSpaceAR(e);this.node.position=cc.p(i.x+200,i.y+100)},goTarget:function(){this.move=!0},update:function(t){if(!this.game.isPause){var e=this.target.convertToWorldSpaceAR(cc.Vec2.ZERO),i=this.node.parent.convertToNodeSpaceAR(e);this.iswatch&&this.camera.zoomRatio<this.watchZoom&&(this.camera.zoomRatio+=.03,this.camera.zoomRatio>this.watchZoom&&(this.camera.zoomRatio=this.watchZoom)),!this.iswatch&&1<this.camera.zoomRatio&&(this.camera.zoomRatio-=.01,this.camera.zoomRatio<1&&(this.camera.zoomRatio=1));var a=this.target.getComponent("ball"),s=a.getSpeedX();if(this.move){s<0&&(s=0);var o=i.x+this.offsetPos.x,n=i.y+this.offsetPos.y;if(o>this.node.x){var c=o-this.node.x;2<c?this.node.x+=s+2:1<c&&(this.node.x+=s+1)}return this.node.y=n,a.spr.node.scale<1?a.spr.node.scale=2-this.camera.zoomRatio:a.spr.node.scale=1,o<this.node.x&&(this.move=!1),this.node.position.y<cc.winSize.height/2/this.camera.zoomRatio&&(this.node.position=cc.v2(this.node.position.x,cc.winSize.height/2/this.camera.zoomRatio)),this.node.position.y<cc.winSize.height/2&&(this.node.position=cc.v2(this.node.position.x,cc.winSize.height/2)),void(this.node.position.y>2.5*cc.winSize.height&&(this.node.position=cc.v2(this.node.position.x,2.5*cc.winSize.height)))}if(this.game.getGameState()!=d.Start){var r=1+.5*(.5-(e.y-cc.winSize.height)/cc.winSize.height);1<r?r=1:r<.6&&(r=.6),this.camera.zoomRatio=r,this.node.position=cc.p(i.x+this.offsetPos.x/this.camera.zoomRatio,i.y+this.offsetPos.y-this.offsetPos.y*(1-r)),1==this.game.ball.bigShootState?(this.bigShootTime++,this.node.position=cc.p(this.node.position.x-10*this.bigShootTime,this.node.position.y)):0<this.bigShootTime?(this.bigShootTime--,this.node.position=cc.p(this.node.position.x-10*this.bigShootTime,this.node.position.y)):this.bigShootTime=0;if(1==this.game.ball.ringstage)if(1==this.game.ball.ringSpeedUp)this.ringShootTime+=10,this.node.position=cc.p(this.node.position.x-1*this.ringShootTime,this.node.position.y),this.ringOffset=1*this.ringShootTime;else if(0<this.ringShootTime){var h=0;h=500<1*this.ringShootTime?12:300<1*this.ringShootTime?6:3,this.ringOffset-=h,this.node.position=cc.p(this.node.position.x-this.ringOffset,this.node.position.y),this.ringShootTime-=h}else this.ringShootTime=0;else 0<this.ringShootTime?(this.ringOffset-=10,this.node.position=cc.p(this.node.position.x-this.ringOffset,this.node.position.y),this.ringShootTime-=10):this.ringShootTime=0;this.node.position.y<cc.winSize.height/2&&(this.node.position=cc.v2(this.node.position.x,cc.winSize.height/2));var l=cc.winSize.height*(1-r)+35+this.target.height/2;this.node.position.y>2.5*cc.winSize.height-l&&(this.node.position=cc.v2(this.node.position.x,2.5*cc.winSize.height-l))}}}}),cc._RF.pop()},{Types:"Types"}],en:[function(t,e,i){"use strict";cc._RF.push(e,"4221bammGBCxolvOq2W1uci","en"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.en={clickStar:"Click Start",challengeDistance:"To fly farther",deathSpeedTip:"Slow down can cause the game to end",springGuideTitle:"Spring is coming",springGuideContent:"Spring helps you get a higher speed by bouncing back and forth",machineGuideTitle:"Let's try some luck.",machineGuideContent:"There's a lot of powerful props inside.",ringGuideTitle:"Rolling wheels",ringGuideContent:"The faster you click, the faster you run.",taskGuideTitle:"Task Open",taskGuideContent:"Win the prize by completing the challenge",hitBarGuideContent:"Click Closer to center speed faster",betScore:"Best",setUITitle:"SETTING",taskUITitle:"TASK",getTaskWatchAD:"watch asd to get new task",machineUITitle:"Gift",machineTip:"Watch video to upgrade rewards",machineAdOpen:"Watch ads to get rewards",canOpen:"can open",skill1:"Power",skill2:"Max Speed",skill3:"More Gold",skill4:"Dash Times",skill5:"Increase In Bounce",skill6:"Friction Reduction",skill101:"Square Killer",skill102:"Triangle failure",skill103:"Trampoline Promotion",skill104:"Skateboard Promotion",skill105:"Spring strengthening",skill106:"Ring Promotion",skill107:"Drum Promotion",ready:"Ready",go:"Go",bad:"Bad",cool:"Cool",great:"Great",amazing:"Amazing",tapToContinue:"Tap to Continue",superDash:"Super Dash",destroy:"Destroy",change:"change",tap:"TAP",quickTap:"Tap Tap Tap",coin:"gold\n{0}",newSkin:"new skin",buffUpSpeed:"Get 1.3 times times the initial speed in the next game",buffPower:"3 additional Sprint opportunities in the next games",buffCoin:"Twice Times Gold prize in the next games",buffRevive:"Get an extra acceleration when you fail in the next game",impactBox:"Hit a square of {0}",impactTriangle:"Impact Triangle {0}",impactSpring:"Impact Spring {0}",impactLeap:"Impact Trampoline {0}",impactSlide:"Impact Ellipse {0}",impactRing:"Impact Ring {0}",smallShoot:"Use sprint {0} times",bigShoot:"Triggering {0} Super Sprints",impactBoxOnePlay:"Hit a square {0} in one play",impactTriangleOnePlay:"Hit a triangle {0} in one play",impactSpringOnePlay:"Hit a spiral {0} in one play",impactLeapOnePlay:"Hit a straight {0} in one play",impactSlideOnePlay:"Hit a ellipse {0} in one play",impactRingOnePlay:"Hit a ring {0} in one play",flyTimeOnePlay:"Not touching the ground for {0} seconds.",smallShootOnePlay:"Use sprint {0} times in one play",bigShootOnePlay:"Triggering {0} Super Sprints in one play",highestLevel:"Already the highest level",lackCoin:"Coins are not enough",netError:"Network error, please try again later",otherError:"Other error, please try again later",lvName:"LV:{0}",icon_effect_1:"increase initial speed",icon_effect_2:"increase maximum speed",icon_effect_3:"Increase the speed of gold coins",icon_effect_4:"increase the initial value of the sprint",icon_effect_5:"increase the maximum Y direction speed of the sphere",icon_effect_6:"reduce the impact of impact on the ground",icon_effect_101:"Reduce impact slowdown",icon_effect_102:"Reduce impact deceleration effect",icon_effect_103:"Increase the acceleration obtained after impacting the trampoline",icon_effect_104:"Increase the acceleration obtained after hitting the skateboard",icon_effect_105:"Acceleration obtained after lifting the impact spring",icon_effect_106:"Acceleration obtained after lifting the impact ring",icon_effect_107:"Accelerate the acceleration after hitting the drum",max:"Max",stage:"stage",clear:"clear",level:"level",up:"up"},cc._RF.pop()},{}],"physics-bound":[function(t,e,i){"use strict";cc._RF.push(e,"8bb59G9YJZM663ZrZZZSww8","physics-bound"),cc.Class({extends:cc.Component,properties:{size:cc.size(0,0),mouseJoint:!0},onLoad:function(){var t=this.size.width||this.node.width,e=this.size.height||this.node.height,i=new cc.Node;(i.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static,this.mouseJoint)&&(i.addComponent(cc.MouseJoint).mouseRegion=this.node);this._addBound(i,0,e/2,t,20),this._addBound(i,0,-e/2,t,20),this._addBound(i,-t/2,0,20,e),this._addBound(i,t/2,0,20,e),i.parent=this.node},_addBound:function(t,e,i,a,s){var o=t.addComponent(cc.PhysicsBoxCollider);o.offset.x=e,o.offset.y=i,o.size.width=a,o.size.height=s}}),cc._RF.pop()},{}],"physics-settings":[function(t,e,i){"use strict";cc._RF.push(e,"9d86a1b/aNL8JDqJ7+E0XIU","physics-settings");var a=cc.director.getPhysicsManager();a.enabled=!0,a.debugDrawFlags=0,cc._RF.pop()},{}],"polyglot.min":[function(t,e,i){"use strict";cc._RF.push(e,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min");var a,s,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};a=void 0,s=function(e){function t(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en",this.allowMissing=!!t.allowMissing,this.warn=t.warn||i}function s(t,e,i){var a,s,o,n,c,r,h;return null!=i&&t?(o=(s=t.split(l))[(n=e,c=i,d[(r=n,h=function(t){var e,i,a,s={};for(e in t)if(t.hasOwnProperty(e))for(a in i=t[e])s[i[a]]=e;return s}(u),h[r]||h.en)](c))]||s[0],a=o.replace(/^\s+|\s+$/g,"")):a=t,a}function i(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}t.VERSION="0.4.3",t.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},t.prototype.extend=function(t,e){var i;for(var a in t)t.hasOwnProperty(a)&&(i=t[a],e&&(a=e+"."+a),"object"==(void 0===i?"undefined":o(i))?this.extend(i,a):this.phrases[a]=i)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(t){this.clear(),this.extend(t)},t.prototype.t=function(t,e){var i,a;return"number"==typeof(e=null==e?{}:e)&&(e={smart_count:e}),"string"==typeof this.phrases[t]?i=this.phrases[t]:"string"==typeof e._?i=e._:this.allowMissing?i=t:(this.warn('Missing translation for key: "'+t+'"'),a=t),"string"==typeof i&&(e=function(t){var e={};for(var i in t)e[i]=t[i];return e}(e),a=function(t,e){for(var i in e)"_"!==i&&e.hasOwnProperty(i)&&(t=t.replace(new RegExp("%\\{"+i+"\\}","g"),e[i]));return t}(a=s(i,this.currentLocale,e.smart_count),e)),a},t.prototype.has=function(t){return t in this.phrases};var l="||||",d={chinese:function(t){return 0},german:function(t){return 1!==t?1:0},french:function(t){return 1<t?1:0},russian:function(t){return t%10==1&&t%100!=11?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2},czech:function(t){return 1===t?0:2<=t&&t<=4?1:2},polish:function(t){return 1===t?0:2<=t%10&&t%10<=4&&(t%100<10||20<=t%100)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},u={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t},"function"==typeof define&&define.amd?define([],function(){return s(a)}):"object"==(void 0===i?"undefined":o(i))?e.exports=s(a):a.Polyglot=s(a),cc._RF.pop()},{}],skillUpItem:[function(t,e,i){"use strict";cc._RF.push(e,"e5dc4h1gUhK2IP7uaCWDwWH","skillUpItem"),cc.Class({extends:cc.Component,properties:{upSpr:cc.Sprite,lvProgress:cc.ProgressBar,redPoint:cc.Sprite,nogetNode:cc.Node,getNode:cc.Node,noOkBg:cc.Node,okBg:cc.Node},onLoad:function(){},init:function(t){this.game=t,this.userData=this.game.userData,this.btn=this.node.getComponent(cc.Button)},start:function(){},resetProperty:function(t){this.setId(t),this.setBallSpr(),this.skillLv()},setId:function(t){this.type=t},setRedPointActive:function(t){this.redPoint.node.active=t},select:function(){this.btn.interactable=!1,this.nogetNode.active=!1,this.getNode.active=!0,this.noOkBg.active=!1,this.okBg.active=!0},noselect:function(){this.nogetNode.active=!1,this.getNode.active=!0,this.okBg.active=!1,this.noOkBg.active=!0,this.btn.interactable=!0},noget:function(){this.nogetNode.active=!0,this.getNode.active=!1,this.btn.interactable=!1},setBallSpr:function(){var t,e=this.type,i=this;t="resources/SkillUpIcon/"+this.game.upgradeObj[e][1].res+".png",cc.loader.load(cc.url.raw(t),function(t,e){t?cc.error("load img error:"+t):(cc.log("load img success"),i.upSpr.spriteFrame=new cc.SpriteFrame(e))})},skillLv:function(){var t=this.type,e=this.game.userData.upgrade[t],i=this.game.upgradeObj[t].length;this.lvProgress.progress=e/i},up:function(){this.game.skillUpUI.Choice(this.type)}}),cc._RF.pop()},{}],tipLabel:[function(t,e,i){"use strict";cc._RF.push(e,"b1cfdWAlStDuI/6ftnPI3Sa","tipLabel"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},showTip:function(t){this.node.active=!0;var e=cc.callFunc(function(){this.node.active=!1},this);this.node.runAction(cc.moveBy(.3,0,30),e)}}),cc._RF.pop()},{}],wallBoss:[function(t,e,i){"use strict";cc._RF.push(e,"d8528hIMnNDm5ZxS0ihfHKn","wallBoss");var a=t("UserDataStorage");cc.Class({extends:cc.Component,properties:{wall1:cc.Node,wall2:cc.Node,wall3:cc.Node,destroyEffect:cc.Prefab},init:function(t){this.game=t},start:function(){},showBoss:function(t){var e=this;this.active=!0;var i=this.node.getComponent(cc.Animation).getAnimationState("boss1Show").clip.duration;this.node.getComponent(cc.Animation).play("boss1Show");var a=t;return this.hp=3,e.scheduleOnce(function(){e.node.getComponent(cc.Animation).play("boss1Wait"),1==a?(e.reduceHp(),e.reduceHp()):2==a&&e.reduceHp()},i),i},killFoe:function(){this.game.allDeathUnlessControl()},reduceHp:function(){var t=this;this.hp<=0||(3==this.hp?(this.wallDestroy(this.wall1),this.wall1.active=!1):2==this.hp?(this.wallDestroy(this.wall2),this.wall2.active=!1):1==this.hp&&(this.wallDestroy(this.wall3),this.wall3.active=!1),this.hp--,a.updateBossHP(this.hp),this.game.pause(null,!0),this.scheduleOnce(function(){t.game.resume(),0==t.hp&&t.game.BattleGameUI.bossChallengeSuccess()},1))},wallDestroy:function(t){var e=t.position,i=cc.instantiate(this.destroyEffect);i.setPosition(e),i.rotation=45,this.node.addChild(i);var a=i.getComponent(cc.Animation).getAnimationState("revive").clip.duration;i.getComponent(cc.Animation).play("revive"),this.scheduleOnce(function(){i.removeFromParent(),i.destroy()},a)},bgBlack:function(){this.game.stopBgColorAndBlack(1)}}),cc._RF.pop()},{UserDataStorage:"UserDataStorage"}],world:[function(t,e,i){"use strict";cc._RF.push(e,"0ff6cw6CYdJAZy972KUmyDy","world"),cc.Class({extends:cc.Component,properties:{target:cc.Node,groundPrefab:cc.Prefab,wallPrefab:cc.Prefab},onLoad:function(){this.bgIndex=1,this.maxBgCount=4,this.init()},start:function(){},init:function(){if(!this.ground_1){var t=cc.instantiate(this.groundPrefab);this.ground_1=t,this.node.addChild(this.ground_1)}if(this.ground_1.setPosition(cc.v2(0,0)),!this.ground_2){var e=cc.instantiate(this.groundPrefab);this.ground_2=e,this.node.addChild(this.ground_2)}if(this.ground_2.setPosition(cc.v2(this.ground_1.width,0)),!this.wall_1){var i=cc.instantiate(this.wallPrefab);this.wall_1=i,this.node.addChild(this.wall_1)}if(this.wall_1.setPosition(cc.v2(0,this.ground_1.y+this.ground_1.height)),!this.wall_2){var a=cc.instantiate(this.wallPrefab);this.wall_2=a,this.node.addChild(this.wall_2)}this.wall_2.setPosition(cc.v2(this.wall_1.width,this.ground_2.y+this.ground_2.height))},resetBg:function(){var o=this,t="resources/GameBG/game_bg"+o.bgIndex+".png";cc.loader.load(cc.url.raw(t),function(t,e){if(t)cc.error("load img error:"+t);else{cc.log("load img success");var i=o.wall_1.getComponent(cc.Sprite),a=o.wall_2.getComponent(cc.Sprite),s=new cc.SpriteFrame(e);i.spriteFrame=s,a.spriteFrame=s}}),o.bgIndex<this.maxBgCount?o.bgIndex++:o.bgIndex=1},update:function(t){this.target.x>this.ground_1.x+this.ground_1.width&&(this.ground_1.x=this.ground_2.x+this.ground_2.width),this.target.x>this.ground_2.x+this.ground_2.width&&(this.ground_2.x=this.ground_1.x+this.ground_1.width),this.target.x<this.ground_1.x-this.ground_1.width&&(this.ground_1.x=this.ground_2.x-this.ground_2.width),this.target.x<this.ground_2.x-this.ground_2.width&&(this.ground_2.x=this.ground_1.x-this.ground_1.width),this.target.x>this.wall_1.x+this.wall_1.width&&(this.wall_1.x=this.wall_2.x+this.wall_2.width),this.target.x>this.wall_2.x+this.wall_2.width&&(this.wall_2.x=this.wall_1.x+this.wall_1.width),this.target.x<this.wall_1.x-this.wall_1.width&&(this.wall_1.x=this.wall_2.x-this.wall_2.width),this.target.x<this.wall_2.x-this.wall_2.width&&(this.wall_2.x=this.wall_1.x-this.wall_1.width)}}),cc._RF.pop()},{}],zh_cn:[function(t,e,i){"use strict";cc._RF.push(e,"1b88axrJrdE0Y8veGN0BKIA","zh_cn"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.zh_cn={clickStar:"点击开始",challengeDistance:"挑战更远的飞行距离",deathSpeedTip:"速度降低会导致游戏结束",springGuideTitle:"弹簧来了",springGuideContent:"通过数次跳跃，帮助你获得更高速度",machineGuideTitle:"来试试你的运气吧",machineGuideContent:"里面有很多强力道具哦",ringGuideTitle:"车轮滚滚",ringGuideContent:"点得越快，跑得越快",taskGuideTitle:"任务开启啦",taskGuideContent:"完成挑战赢得奖励",hitBarGuideContent:"越靠近中心区域，击球速度越快",betScore:"记录",setUITitle:"设置",taskUITitle:"任务",getTaskWatchAD:"观看广告获取新任务",machineUITitle:"扭蛋机",machineTip:"观看广告提升扭蛋机奖励金币",machineAdOpen:"观看广告获取奖励",canOpen:"获取奖励",skill1:"力量",skill2:"最大速度",skill3:"金币获取",skill4:"冲刺次数",skill5:"弹跳力增大",skill6:"摩擦力减小",skill101:"正方形强化",skill102:"三角形强化",skill103:"蹦床强化",skill104:"滑板强化",skill105:"弹簧强化",skill106:"圆环强化",skill107:"圆桶强化",ready:"准备",go:"开始",bad:"一般",cool:"很好",great:"真棒",amazing:"精准打击",tapToContinue:"点击继续",superDash:"超级冲刺",destroy:"消灭",change:"颜色变化",tap:"点击",quickTap:"快速点击",coin:"金币\n{0}",newSkin:"新皮肤",buffUpSpeed:"在下次游戏中获得1.3倍初始速度",buffPower:"在下回合游戏中额外获得3次冲刺机会",buffCoin:"在下回合游戏中获得2倍金币奖励",buffRevive:"在下回合游戏中失败时获得一次额外的加速",impactBox:"消灭方形{0}个",impactTriangle:"消灭三角形{0}个",impactSpring:"消灭弹簧{0}个",impactLeap:"消灭蹦床{0}个",impactSlide:"消灭椭圆{0}个",impactRing:"消灭圆环{0}个",smallShoot:"使用{0}次小冲刺",bigShoot:"触发{0}次大冲刺",impactBoxOnePlay:"在一次游戏中消灭方形{0}个",impactTriangleOnePlay:"在一次游戏中消灭三角形{0}个",impactSpringOnePlay:"在一次游戏中消灭螺旋形{0}个",impactLeapOnePlay:"在一次游戏中消灭直线{0}个",impactSlideOnePlay:"在一次游戏中消灭椭圆{0}个",impactRingOnePlay:"在一次游戏中消灭圆环{0}个",flyTimeOnePlay:"不接触地面持续{0}秒",smallShootOnePlay:"在一次游戏中使用小冲刺{0}次",bigShootOnePlay:"在一次游戏中触发大冲刺{0}次",highestLevel:"已经是最高等级",lackCoin:"金币不足",netError:"网络错误，请稍后再试",otherError:"其他错误，请稍后再试",lvName:"等级:{0}",icon_effect_1:"提升初始速度",icon_effect_2:"提升最大速度",icon_effect_3:"提升金币获取速度",icon_effect_4:"增加冲刺初始值",icon_effect_5:"提升球体最大Y方向速度",icon_effect_6:"降低撞击地面减速效果",icon_effect_101:"降低撞击减速效果",icon_effect_102:"降低撞击减速效果",icon_effect_103:"提升撞击蹦床后获得的加速",icon_effect_104:"提升撞击滑板后获得的加速",icon_effect_105:"提升撞击弹簧后获得的加速",icon_effect_106:"提升撞击圆环后获得的加速",icon_effect_107:"提升撞击圆桶后获得的加速",max:"最大",stage:"顺利",clear:"通关",level:"难度",up:"提升"},cc._RF.pop()},{}],zh_tw:[function(t,e,i){"use strict";cc._RF.push(e,"dc764qoZzxG/JJowUc39LGb","zh_tw"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.zh_tw={clickStar:"點擊開始",challengeDistance:"挑戰更遠的飛行距離",deathSpeedTip:"速度降低會導致遊戲結束",springGuideTitle:"彈簧來了",springGuideContent:"通過數次跳躍，説明你獲得更高速度",machineGuideTitle:"來試試你的運氣吧",machineGuideContent:"裡面有很多強力道具哦",ringGuideTitle:"車輪滾滾",ringGuideContent:"點得越快，跑得越快",taskGuideTitle:"任務開啟啦",taskGuideContent:"完成挑戰贏得獎勵",hitBarGuideContent:"越靠近中心區域, 擊球速度越快",betScore:"記錄",setUITitle:"設置",taskUITitle:"任務",getTaskWatchAD:"觀看廣告獲取新任務",machineUITitle:"扭蛋機",machineTip:"觀看廣告提升扭蛋機獎勵金幣",machineAdOpen:"觀看廣告獲取獎勵",canOpen:"獲取獎勵",skill1:"力量",skill2:"最大速度",skill3:"金幣獲取",skill4:"衝刺次數",skill5:"彈跳力增大",skill6:"摩擦力減小",skill101:"正方形強化",skill102:"三角形強化",skill103:"蹦床強化",skill104:"滑板強化",skill105:"彈簧強化",skill106:"圓環強化",skill107:"圓桶強化",ready:"準備",go:"開始",bad:"一般",cool:"很好",great:"真棒",amazing:"精准打擊",tapToContinue:"點擊繼續",superDash:"超級衝刺",destroy:"消滅",change:"顏色變化",tap:"點擊",quickTap:"快速點擊",coin:"金幣\n{0}",newSkin:"新皮膚",buffUpSpeed:"在下次遊戲中獲得1.3倍初始速度",buffPower:"在下回合遊戲中額外獲得3次衝刺機會",buffCoin:"在下回合遊戲中獲得2倍金幣獎勵",buffRevive:"在下回合遊戲中失敗時獲得一次額外的加速",impactBox:"消滅方形{0}個",impactTriangle:"消滅三角形{0}個",impactSpring:"消滅彈簧{0}個",impactLeap:"消滅蹦床{0}個",impactSlide:"消滅橢圓{0}個",impactRing:"消滅圓環{0}個",smallShoot:"使用{0}次小衝刺",bigShoot:"觸發{0}次大衝刺",impactBoxOnePlay:"在一次遊戲中消滅方形{0}個",impactTriangleOnePlay:"在一次遊戲中消滅三角形{0}個",impactSpringOnePlay:"在一次遊戲中消滅螺旋形{0}個",impactLeapOnePlay:"在一次遊戲中消滅直線{0}個",impactSlideOnePlay:"在一次遊戲中消滅橢圓{0}個",impactRingOnePlay:"在一次遊戲中消滅圓環{0}個",flyTimeOnePlay:"不接觸地面持續{0}秒",smallShootOnePlay:"在一次遊戲中使用小衝刺{0}次",bigShootOnePlay:"在一次遊戲中觸發大衝刺{0}次",highestLevel:"已經是最高等級",lackCoin:"金幣不足",netError:"網絡錯誤，請稍後再試",otherError:"其他錯誤，請稍後再試",lvName:"等級:{0}",icon_effect_1:"提升初始速度",icon_effect_2:"提升最大速度",icon_effect_3:"提升金幣獲取速度",icon_effect_4:"增加衝刺初始值",icon_effect_5:"提升球體最大Y方向速度",icon_effect_6:"降低撞擊地面減速效果",icon_effect_101:"降低撞擊減速效果",icon_effect_102:"降低撞擊減速效果",icon_effect_103:"提升撞擊蹦床後獲得的加速",icon_effect_104:"提升撞擊滑板後獲得的加速",icon_effect_105:"提升撞擊彈簧後獲得的加速",icon_effect_106:"提升撞擊圓環後獲得的加速",icon_effect_107:"提升撞擊圓桶後獲得的加速",max:"最大",stage:"順利",clear:"通關",level:"難度",up:"提升"},cc._RF.pop()},{}]},{},["FoeMng","Foe_base","Foe_box","Foe_gateway","Foe_leap","Foe_machineBox","Foe_ring","Foe_slide","Foe_spring","Foe_triangle","Move","Spawn","ball","AudioPlayer","wallBoss","camera-control","Game","physics-settings","BattleGameLogic","GameOverLogic","GameOverMachineLogic","GameUI","GuideLogic","LogoGameLogic","LotteryBuffIcon","LotteryItem","LotteryLogic","MachineLogic","ReadyGameLogic","SettingLogic","SkillItem","SkillUpLogic","SkinItem","TaskIcon","TaskItem","TaskLogic","skillUpItem","ADUtils","Baseball","DistanceProgress","HitBar","Loading","NodePool","PoolMng","PowerBar","Types","UserDataStorage","Utils","physics-bound","tipLabel","world","en","zh_cn","zh_tw","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min"]);